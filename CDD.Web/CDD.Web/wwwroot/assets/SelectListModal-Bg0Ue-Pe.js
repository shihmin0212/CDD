import{d as E,s as i,W as N,Q as S,c as o,h as d,n as g,f as e,E as L,t as k,x as U,g as j,v as Q,F as w,A as M,e as s,_ as A}from"./index-tYXX4zXZ.js";import{_ as W}from"./Pagination.vue_vue_type_script_setup_true_lang-CTE3-Uu0.js";const q=["aria-labelledby","aria-hidden"],G={class:"modal-content"},H={class:"modal-header"},J={class:"modal-title"},K={class:"modal-body"},O={class:"d-flex mb-2 btn-toolbar justify-content-end mb-3"},R={class:"btn-group me-2 mb-3",role:"group","aria-label":"First group"},X={class:"input-group ms-3",style:{"max-width":"200px"}},Y={key:0,class:"text-muted"},Z={key:1,class:"d-flex flex-wrap w-100"},ee={class:"card"},te={class:"card-body p-2 d-flex flex-column justify-content-between",style:{height:"100px"}},ae={class:"mb-2 text-truncate",style:{width:"100%"}},le=["data-is-disabled","onClick"],ne={key:2,class:"table table-bordered"},se=["data-is-disabled","onClick"],oe={class:"modal-footer"},ie=E({__name:"SelectListModal",props:{myModal:{},disabledDataList:{},selectedList:{},totalItems:{},onPageChange:{type:Function},onSelect:{type:Function},paginationType:{}},emits:["update:selectedList","update:totalItems","submit","cancel"],setup(x,{emit:I}){const a=x,$=I,f=i(!1),y=i(""),D=i([]),u=i([]),b=i(1),c=i(10),h=i(a.totalItems),r=i("card"),_=N(()=>{const l=u.value||[];if(a.paginationType==="client"){const t=(b.value-1)*c.value,n=t+c.value;return t>=l.length?[]:l.slice(t,n)}else return l});S(()=>{const l=a.selectedList||[];D.value=[...l],u.value=[...l]}),S(()=>{h.value=a.paginationType==="client"?u.value.length:a.totalItems});function C(l){a.onSelect&&a.onSelect(u.value[l].value)}function T(l,t){b.value=l,c.value=t,a.onPageChange&&a.onPageChange(y.value,l,t)}function B(){a.paginationType==="client"?u.value:a.onPageChange&&a.onPageChange(y.value,b.value,c.value)}function F(){}function P(l){l.target===l.currentTarget&&(f.value=!0,setTimeout(()=>{f.value=!1},150))}function V(){$("submit")}return(l,t)=>a.myModal.showModal?(s(),o("div",{key:0,class:g(["modal show d-block",{"static-backdrop-animation":f.value}]),tabindex:"-1","aria-labelledby":a.myModal.modalId,"aria-hidden":!a.myModal.showModal,onClick:P},[e("div",{class:g(["modal-dialog",[l.myModal.size,l.myModal.scrollable?"modal-dialog-scrollable":""]])},[e("div",G,[e("form",{onSubmit:L(V,["prevent"])},[e("div",H,[e("h5",J,k(a.myModal.title),1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=n=>l.$emit("cancel"))})]),e("div",K,[e("div",O,[e("div",R,[e("div",X,[j(e("input",{type:"text",class:"form-control",placeholder:"搜尋","onUpdate:modelValue":t[1]||(t[1]=n=>y.value=n)},null,512),[[Q,y.value]]),e("div",{class:"btn-close position-absolute end-0 top-50 translate-middle cursor-pointer shadow-none",onClick:F,"aria-label":"清除搜尋"},t[7]||(t[7]=[e("button",{class:"btn btn-link p-0","aria-label":"Close"},null,-1)]))]),e("button",{type:"button",class:"btn btn-esun-outline",onClick:B},"搜尋"),e("button",{type:"button",class:g(["btn btn-esun-outline",{active:r.value==="card"}]),onClick:t[2]||(t[2]=n=>r.value="card")}," 卡片顯示 ",2),e("button",{type:"button",class:g(["btn btn-esun-outline",{active:r.value==="table"}]),onClick:t[3]||(t[3]=n=>r.value="table")}," 表格顯示 ",2)])]),u.value.length===0?(s(),o("div",Y,"無選取項目")):d("",!0),r.value==="card"?(s(),o("div",Z,[(s(!0),o(w,null,M(_.value,(n,m)=>{var v,p;return s(),o("div",{key:m,class:"p-2",style:{flex:"1 1 0","min-width":"25%","max-width":"25%",width:"25%"}},[e("div",ee,[e("div",te,[e("div",ae,k(n.name),1),((v=a.disabledDataList)==null?void 0:v.includes(n.value))===!1?(s(),o("button",{key:0,type:"button","data-is-disabled":(p=a.disabledDataList)==null?void 0:p.includes(n.value),class:"btn btn-sm btn-danger align-self-end",onClick:z=>C(m)}," 選取 ",8,le)):d("",!0)])])])}),128))])):d("",!0),r.value==="table"?(s(),o("table",ne,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"項目"),e("th",null,"操作")])],-1)),e("tbody",null,[(s(!0),o(w,null,M(_.value,(n,m)=>{var v,p;return s(),o("tr",{key:m},[e("td",null,k(n.name),1),e("td",null,[((v=a.disabledDataList)==null?void 0:v.includes(n.value))===!1?(s(),o("button",{key:0,"data-is-disabled":(p=a.disabledDataList)==null?void 0:p.includes(n.value),type:"button",class:"btn btn-sm btn-danger",onClick:z=>C(m)}," 選取 ",8,se)):d("",!0)])])}),128))])])):d("",!0),h.value?(s(),U(W,{key:3,modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=n=>b.value=n),pageSize:c.value,"onUpdate:pageSize":t[5]||(t[5]=n=>c.value=n),"total-items":h.value,goToPage:T},null,8,["modelValue","pageSize","total-items"])):d("",!0)]),e("div",oe,[e("button",{class:"btn btn-esun-outline",onClick:t[6]||(t[6]=L(n=>l.$emit("cancel"),["prevent"]))},"取消"),t[9]||(t[9]=e("button",{type:"submit",class:"btn btn-esun-primary"},"確定",-1))])],32)])],2)],10,q)):d("",!0)}}),ce=A(ie,[["__scopeId","data-v-ce5011a1"]]);export{ce as S};
//# sourceMappingURL=SelectListModal-Bg0Ue-Pe.js.map
