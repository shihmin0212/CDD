{"version":3,"file":"Pagination.vue_vue_type_script_setup_true_lang-legacy-Ck0czqvf.js","sources":["../../src/components/pagination/Pagination.vue"],"sourcesContent":["<template>\r\n    <div class=\"d-flex flex-column flex-md-row align-items-center justify-content-between mt-3 mb-3\">\r\n        <!-- Page size select -->\r\n        <div class=\"mb-2 mb-md-0\">\r\n            <label class=\"me-2\">每頁顯示</label>\r\n            <select class=\"form-select d-inline-block w-auto\" v-model.number=\"localPageSize\" @change=\"onPageSizeChange\">\r\n                <option v-for=\"size in pageSizeOptions\" :key=\"size\" :value=\"size\">\r\n                    {{ size }}\r\n                </option>\r\n            </select>\r\n            筆\r\n        </div>\r\n\r\n        <!-- Pagination -->\r\n        <nav class=\"mx-auto\">\r\n            <ul class=\"pagination pagination-esun mb-0\">\r\n                <li class=\"page-item\" :class=\"{ disabled: isFirstPage }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(currentPage - 1)\" :disabled=\"isFirstPage\">前一頁</button>\r\n                </li>\r\n\r\n                <li v-for=\"page in pageRange\" :key=\"page\" class=\"page-item\" :class=\"{ active: currentPage === page }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\r\n                </li>\r\n\r\n                <li class=\"page-item\" :class=\"{ disabled: isLastPage }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(currentPage + 1)\" :disabled=\"isLastPage\">下一頁</button>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, watch, ref } from 'vue';\r\n\r\ninterface Props {\r\n    totalItems: number; // 總項目數\r\n    modelValue: number; // 當前頁碼\r\n    pageSize: number; // 每頁顯示數量\r\n    goToPage?: (page: number, pageSize: number) => void; // 可選的回調函數，用於頁碼變更時\r\n}\r\n\r\nconst props = defineProps<Props>();\r\nconst emit = defineEmits(['update:modelValue', 'update:pageSize']);\r\n\r\nconst pageSizeOptions = [1, 10, 20, 30, 100];\r\nconst localPageSize = ref(props.pageSize);\r\nwatch(\r\n    () => props.pageSize,\r\n    (newPageSize) => {\r\n        localPageSize.value = newPageSize;\r\n    }\r\n);\r\n\r\nconst currentPage = computed(() => props.modelValue);\r\nconst totalPages = computed(() => Math.ceil(props.totalItems / localPageSize.value));\r\nconst isFirstPage = computed(() => currentPage.value <= 1);\r\nconst isLastPage = computed(() => currentPage.value >= totalPages.value);\r\n\r\nconst pageRange = computed(() => {\r\n    const maxVisible = 5;\r\n    let start = Math.max(1, currentPage.value - Math.floor(maxVisible / 2));\r\n    let end = start + maxVisible - 1;\r\n    if (end > totalPages.value) {\r\n        end = totalPages.value;\r\n        start = Math.max(1, end - maxVisible + 1);\r\n    }\r\n    const range = [];\r\n    for (let i = start; i <= end; i++) {\r\n        range.push(i);\r\n    }\r\n    return range;\r\n});\r\n\r\nfunction goToPage(page: number) {\r\n    const validPage = Math.min(Math.max(page, 1), totalPages.value);\r\n    emit('update:modelValue', validPage);\r\n    // 如果有 onPageChange 回調，呼叫它\r\n\r\n    if (props.goToPage) {\r\n        props.goToPage(validPage, localPageSize.value);\r\n    }\r\n}\r\n\r\nfunction onPageSizeChange() {\r\n    // 更新本地頁大小\r\n    emit('update:pageSize', localPageSize.value);\r\n    emit('update:modelValue', 1); // Reset to page 1 when page size changes\r\n\r\n    if (props.goToPage) {\r\n        props.goToPage(1, localPageSize.value);\r\n    }\r\n}\r\n</script>\r\n"],"names":["props","__props","emit","__emit","pageSizeOptions","localPageSize","ref","pageSize","watch","newPageSize","value","currentPage","computed","modelValue","totalPages","Math","ceil","totalItems","isFirstPage","isLastPage","pageRange","start","max","floor","maxVisible","end","range","i","push","goToPage","page","validPage","min","onPageSizeChange","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","class","$event","onChange","_Fragment","_renderList","size","key","_hoisted_3","number","_hoisted_4","_hoisted_5","_normalizeClass","disabled","onClick","_hoisted_6","active","_hoisted_7","_hoisted_8"],"mappings":"2pBA0CMA,EAAQC,EACRC,EAAOC,EAEPC,EAAkB,CAAC,EAAG,GAAI,GAAI,GAAI,KAClCC,EAAgBC,EAAIN,EAAMO,UAChCC,GACI,WAAM,OAAAR,EAAMO,QAAA,IACZ,SAACE,GACGJ,EAAcK,MAAQD,CAAA,IAI9B,IAAME,EAAcC,GAAS,WAAM,OAAAZ,EAAMa,UAAU,IAC7CC,EAAaF,GAAS,WAAM,OAAAG,KAAKC,KAAKhB,EAAMiB,WAAaZ,EAAcK,MAAM,IAC7EQ,EAAcN,GAAS,WAAA,OAAMD,EAAYD,OAAS,CAAC,IACnDS,EAAaP,GAAS,WAAA,OAAMD,EAAYD,OAASI,EAAWJ,KAAK,IAEjEU,EAAYR,GAAS,WACvB,IACIS,EAAQN,KAAKO,IAAI,EAAGX,EAAYD,MAAQK,KAAKQ,MAAMC,MACnDC,EAAMJ,EAFS,EAEY,EAC3BI,EAAMX,EAAWJ,QACjBe,EAAMX,EAAWJ,MACjBW,EAAQN,KAAKO,IAAI,EAAGG,EALL,EAKwB,IAG3C,IADA,IAAMC,EAAQ,GACLC,EAAIN,EAAOM,GAAKF,EAAKE,IAC1BD,EAAME,KAAKD,GAER,OAAAD,CAAA,IAGX,SAASG,EAASC,GACR,IAAAC,EAAYhB,KAAKiB,IAAIjB,KAAKO,IAAIQ,EAAM,GAAIhB,EAAWJ,OACzDR,EAAK,oBAAqB6B,GAGtB/B,EAAM6B,UACA7B,EAAA6B,SAASE,EAAW1B,EAAcK,MAC5C,CAGJ,SAASuB,IAEA/B,EAAA,kBAAmBG,EAAcK,OACtCR,EAAK,oBAAqB,GAEtBF,EAAM6B,UACA7B,EAAA6B,SAAS,EAAGxB,EAAcK,MACpC,sBA1FA,OAAAwB,IAAAC,EA4BM,MA5BNC,EA4BM,CA1BFC,EAQM,MARNC,EAQM,CAPFC,EAAA,KAAAA,EAAA,GAAAF,EAAgC,QAAzB,CAAAG,MAAM,QAAO,QAAI,MACxBH,EAIS,SAAA,CAJDG,MAAM,kFAAoD,OAAAnC,EAAaK,MAAA+B,CAAA,GAAGC,SAAQT,SACtFE,EAESQ,EAAA,KAAAC,EAFcxC,GAAe,SAAvByC,UAAfR,EAES,SAAA,CAFgCS,IAAKD,EAAOnC,MAAOmC,KACrDA,GAAI,EAAAE,qBAFmD1C,EAAaK,aAArB,CAAAsC,QAAR,oBAIzC,UAKbX,EAcM,MAdNY,EAcM,CAbFZ,EAYK,KAZLa,EAYK,CAXDb,EAEK,KAAA,CAFDG,MAAKW,EAAA,CAAC,YAAW,CAAAC,SAAqBlC,EAAWR,WACjD2B,EAAiG,SAAA,CAAzFG,MAAM,YAAaa,QAAKd,EAAA,KAAAA,EAAA,GAAA,SAAAE,UAAEZ,EAASlB,EAAWD,MAAA,EAAA,GAAQ0C,SAAUlC,EAAWR,OAAE,MAAG,EAAA4C,cAG5FnB,EAEKQ,EAAA,KAAAC,EAFcxB,EAASV,OAAA,SAAjBoB,cAAXK,EAEK,KAAA,CAF0BW,IAAKhB,EAAMU,MAAMW,EAAA,CAAA,YAA8B,CAAAI,OAAA5C,EAAAD,QAAgBoB,OAC1FO,EAAqE,SAAA,CAA7DG,MAAM,YAAaa,QAAK,SAAAZ,GAAE,OAAAZ,EAASC,OAAUA,GAAI,EAAA0B,gBAG7DnB,EAEK,KAAA,CAFDG,MAAKW,EAAA,CAAC,YAAW,CAAAC,SAAqBjC,EAAUT,WAChD2B,EAAgG,SAAA,CAAxFG,MAAM,YAAaa,QAAKd,EAAA,KAAAA,EAAA,GAAA,SAAAE,GAAE,OAAAZ,EAASlB,EAAWD,MAAA,EAAA,GAAQ0C,SAAUjC,EAAUT,OAAE,MAAG,EAAA+C"}