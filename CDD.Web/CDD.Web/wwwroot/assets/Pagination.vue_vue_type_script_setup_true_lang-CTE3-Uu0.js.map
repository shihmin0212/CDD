{"version":3,"file":"Pagination.vue_vue_type_script_setup_true_lang-CTE3-Uu0.js","sources":["../../src/components/pagination/Pagination.vue"],"sourcesContent":["<template>\r\n    <div class=\"d-flex flex-column flex-md-row align-items-center justify-content-between mt-3 mb-3\">\r\n        <!-- Page size select -->\r\n        <div class=\"mb-2 mb-md-0\">\r\n            <label class=\"me-2\">每頁顯示</label>\r\n            <select class=\"form-select d-inline-block w-auto\" v-model.number=\"localPageSize\" @change=\"onPageSizeChange\">\r\n                <option v-for=\"size in pageSizeOptions\" :key=\"size\" :value=\"size\">\r\n                    {{ size }}\r\n                </option>\r\n            </select>\r\n            筆\r\n        </div>\r\n\r\n        <!-- Pagination -->\r\n        <nav class=\"mx-auto\">\r\n            <ul class=\"pagination pagination-esun mb-0\">\r\n                <li class=\"page-item\" :class=\"{ disabled: isFirstPage }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(currentPage - 1)\" :disabled=\"isFirstPage\">前一頁</button>\r\n                </li>\r\n\r\n                <li v-for=\"page in pageRange\" :key=\"page\" class=\"page-item\" :class=\"{ active: currentPage === page }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\r\n                </li>\r\n\r\n                <li class=\"page-item\" :class=\"{ disabled: isLastPage }\">\r\n                    <button class=\"page-link\" @click=\"goToPage(currentPage + 1)\" :disabled=\"isLastPage\">下一頁</button>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, watch, ref } from 'vue';\r\n\r\ninterface Props {\r\n    totalItems: number; // 總項目數\r\n    modelValue: number; // 當前頁碼\r\n    pageSize: number; // 每頁顯示數量\r\n    goToPage?: (page: number, pageSize: number) => void; // 可選的回調函數，用於頁碼變更時\r\n}\r\n\r\nconst props = defineProps<Props>();\r\nconst emit = defineEmits(['update:modelValue', 'update:pageSize']);\r\n\r\nconst pageSizeOptions = [1, 10, 20, 30, 100];\r\nconst localPageSize = ref(props.pageSize);\r\nwatch(\r\n    () => props.pageSize,\r\n    (newPageSize) => {\r\n        localPageSize.value = newPageSize;\r\n    }\r\n);\r\n\r\nconst currentPage = computed(() => props.modelValue);\r\nconst totalPages = computed(() => Math.ceil(props.totalItems / localPageSize.value));\r\nconst isFirstPage = computed(() => currentPage.value <= 1);\r\nconst isLastPage = computed(() => currentPage.value >= totalPages.value);\r\n\r\nconst pageRange = computed(() => {\r\n    const maxVisible = 5;\r\n    let start = Math.max(1, currentPage.value - Math.floor(maxVisible / 2));\r\n    let end = start + maxVisible - 1;\r\n    if (end > totalPages.value) {\r\n        end = totalPages.value;\r\n        start = Math.max(1, end - maxVisible + 1);\r\n    }\r\n    const range = [];\r\n    for (let i = start; i <= end; i++) {\r\n        range.push(i);\r\n    }\r\n    return range;\r\n});\r\n\r\nfunction goToPage(page: number) {\r\n    const validPage = Math.min(Math.max(page, 1), totalPages.value);\r\n    emit('update:modelValue', validPage);\r\n    // 如果有 onPageChange 回調，呼叫它\r\n\r\n    if (props.goToPage) {\r\n        props.goToPage(validPage, localPageSize.value);\r\n    }\r\n}\r\n\r\nfunction onPageSizeChange() {\r\n    // 更新本地頁大小\r\n    emit('update:pageSize', localPageSize.value);\r\n    emit('update:modelValue', 1); // Reset to page 1 when page size changes\r\n\r\n    if (props.goToPage) {\r\n        props.goToPage(1, localPageSize.value);\r\n    }\r\n}\r\n</script>\r\n"],"names":["props","__props","emit","__emit","pageSizeOptions","localPageSize","ref","watch","newPageSize","currentPage","computed","totalPages","isFirstPage","isLastPage","pageRange","start","end","range","i","goToPage","page","validPage","onPageSizeChange","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","$event","_Fragment","_renderList","size","_hoisted_3","_hoisted_4","_hoisted_5","_normalizeClass","_hoisted_6","_hoisted_7","_hoisted_8"],"mappings":"6hBA0CA,MAAMA,EAAQC,EACRC,EAAOC,EAEPC,EAAkB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAG,EACrCC,EAAgBC,EAAIN,EAAM,QAAQ,EACxCO,EACI,IAAMP,EAAM,SACXQ,GAAgB,CACbH,EAAc,MAAQG,CAAA,CAE9B,EAEA,MAAMC,EAAcC,EAAS,IAAMV,EAAM,UAAU,EAC7CW,EAAaD,EAAS,IAAM,KAAK,KAAKV,EAAM,WAAaK,EAAc,KAAK,CAAC,EAC7EO,EAAcF,EAAS,IAAMD,EAAY,OAAS,CAAC,EACnDI,EAAaH,EAAS,IAAMD,EAAY,OAASE,EAAW,KAAK,EAEjEG,EAAYJ,EAAS,IAAM,CAEzB,IAAAK,EAAQ,KAAK,IAAI,EAAGN,EAAY,MAAQ,KAAK,MAAM,GAAc,CAAC,EAClEO,EAAMD,EAAQ,EAAa,EAC3BC,EAAML,EAAW,QACjBK,EAAML,EAAW,MACjBI,EAAQ,KAAK,IAAI,EAAGC,EAAM,EAAa,CAAC,GAE5C,MAAMC,EAAQ,CAAC,EACf,QAASC,EAAIH,EAAOG,GAAKF,EAAKE,IAC1BD,EAAM,KAAKC,CAAC,EAET,OAAAD,CAAA,CACV,EAED,SAASE,EAASC,EAAc,CACtB,MAAAC,EAAY,KAAK,IAAI,KAAK,IAAID,EAAM,CAAC,EAAGT,EAAW,KAAK,EAC9DT,EAAK,oBAAqBmB,CAAS,EAG/BrB,EAAM,UACAA,EAAA,SAASqB,EAAWhB,EAAc,KAAK,CACjD,CAGJ,SAASiB,GAAmB,CAEnBpB,EAAA,kBAAmBG,EAAc,KAAK,EAC3CH,EAAK,oBAAqB,CAAC,EAEvBF,EAAM,UACAA,EAAA,SAAS,EAAGK,EAAc,KAAK,CACzC,eA1FAkB,EAAA,EAAAC,EA4BM,MA5BNC,EA4BM,CA1BFC,EAQM,MARNC,EAQM,CAPFC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAgC,QAAzB,CAAA,MAAM,QAAO,OAAI,EAAA,KACxBA,EAIS,SAAA,CAJD,MAAM,yEAAoDrB,EAAa,MAAAwB,GAAG,SAAQP,CAAA,QACtFE,EAESM,EAAA,KAAAC,EAFc3B,EAAR4B,GAAfN,EAES,SAAA,CAFgC,IAAKM,EAAO,MAAOA,KACrDA,CAAI,EAAA,EAAAC,CAAA,kBAFmD5B,EAAa,aAArB,CAAA,OAAR,EAA8B,CAAA,kBAIvE,KAEb,EAAA,GAGAqB,EAcM,MAdNQ,EAcM,CAbFR,EAYK,KAZLS,EAYK,CAXDT,EAEK,KAAA,CAFD,MAAKU,EAAA,CAAC,YAAW,CAAA,SAAqBxB,EAAW,MAAA,CAAA,CAAA,GACjDc,EAAiG,SAAA,CAAzF,MAAM,YAAa,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEV,EAASV,EAAW,MAAA,CAAA,GAAQ,SAAUG,EAAW,KAAA,EAAE,MAAG,EAAAyB,CAAA,aAG5Fb,EAEKM,EAAA,KAAAC,EAFcjB,EAAS,MAAjBM,QAAXI,EAEK,KAAA,CAF0B,IAAKJ,EAAM,MAAMgB,EAAA,CAAA,YAA8B,CAAA,OAAA3B,EAAA,QAAgBW,EAAI,CAAA,CAAA,GAC9FM,EAAqE,SAAA,CAA7D,MAAM,YAAa,QAAKG,GAAEV,EAASC,CAAI,KAAMA,CAAI,EAAA,EAAAkB,CAAA,cAG7DZ,EAEK,KAAA,CAFD,MAAKU,EAAA,CAAC,YAAW,CAAA,SAAqBvB,EAAU,MAAA,CAAA,CAAA,GAChDa,EAAgG,SAAA,CAAxF,MAAM,YAAa,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEV,EAASV,EAAW,MAAA,CAAA,GAAQ,SAAUI,EAAU,KAAA,EAAE,MAAG,EAAA0B,CAAA,CAAA"}