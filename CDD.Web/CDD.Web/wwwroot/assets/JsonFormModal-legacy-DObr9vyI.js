!function(){function e(l){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(l)}function l(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);l&&(a=a.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,a)}return t}function t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(l){a(e,l,n[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))}))}return e}function a(l,t,a){return(t=function(l){var t=function(l,t){if("object"!=e(l)||!l)return l;var a=l[Symbol.toPrimitive];if(void 0!==a){var n=a.call(l,t||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(l)}(l,"string");return"symbol"==e(t)?t:t+""}(t))in l?Object.defineProperty(l,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):l[t]=a,l}function n(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,o,i,r=[],d=!0,u=!1;try{if(o=(t=t.call(e)).next,0===l){if(Object(t)!==t)return;d=!1}else for(;!(d=(a=o.call(t)).done)&&(r.push(a.value),r.length!==l);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw n}}return r}}(e,l)||r(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,l){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=r(e))||l&&e&&"number"==typeof e.length){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,d=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){d=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(d)throw o}}}}function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,l){if(e){if("string"==typeof e)return d(e,l);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,l):void 0}}function d(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,a=Array(l);t<l;t++)a[t]=e[t];return a}System.register(["./index-legacy-DIWtPno0.js"],(function(e,l){"use strict";var a,r,d,u,c,f,s,m,p,v,b,y,h,g,k,x,V,I,C,w;return{setters:[function(e){a=e.d,r=e.s,d=e.W,u=e.w,c=e.c,f=e.e,s=e.f,m=e.h,p=e.z,v=e.t,b=e.a2,y=e.F,h=e.A,g=e.n,k=e.o,x=e._,V=e.Q,I=e.b,C=e.E,w=e.x}],execute:function(){var l=document.createElement("style");l.textContent=".text-truncate[data-v-ba838661]{max-width:300px}.preview-image[data-v-ba838661]{height:120px;object-fit:cover;cursor:pointer;transition:transform .2s ease}.preview-image[data-v-ba838661]:hover{transform:scale(1.02)}.modal[data-v-ba838661]{z-index:1060}.is-invalid[data-v-57587624]{border-color:#dc3545}.invalid-feedback[data-v-57587624]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.modal[data-v-00c26f72]{background-color:rgba(0,0,0,.5)}.modal-dialog[data-v-00c26f72]{background-color:transparent}.static-backdrop-animation[data-v-00c26f72]{animation:staticBackdropAnimation-00c26f72 .15s ease-in-out}.modal-dialog-scrollable .modal-body[data-v-00c26f72]{max-height:calc(100vh - 200px);overflow-y:auto}@keyframes staticBackdropAnimation-00c26f72{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.alert_text[data-v-00c26f72]{letter-spacing:1px;line-height:1.7}\n/*$vite$:1*/",document.head.appendChild(l);var S={class:"mb-3"},_=["for"],j={key:0,class:"text-danger"},O={class:"input-group"},M=["id","name","type","placeholder","disabled","readonly","maxlength","value"],E=["title"],U={key:0,class:"form-text text-muted"},A={key:1,style:{"white-space":"pre"},class:"alert_text text-danger"},F=a({__name:"FormInput",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t,a=l.emit,n=e,o=a,i=r(null!==(t=n.modelValue)&&void 0!==t?t:""),y=d((function(){return!(!n.field.readonly||!n.field.onClickCallback)}));function h(e){var l=e.target.value,t=n.field.onInputCallback,a=l;if(t){var r=t(l);"string"==typeof r&&(a=r)}e.target.value=a,i.value=a,o("update:modelValue",a)}function g(e){var l,t,a=e.target.value;null===(l=(t=n.field).onChangeCallback)||void 0===l||l.call(t,a)}function k(){n.field.readonly&&n.field.onClickCallback&&n.field.onClickCallback()}function x(){var e,l,t,a;i.value="",o("update:modelValue",""),null===(e=(l=n.field).onClearInput)||void 0===e||e.call(l),null===(t=(a=n.field).onChangeCallback)||void 0===t||t.call(a,"")}return u((function(){return n.modelValue}),(function(e){i.value=null!=e?e:""})),function(e,l){return f(),c("div",S,[s("label",{for:e.field.modelId,class:"form-label"},[p(v(e.field.label)+" ",1),!0===e.field.required?(f(),c("span",j," * ")):m("",!0)],8,_),s("div",O,[s("input",{class:"form-control",autocomplete:"off",id:e.field.modelId,name:e.field.name||e.field.modelId,type:e.field.type||"text",placeholder:e.field.placeholder||"",disabled:e.field.disabled,readonly:e.field.readonly,maxlength:e.field.maxlength,value:i.value,onInput:h,onChange:g,onClick:k,style:b(e.field.readonly&&e.field.onClickCallback?"cursor: pointer;":"")},null,44,M),y.value?(f(),c("button",{key:0,type:"button",class:"btn btn-esun-outline",onClick:x,title:"清除 "+e.field.label},l[0]||(l[0]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,E)):m("",!0)]),e.field.hint?(f(),c("small",U,v(e.field.hint),1)):m("",!0),e.field.error?(f(),c("div",A,v(e.field.error),1)):m("",!0)])}}}),z={class:"mb-3"},D=["for"],P={key:0,class:"text-danger"},q=["id","disabled","value"],B={key:0,disabled:"",value:""},N=["value","disabled","title"],T={key:0,class:"form-text text-muted"},L={key:1,style:{"white-space":"pre"},class:"alert_text text-danger"},R=a({__name:"FormSelect",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,n=t;function o(e){var l,t,o,i,r=e.target.value;n("update:modelValue",r),null===(l=(t=a.field).onChangeCallback)||void 0===l||l.call(t,r),null===(o=(i=a.field).onInputCallback)||void 0===o||o.call(i,r)}return function(e,l){return f(),c("div",z,[s("label",{for:e.field.modelId,class:"form-label"},[p(v(e.field.label)+" ",1),!0===e.field.required?(f(),c("span",P," * ")):m("",!0)],8,D),s("select",{id:e.field.modelId,class:"form-select",disabled:e.field.disabled,value:e.modelValue,onChange:o},[e.field.placeholder?(f(),c("option",B,v(e.field.placeholder),1)):m("",!0),(f(!0),c(y,null,h(e.field.options,(function(e,l){return f(),c("option",{key:l,value:e.value,disabled:e.disabled,title:e.tooltip},v(e.label),9,N)})),128))],40,q),e.field.hint?(f(),c("small",T,v(e.field.hint),1)):m("",!0),e.field.error?(f(),c("div",L,v(e.field.error),1)):m("",!0)])}}}),G={class:"mb-3"},W={class:"form-label"},$={key:0,class:"text-danger"},J=["id","name","value","disabled","title","checked","onChange"],H=["for"],K={key:0,class:"form-text text-muted ms-2"},Q={key:0,style:{"white-space":"pre"},class:"alert_text text-danger"},Y=a({__name:"FormCheckbox",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,n=t;return function(e,l){return f(),c("div",G,[s("label",W,[p(v(e.field.label)+" ",1),!0===e.field.required?(f(),c("span",$," * ")):m("",!0)]),s("div",null,[(f(!0),c(y,null,h(e.field.options,(function(l,t){return f(),c("div",{key:t,class:g(["form-check",e.field.inline?"form-check-inline":""])},[s("input",{class:"form-check-input",type:"checkbox",id:"".concat(e.field.modelId,"_").concat(l.value),name:e.field.name||e.field.modelId,value:l.value,disabled:e.field.disabled||l.disabled,title:l.tooltip,checked:e.modelValue.includes(String(l.value)),onChange:function(e){return function(e,l){var t,o,r,d,u=e.target.checked,c=i(a.modelValue);if(u&&!c.includes(l))c.push(l);else if(!u&&c.includes(l)){var f=c.indexOf(l);c.splice(f,1)}n("update:modelValue",c),null===(t=(o=a.field).onChangeCallback)||void 0===t||t.call(o,c),null===(r=(d=a.field).onInputCallback)||void 0===r||r.call(d,c)}(e,String(l.value))}},null,40,J),s("label",{class:"form-check-label",for:"".concat(e.field.modelId,"_").concat(l.value)},v(l.label),9,H),l.hint?(f(),c("small",K,v(l.hint),1)):m("",!0)],2)})),128))]),e.field.error?(f(),c("div",Q,v(e.field.error),1)):m("",!0)])}}}),X={class:"mb-3"},Z=["for"],ee={key:0,class:"text-danger"},le={key:0,class:"form-text text-muted"},te=["id","name","value","disabled","checked"],ae=["for"],ne={key:0,class:"form-text text-muted ms-2"},oe={key:1,style:{"white-space":"pre"},class:"alert_text text-danger"},ie=a({__name:"FormRadioGroup",props:{field:{},modelValue:{type:[String,Boolean,Number,null]}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,n=t;function o(e){var l,t,o,i,r=e.target.value,d=r;("boolean"==typeof a.modelValue?d="true"===r:"number"==typeof a.modelValue&&(d=Number(r)),String(d)!==String(a.modelValue))&&(n("update:modelValue",d),null===(l=(t=a.field).onChangeCallback)||void 0===l||l.call(t,d),null===(o=(i=a.field).onInputCallback)||void 0===o||o.call(i,d))}return function(e,l){return f(),c("div",X,[s("label",{for:e.field.modelId,class:"form-label"},[p(v(e.field.label)+" ",1),!0===e.field.required?(f(),c("span",ee," * ")):m("",!0)],8,Z),e.field.hint?(f(),c("small",le,v(e.field.hint),1)):m("",!0),s("div",null,[(f(!0),c(y,null,h(e.field.options,(function(l,t){return f(),c("div",{key:t,class:g(["form-check",e.field.inline?"form-check-inline":""])},[s("input",{class:"form-check-input",autocomplete:"off",type:"radio",id:"".concat(e.field.modelId,"_").concat(l.value),name:e.field.name||e.field.modelId,value:l.value,disabled:e.field.disabled||l.disabled,checked:String(e.modelValue)===String(l.value),onChange:o},null,40,te),s("label",{class:"form-check-label",for:"".concat(e.field.modelId,"_").concat(l.value)},v(l.label),9,ae),l.hint?(f(),c("small",ne,v(l.hint),1)):m("",!0)],2)})),128))]),e.field.error?(f(),c("div",oe,v(e.field.error),1)):m("",!0)])}}}),re={class:"mb-3"},de=["for"],ue={key:0,class:"text-danger"},ce={key:0,class:"form-text text-muted"},fe=["id","placeholder","rows","maxlength","disabled","value"],se={key:1,style:{"white-space":"pre"},class:"alert_text text-danger"},me=a({__name:"FormTextarea",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,n=t;function o(e){var l=e.target.value,t=a.field.onInputCallback,o=l;if(t){var i=t(l);"string"==typeof i&&(o=i)}e.target.value=o,n("update:modelValue",o)}function i(e){var l,t,n=e.target.value;null===(l=(t=a.field).onChangeCallback)||void 0===l||l.call(t,n)}return function(e,l){return f(),c("div",re,[s("label",{for:e.field.modelId,class:"form-label"},[p(v(e.field.label)+" ",1),!0===e.field.required?(f(),c("span",ue," * ")):m("",!0)],8,de),e.field.hint?(f(),c("small",ce,v(e.field.hint),1)):m("",!0),s("textarea",{id:e.field.modelId,class:"form-control",placeholder:e.field.placeholder,rows:e.field.rows,maxlength:e.field.maxlength,disabled:e.field.disabled,value:e.modelValue,onInput:o,onChange:i},null,40,fe),e.field.error?(f(),c("div",se,v(e.field.error),1)):m("",!0)])}}}),pe={class:"mb-3"},ve=["for"],be={key:0,class:"text-danger"},ye=["id","name","accept","multiple","disabled"],he={key:0,class:"mt-2"},ge={class:"list-unstyled"},ke={class:"text-truncate"},xe=["onClick","disabled"],Ve={key:1,class:"mt-3"},Ie={class:"row g-2 mt-1"},Ce={class:"position-relative"},we=["src","alt","onClick"],Se=["onClick","disabled"],_e={class:"text-muted d-block text-truncate mt-1"},je={class:"modal-dialog modal-lg modal-dialog-centered"},Oe={class:"modal-content bg-transparent border-0"},Me={class:"modal-header border-0 pb-0"},Ee={class:"modal-title text-white"},Ue={class:"modal-body text-center"},Ae=["src","alt"],Fe={key:3,class:"form-text"},ze={key:0},De={key:1},Pe={key:2},qe={key:3},Be={key:4,class:"invalid-feedback d-block"},Ne=x(a({__name:"FormFile",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,d=t,b=r(),x=r([]),V=r([]),I=r(!1),C=r(null);function w(e){var l=e.target,t=function(e){var l,t=[],n=[],i=o(e);try{for(i.s();!(l=i.n()).done;){var r=l.value;a.field.maxSize&&r.size>a.field.maxSize?n.push('檔案 "'.concat(r.name,'" 超過大小限制 ').concat(M(a.field.maxSize))):!a.field.accept||S(r,a.field.accept)?t.push(r):n.push('檔案 "'.concat(r.name,'" 格式不符合要求'))}}catch(u){i.e(u)}finally{i.f()}var d=x.value.length+t.length;if(a.field.maxFiles&&d>a.field.maxFiles)return n.push("最多只能上傳 ".concat(a.field.maxFiles," 個檔案")),[];n.length>0?a.field.error=n.join(", "):a.field.error="";return t}(Array.from(l.files||[]));t.length>0&&(a.field.multiple?(x.value=t,d("update:modelValue",t)):(x.value=[t[0]],d("update:modelValue",t[0]))),b.value&&(b.value.value="")}function S(e,l){var t,a=o(l.split(",").map((function(e){return e.trim()})));try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.startsWith(".")){if(e.name.toLowerCase().endsWith(i.toLowerCase()))return!0}else if(i.includes("*")){var r=n(i.split("/"),1)[0];if(e.type.startsWith(r))return!0}else if(e.type===i)return!0}}catch(d){a.e(d)}finally{a.f()}return!1}function _(e){x.value.splice(e,1),a.field.multiple?d("update:modelValue",x.value.length>0?x.value:null):d("update:modelValue",null)}function j(){V.value.forEach((function(e){URL.revokeObjectURL(e.url)})),V.value=[],x.value.forEach((function(e,l){if(function(e){return e.type.startsWith("image/")}(e)){var t=URL.createObjectURL(e);V.value.push({url:t,fileName:e.name,index:l})}}))}function O(){I.value=!1,C.value=null}function M(e){if(0===e)return"0 B";var l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]}return u((function(){return a.modelValue}),(function(e){e?Array.isArray(e)?x.value=i(e):x.value=[e]:x.value=[],j()}),{immediate:!0}),u((function(){return x.value}),(function(){j()}),{deep:!0}),k((function(){V.value.forEach((function(e){URL.revokeObjectURL(e.url)}))})),function(e,l){var t;return f(),c("div",pe,[s("label",{for:e.field.name,class:"form-label"},[p(v(e.field.label)+" ",1),e.field.required?(f(),c("span",be,"*")):m("",!0)],8,ve),s("input",{id:e.field.name,name:e.field.name,type:"file",class:g(["form-control",{"is-invalid":e.field.error}]),accept:e.field.accept,multiple:e.field.multiple,disabled:e.field.disabled,onChange:w,ref_key:"fileInputRef",ref:b},null,42,ye),x.value.length>0?(f(),c("div",he,[l[0]||(l[0]=s("small",{class:"text-muted"},"已選取的檔案：",-1)),s("ul",ge,[(f(!0),c(y,null,h(x.value,(function(l,t){return f(),c("li",{key:t,class:"d-flex justify-content-between align-items-center"},[s("span",ke,v(l.name)+" ("+v(M(l.size))+") ",1),s("button",{type:"button",class:"btn btn-sm btn-esun-outline-danger ms-2",onClick:function(e){return _(t)},disabled:e.field.disabled}," × ",8,xe)])})),128))])])):m("",!0),V.value.length>0?(f(),c("div",Ve,[l[1]||(l[1]=s("small",{class:"text-muted"},"圖片預覽：",-1)),s("div",Ie,[(f(!0),c(y,null,h(V.value,(function(l,t){return f(),c("div",{key:t,class:"col-6 col-md-4 col-lg-3"},[s("div",Ce,[s("img",{src:l.url,alt:l.fileName,class:"img-thumbnail w-100 preview-image",onClick:function(e){return function(e){C.value=e,I.value=!0}(l)}},null,8,we),s("button",{type:"button",class:"btn btn-sm btn-danger position-absolute top-0 end-0 rounded-circle",style:{width:"24px",height:"24px",padding:"0",transform:"translate(50%, -50%)"},onClick:function(e){return _(l.index)},disabled:e.field.disabled,title:"移除圖片"}," × ",8,Se)]),s("small",_e,v(l.fileName),1)])})),128))])])):m("",!0),I.value?(f(),c("div",{key:2,class:"modal show d-block",tabindex:"-1",onClick:O,style:{"background-color":"rgba(0, 0, 0, 0.8)"}},[s("div",je,[s("div",Oe,[s("div",Me,[s("h5",Ee,v(null===(t=C.value)||void 0===t?void 0:t.fileName),1),s("button",{type:"button",class:"btn-close btn-close-white",onClick:O})]),s("div",Ue,[C.value?(f(),c("img",{key:0,src:C.value.url,alt:C.value.fileName,class:"img-fluid",style:{"max-height":"70vh"}},null,8,Ae)):m("",!0)])])])])):m("",!0),e.field.hint||e.field.accept||e.field.maxSize?(f(),c("div",Fe,[e.field.hint?(f(),c("div",ze,v(e.field.hint),1)):m("",!0),e.field.accept?(f(),c("div",De,"允許的檔案格式: "+v(e.field.accept),1)):m("",!0),e.field.maxSize?(f(),c("div",Pe,"檔案大小限制: "+v(M(e.field.maxSize)),1)):m("",!0),e.field.maxFiles?(f(),c("div",qe,"最多可上傳 "+v(e.field.maxFiles)+" 個檔案",1)):m("",!0)])):m("",!0),e.field.error?(f(),c("div",Be,v(e.field.error),1)):m("",!0)])}}}),[["__scopeId","data-v-ba838661"]]),Te={class:"mb-3"},Le=["for"],Re={key:0,class:"text-danger"},Ge={key:0,class:"form-text text-muted d-block"},We=["id","value","disabled","min","max","placeholder"],$e={key:1,class:"invalid-feedback d-block"},Je=x(a({__name:"FormDatetime",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup:function(e,l){var t=l.emit,a=e,n=t;function o(e){if(!e)return"";var l;if(l="string"==typeof e?new Date(e):e,isNaN(l.getTime()))return"";var t=l.getFullYear(),a=String(l.getMonth()+1).padStart(2,"0"),n=String(l.getDate()).padStart(2,"0"),o=String(l.getHours()).padStart(2,"0"),i=String(l.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(n,"T").concat(o,":").concat(i)}function i(e){var l=e.target.value;n("update:modelValue",l?new Date(l):null),a.field.onInputCallback&&a.field.onInputCallback(l?new Date(l):null)}return function(e,l){return f(),c("div",Te,[s("label",{for:e.field.name,class:"form-label"},[p(v(e.field.label)+" ",1),e.field.required?(f(),c("span",Re," * ")):m("",!0)],8,Le),e.field.hint?(f(),c("small",Ge,v(e.field.hint),1)):m("",!0),s("input",{id:e.field.name,type:"datetime-local",class:g(["form-control",{"is-invalid":e.field.error}]),value:o(e.modelValue),onInput:i,disabled:e.field.disabled,min:e.field.minDate,max:e.field.maxDate,placeholder:e.field.placeholder},null,42,We),e.field.error?(f(),c("div",$e,v(e.field.error),1)):m("",!0)])}}}),[["__scopeId","data-v-57587624"]]),He=["aria-labelledby","aria-hidden"],Ke={class:"modal-content"},Qe={class:"modal-header"},Ye={class:"modal-title"},Xe={class:"modal-body"},Ze={class:"container-fluid"},el={class:"row"},ll={key:0,class:"text-danger"},tl={class:"modal-footer"};e("J",x(a({__name:"JsonFormModal",props:{myModal:{},modelValue:{}},emits:["update:modelValue","submit","cancel"],setup:function(e,l){var a=l.expose,n=l.emit,o=e,d=n,u=r(""),p=r(!1),b=r([]);function k(e,l){e.onInputCallback&&e.onInputCallback(l),e.error="",u.value=""}V((function(){p.value=o.myModal.staticBackdrop})),I((function(){var e=[];o.myModal.fieldGroups.forEach((function(l){l.fields.forEach((function(l){e.push(l.modelId)}))}));var l=e.filter((function(e,l,t){return t.indexOf(e)!==l}));if(l.length>0)throw new Error("Duplicate field modelIds: ".concat(i(new Set(l)).join(", ")));b.value=o.myModal.fieldGroups.map((function(e){return t(t({},e),{},{fields:e.fields.map((function(e){return t({},e)}))})})),o.myModal.fieldGroups.forEach((function(e){e.fields.forEach((function(e){if(!(e.modelId in o.modelValue))switch(e.type){case"checkbox":o.modelValue[e.modelId]=[];break;case"file":case"datetime":o.modelValue[e.modelId]=null;break;default:o.modelValue[e.modelId]=""}void 0===e.required&&(e.required=!0),"inline"in e&&void 0===e.inline&&(e.inline=!0),void 0===e.disabled&&(e.disabled=!1),e.name||(e.name=e.modelId),void 0===e.placeholder&&(e.placeholder=e.label||""),"rows"in e&&void 0===e.rows&&(e.rows=12)}))}))}));var x=function(e){e.target===e.currentTarget&&(o.myModal.staticBackdrop?(p.value=!0,setTimeout((function(){p.value=!1}),150)):d("cancel"))};function S(){u.value="";var e=[];if(b.value.forEach((function(l){l.fields.forEach((function(l){l.error="";var t=o.modelValue[l.modelId];if(l.required&&function(e){return null==e||"string"==typeof e&&""===e.trim()||Array.isArray(e)&&0===e.length}(t)&&(l.error="請填寫"+l.label+" ! \n",e.push(l)),l.onSubmitCheckCallback){var a=l.onSubmitCheckCallback(t,o.modelValue);a&&(l.error+=a+"\n",u.value+=a+"\n")}}))})),e.length>0)return u.value="請填寫所有必填欄位",void console.warn("Missing fields:",e.map((function(e){return e.modelId})));""===u.value?(d("update:modelValue",o.modelValue),d("submit",o.modelValue)):console.warn("Error fields:",u.value)}return a({clearFieldError:function(e){b.value.forEach((function(l){l.fields.forEach((function(l){l.modelId===e&&(l.error="",b.value.some((function(l){return l.fields.some((function(l){return l.modelId!==e&&l.error}))}))||(u.value=""))}))}))}}),function(e,l){return o.myModal.showModal?(f(),c("div",{key:0,class:g(["modal show d-block",{"static-backdrop-animation":p.value}]),tabindex:"-1","aria-labelledby":o.myModal.modalId,"aria-hidden":!o.myModal.showModal,onClick:x},[s("div",{class:g(["modal-dialog",[e.myModal.size,e.myModal.scrollable?"modal-dialog-scrollable":""]])},[s("div",Ke,[s("form",{onSubmit:C(S,["prevent"])},[s("div",Qe,[s("h5",Ye,v(e.myModal.title),1),s("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=function(l){return e.$emit("cancel")})})]),s("div",Xe,[s("div",Ze,[s("div",el,[(f(!0),c(y,null,h(b.value,(function(e){return f(),c("div",{key:e.title||"default",class:g(e.gridClass)},[(f(!0),c(y,null,h(e.fields,(function(e){return f(),c("div",{key:e.modelId},["text"===e.type?(f(),w(F,{key:0,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"textarea"===e.type?(f(),w(me,{key:1,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"select"===e.type?(f(),w(R,{key:2,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"checkbox"===e.type?(f(),w(Y,{key:3,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"radio"===e.type?(f(),w(ie,{key:4,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"file"===e.type?(f(),w(Ne,{key:5,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):"datetime"===e.type?(f(),w(Je,{key:6,field:e,modelValue:o.modelValue[e.modelId],"onUpdate:modelValue":[function(l){return o.modelValue[e.modelId]=l},function(l){return k(e,l)}]},null,8,["field","modelValue","onUpdate:modelValue"])):m("",!0)])})),128)),l[2]||(l[2]=s("hr",null,null,-1))],2)})),128))]),u.value?(f(),c("div",ll,v(u.value),1)):m("",!0)])]),s("div",tl,[s("button",{class:"btn btn-esun-outline",onClick:l[1]||(l[1]=C((function(l){return e.$emit("cancel")}),["prevent"]))},"取消"),l[3]||(l[3]=s("button",{type:"submit",class:"btn btn-esun-primary"},"確定",-1))])],32)])],2)],10,He)):m("",!0)}}}),[["__scopeId","data-v-00c26f72"]]))}}}))}();
//# sourceMappingURL=JsonFormModal-legacy-DObr9vyI.js.map
