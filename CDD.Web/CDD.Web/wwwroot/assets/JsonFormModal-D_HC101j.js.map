{"version":3,"file":"JsonFormModal-D_HC101j.js","sources":["../../src/components/modal/JsonFormModal/FormInput.vue","../../src/components/modal/JsonFormModal/FormSelect.vue","../../src/components/modal/JsonFormModal/FormCheckbox.vue","../../src/components/modal/JsonFormModal/FormRadioGroup.vue","../../src/components/modal/JsonFormModal/FormTextarea.vue","../../src/components/modal/JsonFormModal/FormFile.vue","../../src/components/modal/JsonFormModal/FormDatetime.vue","../../src/components/modal/JsonFormModal/JsonFormModal.vue"],"sourcesContent":["<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.modelId\" class=\"form-label\"\r\n            >{{ field.label }} <span v-if=\"field.required === true\" class=\"text-danger\"> * </span></label\r\n        >\r\n\r\n        <div class=\"input-group\">\r\n            <input\r\n                class=\"form-control\"\r\n                autocomplete=\"off\"\r\n                :id=\"field.modelId\"\r\n                :name=\"field.name || field.modelId\"\r\n                :type=\"field.type || 'text'\"\r\n                :placeholder=\"field.placeholder || ''\"\r\n                :disabled=\"field.disabled\"\r\n                :readonly=\"field.readonly\"\r\n                :maxlength=\"field.maxlength\"\r\n                :value=\"inputValue\"\r\n                @input=\"handleInput\"\r\n                @change=\"handleChange\"\r\n                @click=\"handleClick\"\r\n                :style=\"field.readonly && field.onClickCallback ? 'cursor: pointer;' : ''\"\r\n            />\r\n            <button\r\n                v-if=\"showClearButton\"\r\n                type=\"button\"\r\n                class=\"btn btn-esun-outline\"\r\n                @click=\"clearInput\"\r\n                :title=\"'清除 ' + field.label\"\r\n            >\r\n                <i class=\"bi bi-x-lg\"></i>\r\n            </button>\r\n        </div>\r\n        <small v-if=\"field.hint\" class=\"form-text text-muted\">{{ field.hint }}</small>\r\n        <div v-if=\"field.error\" style=\"white-space: pre\" class=\"alert_text text-danger\">{{ field.error }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, watch, computed } from 'vue';\r\nimport type { TextField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: TextField;\r\n    modelValue: string | null;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: string): void;\r\n}>();\r\n\r\nconst inputValue = ref(props.modelValue ?? '');\r\n\r\n// 計算是否顯示清除按鈕\r\nconst showClearButton = computed(() => {\r\n    if (props.field.readonly && props.field.onClickCallback) {\r\n        return true;\r\n    }\r\n    return false;\r\n});\r\n\r\nwatch(\r\n    () => props.modelValue,\r\n    (newVal) => {\r\n        inputValue.value = newVal ?? '';\r\n    }\r\n);\r\n\r\nfunction handleInput(e: Event) {\r\n    const inputVal = (e.target as HTMLInputElement).value;\r\n    const callback = props.field.onInputCallback;\r\n    let val = inputVal;\r\n    if (callback) {\r\n        const ret = callback(inputVal);\r\n        if (typeof ret === 'string') {\r\n            val = ret;\r\n        }\r\n    }\r\n    (e.target as HTMLInputElement).value = val;\r\n    inputValue.value = val;\r\n    emit('update:modelValue', val);\r\n}\r\n\r\nfunction handleChange(e: Event) {\r\n    const val = (e.target as HTMLInputElement).value;\r\n    props.field.onChangeCallback?.(val);\r\n}\r\n\r\nfunction handleClick() {\r\n    if (props.field.readonly && props.field.onClickCallback) {\r\n        props.field.onClickCallback();\r\n    }\r\n}\r\n\r\n// 清除輸入框內容\r\nfunction clearInput() {\r\n    inputValue.value = '';\r\n    emit('update:modelValue', '');\r\n    //\r\n    props.field.onClearInput?.();\r\n    // 如果有 onChangeCallback，也觸發它\r\n    props.field.onChangeCallback?.('');\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.modelId\" class=\"form-label\"\r\n            >{{ field.label }} <span v-if=\"field.required === true\" class=\"text-danger\"> * </span></label\r\n        >\r\n        <select\r\n            :id=\"field.modelId\"\r\n            class=\"form-select\"\r\n            :disabled=\"field.disabled\"\r\n            :value=\"modelValue\"\r\n            @change=\"handleChange\"\r\n        >\r\n            <option v-if=\"field.placeholder\" disabled value=\"\">\r\n                {{ field.placeholder }}\r\n            </option>\r\n            <option\r\n                v-for=\"(option, index) in field.options\"\r\n                :key=\"index\"\r\n                :value=\"option.value\"\r\n                :disabled=\"option.disabled\"\r\n                :title=\"option.tooltip\"\r\n            >\r\n                {{ option.label }}\r\n            </option>\r\n        </select>\r\n        <small v-if=\"field.hint\" class=\"form-text text-muted\">{{ field.hint }}</small>\r\n        <div v-if=\"field.error\" style=\"white-space: pre\" class=\"alert_text text-danger\">{{ field.error }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { SelectField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: SelectField;\r\n    modelValue: string;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: string): void;\r\n}>();\r\n\r\nfunction handleChange(e: Event) {\r\n    const val = (e.target as HTMLSelectElement).value;\r\n    emit('update:modelValue', val);\r\n    props.field.onChangeCallback?.(val);\r\n    props.field.onInputCallback?.(val);\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label class=\"form-label\"\r\n            >{{ field.label }} <span v-if=\"field.required === true\" class=\"text-danger\"> * </span></label\r\n        >\r\n\r\n        <div>\r\n            <div\r\n                v-for=\"(option, index) in field.options\"\r\n                :key=\"index\"\r\n                :class=\"['form-check', field.inline ? 'form-check-inline' : '']\"\r\n            >\r\n                <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    :id=\"`${field.modelId}_${option.value}`\"\r\n                    :name=\"field.name || field.modelId\"\r\n                    :value=\"option.value\"\r\n                    :disabled=\"field.disabled || option.disabled\"\r\n                    :title=\"option.tooltip\"\r\n                    :checked=\"modelValue.includes(String(option.value))\"\r\n                    @change=\"(e) => handleChange(e, String(option.value))\"\r\n                />\r\n                <label class=\"form-check-label\" :for=\"`${field.modelId}_${option.value}`\">\r\n                    {{ option.label }}\r\n                </label>\r\n                <small v-if=\"option.hint\" class=\"form-text text-muted ms-2\">{{ option.hint }}</small>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"field.error\" style=\"white-space: pre\" class=\"alert_text text-danger\">{{ field.error }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { CheckboxField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: CheckboxField;\r\n    modelValue: string[];\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: string[]): void;\r\n}>();\r\n\r\nfunction handleChange(e: Event, optionValue: string) {\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n    const newValue = [...props.modelValue];\r\n\r\n    if (checked && !newValue.includes(optionValue)) {\r\n        newValue.push(optionValue);\r\n    } else if (!checked && newValue.includes(optionValue)) {\r\n        const index = newValue.indexOf(optionValue);\r\n        newValue.splice(index, 1);\r\n    }\r\n\r\n    emit('update:modelValue', newValue);\r\n\r\n    props.field.onChangeCallback?.(newValue);\r\n    props.field.onInputCallback?.(newValue);\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.modelId\" class=\"form-label\"\r\n            >{{ field.label }} <span v-if=\"field.required === true\" class=\"text-danger\"> * </span></label\r\n        >\r\n        <small v-if=\"field.hint\" class=\"form-text text-muted\">{{ field.hint }}</small>\r\n        <div>\r\n            <div\r\n                v-for=\"(option, index) in field.options\"\r\n                :key=\"index\"\r\n                :class=\"['form-check', field.inline ? 'form-check-inline' : '']\"\r\n            >\r\n                <input\r\n                    class=\"form-check-input\"\r\n                    autocomplete=\"off\"\r\n                    type=\"radio\"\r\n                    :id=\"`${field.modelId}_${option.value}`\"\r\n                    :name=\"field.name || field.modelId\"\r\n                    :value=\"option.value\"\r\n                    :disabled=\"field.disabled || option.disabled\"\r\n                    :checked=\"String(modelValue) === String(option.value)\"\r\n                    @change=\"handleChange\"\r\n                />\r\n                <label class=\"form-check-label\" :for=\"`${field.modelId}_${option.value}`\">\r\n                    {{ option.label }}\r\n                </label>\r\n                <small v-if=\"option.hint\" class=\"form-text text-muted ms-2\">{{ option.hint }}</small>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"field.error\" style=\"white-space: pre\" class=\"alert_text text-danger\">{{ field.error }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport type { RadioField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: RadioField;\r\n    modelValue: string | boolean | number | null;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: string | boolean | number): void;\r\n}>();\r\n\r\nfunction handleChange(e: Event) {\r\n    const inputVal = (e.target as HTMLInputElement).value;\r\n    \r\n    // 根據原始 modelValue 的類型來轉換值\r\n    let val: string | boolean | number = inputVal;\r\n    \r\n    if (typeof props.modelValue === 'boolean') {\r\n        val = inputVal === 'true';\r\n    } else if (typeof props.modelValue === 'number') {\r\n        val = Number(inputVal);\r\n    }\r\n    \r\n    if (String(val) !== String(props.modelValue)) {\r\n        emit('update:modelValue', val);\r\n        props.field.onChangeCallback?.(val);\r\n        props.field.onInputCallback?.(val);\r\n    }\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.modelId\" class=\"form-label\"\r\n            >{{ field.label }} <span v-if=\"field.required === true\" class=\"text-danger\"> * </span></label\r\n        >\r\n        <small v-if=\"field.hint\" class=\"form-text text-muted\">{{ field.hint }}</small>\r\n        <textarea\r\n            :id=\"field.modelId\"\r\n            class=\"form-control\"\r\n            :placeholder=\"field.placeholder\"\r\n            :rows=\"field.rows\"\r\n            :maxlength=\"field.maxlength\"\r\n            :disabled=\"field.disabled\"\r\n            :value=\"modelValue\"\r\n            @input=\"handleInput\"\r\n            @change=\"handleChange\"\r\n        />\r\n        <div v-if=\"field.error\" style=\"white-space: pre\" class=\"alert_text text-danger\">{{ field.error }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { TextareaField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: TextareaField;\r\n    modelValue: string;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: string): void;\r\n}>();\r\n\r\nfunction handleInput(e: Event) {\r\n    const inputVal = (e.target as HTMLTextAreaElement).value;\r\n    const callback = props.field.onInputCallback;\r\n    let val = inputVal;\r\n    if (callback) {\r\n        const ret = callback(inputVal);\r\n        if (typeof ret === 'string') {\r\n            val = ret;\r\n        }\r\n    }\r\n    (e.target as HTMLTextAreaElement).value = val;\r\n    emit('update:modelValue', val);\r\n}\r\n\r\nfunction handleChange(e: Event) {\r\n    const val = (e.target as HTMLTextAreaElement).value;\r\n    props.field.onChangeCallback?.(val);\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.name\" class=\"form-label\">\r\n            {{ field.label }}\r\n            <span v-if=\"field.required\" class=\"text-danger\">*</span>\r\n        </label>\r\n\r\n        <input\r\n            :id=\"field.name\"\r\n            :name=\"field.name\"\r\n            type=\"file\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': field.error }\"\r\n            :accept=\"field.accept\"\r\n            :multiple=\"field.multiple\"\r\n            :disabled=\"field.disabled\"\r\n            @change=\"handleFileChange\"\r\n            ref=\"fileInputRef\"\r\n        />\r\n\r\n        <!-- 顯示檔案資訊 -->\r\n        <div v-if=\"selectedFiles.length > 0\" class=\"mt-2\">\r\n            <small class=\"text-muted\">已選取的檔案：</small>\r\n            <ul class=\"list-unstyled\">\r\n                <li\r\n                    v-for=\"(file, index) in selectedFiles\"\r\n                    :key=\"index\"\r\n                    class=\"d-flex justify-content-between align-items-center\"\r\n                >\r\n                    <span class=\"text-truncate\"> {{ file.name }} ({{ formatFileSize(file.size) }}) </span>\r\n                    <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-sm btn-esun-outline-danger ms-2\"\r\n                        @click=\"removeFile(index)\"\r\n                        :disabled=\"field.disabled\"\r\n                    >\r\n                        ×\r\n                    </button>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <!-- 圖片預覽區塊 -->\r\n        <div v-if=\"imagePreviewUrls.length > 0\" class=\"mt-3\">\r\n            <small class=\"text-muted\">圖片預覽：</small>\r\n            <div class=\"row g-2 mt-1\">\r\n                <div v-for=\"(preview, index) in imagePreviewUrls\" :key=\"index\" class=\"col-6 col-md-4 col-lg-3\">\r\n                    <div class=\"position-relative\">\r\n                        <img\r\n                            :src=\"preview.url\"\r\n                            :alt=\"preview.fileName\"\r\n                            class=\"img-thumbnail w-100 preview-image\"\r\n                            @click=\"openImageModal(preview)\"\r\n                        />\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-sm btn-danger position-absolute top-0 end-0 rounded-circle\"\r\n                            style=\"width: 24px; height: 24px; padding: 0; transform: translate(50%, -50%)\"\r\n                            @click=\"removeFile(preview.index)\"\r\n                            :disabled=\"field.disabled\"\r\n                            title=\"移除圖片\"\r\n                        >\r\n                            ×\r\n                        </button>\r\n                    </div>\r\n                    <small class=\"text-muted d-block text-truncate mt-1\">{{ preview.fileName }}</small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 圖片放大模態框 -->\r\n        <div\r\n            v-if=\"showImageModal\"\r\n            class=\"modal show d-block\"\r\n            tabindex=\"-1\"\r\n            @click=\"closeImageModal\"\r\n            style=\"background-color: rgba(0, 0, 0, 0.8)\"\r\n        >\r\n            <div class=\"modal-dialog modal-lg modal-dialog-centered\">\r\n                <div class=\"modal-content bg-transparent border-0\">\r\n                    <div class=\"modal-header border-0 pb-0\">\r\n                        <h5 class=\"modal-title text-white\">{{ selectedImage?.fileName }}</h5>\r\n                        <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeImageModal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body text-center\">\r\n                        <img\r\n                            v-if=\"selectedImage\"\r\n                            :src=\"selectedImage.url\"\r\n                            :alt=\"selectedImage.fileName\"\r\n                            class=\"img-fluid\"\r\n                            style=\"max-height: 70vh\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 檔案限制說明 -->\r\n        <div v-if=\"field.hint || field.accept || field.maxSize\" class=\"form-text\">\r\n            <div v-if=\"field.hint\">{{ field.hint }}</div>\r\n            <div v-if=\"field.accept\">允許的檔案格式: {{ field.accept }}</div>\r\n            <div v-if=\"field.maxSize\">檔案大小限制: {{ formatFileSize(field.maxSize) }}</div>\r\n            <div v-if=\"field.maxFiles\">最多可上傳 {{ field.maxFiles }} 個檔案</div>\r\n        </div>\r\n\r\n        <!-- 錯誤訊息 -->\r\n        <div v-if=\"field.error\" class=\"invalid-feedback d-block\">\r\n            {{ field.error }}\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch, onUnmounted } from 'vue';\r\nimport type { FileField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: FileField;\r\n    modelValue: File[] | File | null;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: File[] | File | null): void;\r\n}>();\r\n\r\nconst fileInputRef = ref<HTMLInputElement>();\r\nconst selectedFiles = ref<File[]>([]);\r\n\r\n// 圖片預覽相關\r\ninterface ImagePreview {\r\n    url: string;\r\n    fileName: string;\r\n    index: number;\r\n}\r\n\r\nconst imagePreviewUrls = ref<ImagePreview[]>([]);\r\nconst showImageModal = ref(false);\r\nconst selectedImage = ref<ImagePreview | null>(null);\r\n\r\n// 初始化已選擇的檔案\r\nwatch(\r\n    () => props.modelValue,\r\n    (newValue) => {\r\n        if (newValue) {\r\n            if (Array.isArray(newValue)) {\r\n                selectedFiles.value = [...newValue];\r\n            } else {\r\n                selectedFiles.value = [newValue];\r\n            }\r\n        } else {\r\n            selectedFiles.value = [];\r\n        }\r\n        updateImagePreviews();\r\n    },\r\n    { immediate: true }\r\n);\r\n\r\n// 監聽檔案變化以更新圖片預覽\r\nwatch(\r\n    () => selectedFiles.value,\r\n    () => {\r\n        updateImagePreviews();\r\n    },\r\n    { deep: true }\r\n);\r\n\r\n// 處理檔案選擇\r\nfunction handleFileChange(event: Event) {\r\n    const target = event.target as HTMLInputElement;\r\n    const files = Array.from(target.files || []);\r\n\r\n    // 驗證檔案\r\n    const validFiles = validateFiles(files);\r\n\r\n    if (validFiles.length > 0) {\r\n        if (props.field.multiple) {\r\n            // 多檔案模式：替換所有檔案或添加到現有檔案\r\n            selectedFiles.value = validFiles;\r\n            emit('update:modelValue', validFiles);\r\n        } else {\r\n            // 單檔案模式：只取第一個檔案\r\n            selectedFiles.value = [validFiles[0]];\r\n            emit('update:modelValue', validFiles[0]);\r\n        }\r\n    }\r\n\r\n    // 重置 input 以允許重複選擇相同檔案\r\n    if (fileInputRef.value) {\r\n        fileInputRef.value.value = '';\r\n    }\r\n}\r\n\r\n// 驗證檔案\r\nfunction validateFiles(files: File[]): File[] {\r\n    const validFiles: File[] = [];\r\n    let errorMessages: string[] = [];\r\n\r\n    for (const file of files) {\r\n        // 檢查檔案大小\r\n        if (props.field.maxSize && file.size > props.field.maxSize) {\r\n            errorMessages.push(`檔案 \"${file.name}\" 超過大小限制 ${formatFileSize(props.field.maxSize)}`);\r\n            continue;\r\n        }\r\n\r\n        // 檢查檔案格式\r\n        if (props.field.accept && !validateFileType(file, props.field.accept)) {\r\n            errorMessages.push(`檔案 \"${file.name}\" 格式不符合要求`);\r\n            continue;\r\n        }\r\n\r\n        validFiles.push(file);\r\n    }\r\n\r\n    // 檢查檔案數量限制\r\n    const totalFiles = selectedFiles.value.length + validFiles.length;\r\n    if (props.field.maxFiles && totalFiles > props.field.maxFiles) {\r\n        errorMessages.push(`最多只能上傳 ${props.field.maxFiles} 個檔案`);\r\n        return [];\r\n    }\r\n\r\n    // 設置錯誤訊息\r\n    if (errorMessages.length > 0) {\r\n        props.field.error = errorMessages.join(', ');\r\n    } else {\r\n        props.field.error = '';\r\n    }\r\n\r\n    return validFiles;\r\n}\r\n\r\n// 驗證檔案類型\r\nfunction validateFileType(file: File, accept: string): boolean {\r\n    const acceptTypes = accept.split(',').map((type) => type.trim());\r\n\r\n    for (const acceptType of acceptTypes) {\r\n        if (acceptType.startsWith('.')) {\r\n            // 檔案副檔名檢查\r\n            if (file.name.toLowerCase().endsWith(acceptType.toLowerCase())) {\r\n                return true;\r\n            }\r\n        } else if (acceptType.includes('*')) {\r\n            // MIME 類型萬用字元檢查 (例如: image/*)\r\n            const [mainType] = acceptType.split('/');\r\n            if (file.type.startsWith(mainType)) {\r\n                return true;\r\n            }\r\n        } else {\r\n            // 完整 MIME 類型檢查\r\n            if (file.type === acceptType) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n// 移除檔案\r\nfunction removeFile(index: number) {\r\n    selectedFiles.value.splice(index, 1);\r\n\r\n    if (props.field.multiple) {\r\n        emit('update:modelValue', selectedFiles.value.length > 0 ? selectedFiles.value : null);\r\n    } else {\r\n        emit('update:modelValue', null);\r\n    }\r\n}\r\n\r\n// 判斷是否為圖片檔案\r\nfunction IsImageFile(file: File): boolean {\r\n    return file.type.startsWith('image/');\r\n}\r\n\r\n// 更新圖片預覽\r\nfunction updateImagePreviews() {\r\n    // 清除舊的預覽 URL\r\n    imagePreviewUrls.value.forEach((preview) => {\r\n        URL.revokeObjectURL(preview.url);\r\n    });\r\n    imagePreviewUrls.value = [];\r\n\r\n    // 生成新的預覽 URL\r\n    selectedFiles.value.forEach((file, index) => {\r\n        if (IsImageFile(file)) {\r\n            const url = URL.createObjectURL(file);\r\n            imagePreviewUrls.value.push({\r\n                url,\r\n                fileName: file.name,\r\n                index\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n// 開啟圖片模態框\r\nfunction openImageModal(preview: ImagePreview) {\r\n    selectedImage.value = preview;\r\n    showImageModal.value = true;\r\n}\r\n\r\n// 關閉圖片模態框\r\nfunction closeImageModal() {\r\n    showImageModal.value = false;\r\n    selectedImage.value = null;\r\n}\r\n\r\n// 清理資源\r\nonUnmounted(() => {\r\n    imagePreviewUrls.value.forEach((preview) => {\r\n        URL.revokeObjectURL(preview.url);\r\n    });\r\n});\r\n\r\n// 格式化檔案大小\r\nfunction formatFileSize(bytes: number): string {\r\n    if (bytes === 0) return '0 B';\r\n\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text-truncate {\r\n    max-width: 300px;\r\n}\r\n\r\n.preview-image {\r\n    height: 120px;\r\n    object-fit: cover;\r\n    cursor: pointer;\r\n    transition: transform 0.2s ease;\r\n}\r\n\r\n.preview-image:hover {\r\n    transform: scale(1.02);\r\n}\r\n\r\n.modal {\r\n    z-index: 1060;\r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"mb-3\">\r\n        <label :for=\"field.name\" class=\"form-label\">\r\n            {{ field.label }}\r\n            <span v-if=\"field.required\" class=\"text-danger\"> * </span>\r\n        </label>\r\n        <small v-if=\"field.hint\" class=\"form-text text-muted d-block\">{{ field.hint }}</small>\r\n\r\n        <input\r\n            :id=\"field.name\"\r\n            type=\"datetime-local\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': field.error }\"\r\n            :value=\"formatDatetimeForInput(modelValue)\"\r\n            @input=\"handleDateChange\"\r\n            :disabled=\"field.disabled\"\r\n            :min=\"field.minDate\"\r\n            :max=\"field.maxDate\"\r\n            :placeholder=\"field.placeholder\"\r\n        />\r\n\r\n        <!-- 錯誤訊息 -->\r\n        <div v-if=\"field.error\" class=\"invalid-feedback d-block\">\r\n            {{ field.error }}\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed } from 'vue';\r\nimport type { DatetimeField } from './schema';\r\n\r\nconst props = defineProps<{\r\n    field: DatetimeField;\r\n    modelValue: any;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', value: any): void;\r\n}>();\r\n\r\n// 格式化日期時間為 input 所需的格式\r\nfunction formatDatetimeForInput(dateValue: string | Date | null | undefined): string {\r\n    if (!dateValue) return '';\r\n\r\n    let date: Date;\r\n    if (typeof dateValue === 'string') {\r\n        date = new Date(dateValue);\r\n    } else {\r\n        date = dateValue;\r\n    }\r\n\r\n    if (isNaN(date.getTime())) return '';\r\n\r\n    // 格式化為 YYYY-MM-DDTHH:MM\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const hours = String(date.getHours()).padStart(2, '0');\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n    return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n}\r\n\r\n// 處理日期變更\r\nfunction handleDateChange(event: Event) {\r\n    const target = event.target as HTMLInputElement;\r\n    const value = target.value;\r\n\r\n    emit('update:modelValue', value ? new Date(value) : null);\r\n\r\n    if (props.field.onInputCallback) {\r\n        props.field.onInputCallback(value ? new Date(value) : null);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.is-invalid {\r\n    border-color: #dc3545;\r\n}\r\n\r\n.invalid-feedback {\r\n    color: #dc3545;\r\n    font-size: 0.875rem;\r\n    margin-top: 0.25rem;\r\n}\r\n</style>\r\n","<template>\r\n    <div\r\n        v-if=\"props.myModal.showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        :aria-labelledby=\"props.myModal.modalId\"\r\n        :aria-hidden=\"!props.myModal.showModal\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': animateBackdrop }\"\r\n    >\r\n        <div class=\"modal-dialog\" :class=\"[myModal.size, myModal.scrollable ? 'modal-dialog-scrollable' : '']\">\r\n            <div class=\"modal-content\">\r\n                <form @submit.prevent=\"handleSubmit\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">{{ myModal.title }}</h5>\r\n                        <button type=\"button\" class=\"btn-close\" @click=\"$emit('cancel')\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"container-fluid\">\r\n                            <div class=\"row\">\r\n                                <div\r\n                                    v-for=\"group in reactiveSchema\"\r\n                                    :key=\"group.title || 'default'\"\r\n                                    :class=\"group.gridClass\"\r\n                                >\r\n                                    <div v-for=\"field in group.fields\" :key=\"field.modelId\">\r\n                                        <FormInput\r\n                                            v-if=\"field.type === 'text'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormTextarea\r\n                                            v-else-if=\"field.type === 'textarea'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormSelect\r\n                                            v-else-if=\"field.type === 'select'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormCheckbox\r\n                                            v-else-if=\"field.type === 'checkbox'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormRadioGroup\r\n                                            v-else-if=\"field.type === 'radio'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormFile\r\n                                            v-else-if=\"field.type === 'file'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                        <FormDatetime\r\n                                            v-else-if=\"field.type === 'datetime'\"\r\n                                            :field=\"field\"\r\n                                            v-model=\"props.modelValue[field.modelId]\"\r\n                                            @update:modelValue=\"(val) => handleInput(field, val)\"\r\n                                        />\r\n                                    </div>\r\n                                    <hr />\r\n                                </div>\r\n                            </div>\r\n                            <div v-if=\"error\" class=\"text-danger\">{{ error }}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button class=\"btn btn-esun-outline\" @click.prevent=\"$emit('cancel')\">取消</button>\r\n                        <button type=\"submit\" class=\"btn btn-esun-primary\">確定</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, watchEffect, onMounted, computed } from 'vue';\r\nimport type { Field, FieldsGridGroup, MyModal } from './schema';\r\nimport FormInput from './FormInput.vue';\r\nimport FormSelect from './FormSelect.vue';\r\nimport FormCheckbox from './FormCheckbox.vue';\r\nimport FormRadioGroup from './FormRadioGroup.vue';\r\nimport FormTextarea from './FormTextarea.vue';\r\nimport FormFile from './FormFile.vue';\r\nimport FormDatetime from './FormDatetime.vue';\r\n\r\nconst props = defineProps<{\r\n    myModal: MyModal;\r\n    modelValue: Record<string, any>;\r\n}>();\r\nconst emit = defineEmits<{\r\n    (e: 'update:modelValue', payload: Record<string, any>): void;\r\n    (e: 'submit', payload: Record<string, any>): void;\r\n    (e: 'cancel'): void;\r\n}>();\r\n\r\nconst error = ref('');\r\nconst animateBackdrop = ref(false);\r\nconst reactiveSchema = ref<FieldsGridGroup[]>([]);\r\n\r\nwatchEffect(() => {\r\n    animateBackdrop.value = props.myModal.staticBackdrop;\r\n});\r\n\r\nonMounted(() => {\r\n    // 檢查 modelId 重複\r\n    const modelIds: string[] = [];\r\n    props.myModal.fieldGroups.forEach((group) => {\r\n        group.fields.forEach((field) => {\r\n            modelIds.push(field.modelId);\r\n        });\r\n    });\r\n    const duplicates = modelIds.filter((id, idx, arr) => arr.indexOf(id) !== idx);\r\n    if (duplicates.length > 0) {\r\n        throw new Error(`Duplicate field modelIds: ${[...new Set(duplicates)].join(', ')}`);\r\n    }\r\n\r\n    // 建立 reactiveSchema（保留 callback）\r\n    reactiveSchema.value = props.myModal.fieldGroups.map((group) => ({\r\n        ...group,\r\n        fields: group.fields.map((field) => ({\r\n            ...field\r\n        }))\r\n    }));\r\n\r\n    // 初始化 modelValue 欄位（若尚未填值）\r\n    props.myModal.fieldGroups.forEach((group) => {\r\n        group.fields.forEach((field) => {\r\n            if (!(field.modelId in props.modelValue)) {\r\n                switch (field.type) {\r\n                    case 'checkbox':\r\n                        props.modelValue[field.modelId] = [];\r\n                        break;\r\n                    case 'file':\r\n                        props.modelValue[field.modelId] = null;\r\n                        break;\r\n                    case 'datetime':\r\n                        props.modelValue[field.modelId] = null;\r\n                        break;\r\n                    default:\r\n                        props.modelValue[field.modelId] = '';\r\n                }\r\n            }\r\n\r\n            // 欄位屬性預設值\r\n            if (field.required === undefined) {\r\n                field.required = true;\r\n            }\r\n            if ('inline' in field && (field as any).inline === undefined) {\r\n                (field as any).inline = true;\r\n            }\r\n            if (field.disabled === undefined) {\r\n                field.disabled = false;\r\n            }\r\n            if (!field.name) {\r\n                field.name = field.modelId;\r\n            }\r\n            if (field.placeholder === undefined) {\r\n                field.placeholder = field.label || '';\r\n            }\r\n            if ('rows' in field && (field as any).rows === undefined) {\r\n                (field as any).rows = 12;\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n// 當輸入時觸發 input callback\r\nfunction handleInput(field: Field, val: any) {\r\n    if (field.onInputCallback) {\r\n        field.onInputCallback(val);\r\n    }\r\n\r\n    // 清除該欄錯誤（如果有）\r\n    field.error = '';\r\n    error.value = '';\r\n}\r\n\r\n// 清除特定欄位的錯誤訊息\r\nfunction clearFieldError(fieldModelId: string) {\r\n    reactiveSchema.value.forEach((group) => {\r\n        group.fields.forEach((field) => {\r\n            if (field.modelId === fieldModelId) {\r\n                field.error = '';\r\n                // 如果這是最後一個有錯誤的欄位，也清除全域錯誤\r\n                const hasOtherErrors = reactiveSchema.value.some((g) =>\r\n                    g.fields.some((f) => f.modelId !== fieldModelId && f.error)\r\n                );\r\n                if (!hasOtherErrors) {\r\n                    error.value = '';\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// 背景點擊邏輯\r\nconst handleBackgroundClick = (event: MouseEvent) => {\r\n    if (event.target === event.currentTarget) {\r\n        if (props.myModal.staticBackdrop) {\r\n            animateBackdrop.value = true;\r\n            setTimeout(() => {\r\n                animateBackdrop.value = false;\r\n            }, 150);\r\n        } else {\r\n            emit('cancel');\r\n        }\r\n    }\r\n};\r\n\r\n// 表單送出驗證\r\nfunction handleSubmit() {\r\n    error.value = '';\r\n    const missing: Field[] = [];\r\n\r\n    reactiveSchema.value.forEach((group) => {\r\n        group.fields.forEach((field) => {\r\n            field.error = '';\r\n            const val = props.modelValue[field.modelId];\r\n            if (field.required && isEmptyValue(val)) {\r\n                field.error = '請填寫' + field.label + ' ! \\n';\r\n                missing.push(field);\r\n            }\r\n\r\n            // 自訂 callback 檢查\r\n            if (field.onSubmitCheckCallback) {\r\n                const err = field.onSubmitCheckCallback(val, props.modelValue);\r\n                if (err) {\r\n                    field.error += err + '\\n';\r\n                    error.value += err + '\\n';\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    if (missing.length > 0) {\r\n        error.value = '請填寫所有必填欄位';\r\n        console.warn(\r\n            'Missing fields:',\r\n            missing.map((f) => f.modelId)\r\n        );\r\n        return;\r\n    } else if (error.value !== '') {\r\n        console.warn('Error fields:', error.value);\r\n        return;\r\n    }\r\n\r\n    emit('update:modelValue', props.modelValue); // 可選\r\n    emit('submit', props.modelValue);\r\n}\r\n\r\nfunction isEmptyValue(val: any) {\r\n    return (\r\n        val === null ||\r\n        val === undefined ||\r\n        (typeof val === 'string' && val.trim() === '') ||\r\n        (Array.isArray(val) && val.length === 0)\r\n    );\r\n}\r\n\r\n// 暴露方法給父組件使用\r\ndefineExpose({\r\n    clearFieldError\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n.modal-dialog-scrollable .modal-body {\r\n    max-height: calc(100vh - 200px);\r\n    overflow-y: auto;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n\r\n.alert_text {\r\n    letter-spacing: 1px;\r\n    line-height: 1.7;\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","inputValue","ref","_a","showClearButton","computed","watch","newVal","handleInput","e","inputVal","callback","val","ret","handleChange","_b","handleClick","clearInput","_d","_c","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","field","_hoisted_3","_hoisted_4","_hoisted_7","_hoisted_8","modelValue","_hoisted_5","_Fragment","option","index","_toDisplayString","_hoisted_6","optionValue","checked","newValue","_hoisted_2","_normalizeClass","fileInputRef","selectedFiles","imagePreviewUrls","showImageModal","selectedImage","updateImagePreviews","handleFileChange","event","target","files","validFiles","validateFiles","errorMessages","file","formatFileSize","validateFileType","totalFiles","accept","acceptTypes","type","acceptType","mainType","removeFile","IsImageFile","preview","url","openImageModal","closeImageModal","onUnmounted","bytes","k","sizes","i","_cache","_renderList","$event","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_26","formatDatetimeForInput","dateValue","date","year","month","day","hours","minutes","handleDateChange","value","error","animateBackdrop","reactiveSchema","watchEffect","onMounted","modelIds","group","duplicates","id","idx","arr","clearFieldError","fieldModelId","g","f","handleBackgroundClick","handleSubmit","missing","isEmptyValue","err","__expose","myModal","$emit","_createBlock","FormInput","FormTextarea","FormSelect","FormCheckbox","FormRadioGroup","FormFile","FormDatetime"],"mappings":"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"}