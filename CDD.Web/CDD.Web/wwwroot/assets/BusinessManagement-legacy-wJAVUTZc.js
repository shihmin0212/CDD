!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function n(t,n,a){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var l=a.call(t,n||"default");if("object"!=e(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function o(n,a,r,s){var o=a&&a.prototype instanceof u?a:u,c=Object.create(o.prototype);return l(c,"_invoke",function(n,a,l){var r,s,o,u=0,c=l||[],d=!1,p={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return r=t,s=0,o=e,p.n=n,i}};function b(n,a){for(s=n,o=a,t=0;!d&&u&&!l&&t<c.length;t++){var l,r=c[t],b=p.p,f=r[2];n>3?(l=f===a)&&(o=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=e):r[0]<=b&&((l=n<2&&b<r[1])?(s=0,p.v=a,p.n=r[1]):b<f&&(l=n<3||r[0]>a||a>f)&&(r[4]=n,r[5]=a,p.n=f,s=0))}if(l||n>1)return i;throw d=!0,a}return function(l,c,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&b(c,f),s=c,o=f;(t=s<2?e:o)||!d;){r||(s?s<3?(s>1&&(p.n=-1),b(s,o)):p.n=o:p.v=o);try{if(u=2,r){if(s||(l="next"),t=r[l]){if(!(t=t.call(r,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=r.return)&&t.call(r),s<2&&(o=TypeError("The iterator does not provide a '"+l+"' method"),s=1);r=e}else if((t=(d=p.n<0)?o:n.call(a,p))!==i)break}catch(t){r=e,s=1,o=t}finally{u=1}}return{value:t,done:d}}}(n,r,s),!0),c}var i={};function u(){}function c(){}function d(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(l(t={},r,(function(){return this})),t),b=d.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e}return c.prototype=d,l(b,"constructor",d),l(d,"constructor",c),c.displayName="GeneratorFunction",l(d,s,"GeneratorFunction"),l(b),l(b,s,"Generator"),l(b,r,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:o,m:f}})()}function l(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}l=function(e,t,n,a){if(t)r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var s=function(t,n){l(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},l(e,t,n,a)}function r(e,t,n,a,l,r,s){try{var o=e[r](s),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(a,l)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,l){var s=e.apply(t,n);function o(e){r(s,a,l,o,i,"next",e)}function i(e){r(s,a,l,o,i,"throw",e)}o(void 0)}))}}System.register(["./index-legacy-DIWtPno0.js","./Pagination.vue_vue_type_script_setup_true_lang-legacy-Ck0czqvf.js","./JsonFormModal-legacy-DObr9vyI.js","./SelectListModal-legacy-BVdlBgix.js"],(function(e,l){"use strict";var r,o,i,u,c,d,p,b,f,m,v,y,g,h,k,w,C,M,x,P,D,S,I,B,A,z,T,j,O,L,_,N,V,E,F;return{setters:[function(e){r=e.m,o=e.d,i=e.s,u=e.Q,c=e.w,d=e.c,p=e.F,b=e.h,f=e.x,m=e.n,v=e.f,y=e.t,g=e.A,h=e.E,k=e.B,w=e.H,C=e.S,M=e.J,x=e.K,P=e.e,D=e._,S=e.r,I=e.b,B=e.y,A=e.g,z=e.v,T=e.k,j=e.R,O=e.T,L=e.z,_=e.D,N=e.l},function(e){V=e._},function(e){E=e.J},function(e){F=e.S}],execute:function(){var l=document.createElement("style");l.textContent=".modal[data-v-0f1e7761]{background-color:rgba(0,0,0,.5)}.modal-dialog[data-v-0f1e7761]{background-color:transparent}.static-backdrop-animation[data-v-0f1e7761]{animation:staticBackdropAnimation-0f1e7761 .15s ease-in-out}.modal-dialog-scrollable .modal-body[data-v-0f1e7761]{max-height:calc(100vh - 200px);overflow-y:auto}@keyframes staticBackdropAnimation-0f1e7761{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.content[data-v-a1c2544c]{margin-left:250px;transition:margin-left .3s}.content.expanded[data-v-a1c2544c]{margin-left:0}.fade-in[data-v-a1c2544c]{opacity:0;transition:opacity .3s ease-in-out}.fade-in.active[data-v-a1c2544c]{opacity:1}\n/*$vite$:1*/",document.head.appendChild(l);var U=function(e){return{modalId:"myModal",title:"新增系統業務別",showModal:!1,size:"modal-xl",staticBackdrop:!0,scrollable:!0,fieldGroups:[{title:"",gridClass:"col-12  ",fields:[{modelId:"business",name:"business",type:"text",label:"業務別名稱",placeholder:"業務別名稱",required:!0,maxlength:25,onInputCallback:function(e){return r(e)}},{modelId:"system",name:"system",type:"select",label:"系統代號",hint:"關聯的系統代號",required:!0,options:null==e?void 0:e.map((function(e){return{label:e.system,value:e.system}}))},{modelId:"isActive",name:"isActive",type:"radio",label:"是否啟用",inline:!0,options:[{label:"啟用",value:"Y"},{label:"停用",value:"N"}],required:!0},{modelId:"isDeleted",name:"isDeleted",type:"radio",label:"是否刪除",inline:!0,options:[{label:"刪除",value:"Y"},{label:"不刪除",value:"N"}],required:!0},{modelId:"token",name:"token",type:"text",label:"業務別的密碼(明碼)",hint:"若留空則系統自動產生32位隨機字串",maxlength:32,required:!1}]}]}},Y=function(e){return{modalId:"myModal",title:"新增系統業務別",showModal:!1,size:"modal-xl",staticBackdrop:!0,scrollable:!0,fieldGroups:[{title:"",gridClass:"col-12  ",fields:[{modelId:"business",name:"business",type:"text",label:"業務別名稱",placeholder:"業務別名稱",required:!0,maxlength:10,onInputCallback:function(e){return r(e)}},{modelId:"system",name:"system",type:"select",label:"系統代號",hint:"關聯的系統代號",required:!0,options:null==e?void 0:e.map((function(e){return{label:e.system,value:e.system}}))},{modelId:"isActive",name:"isActive",type:"radio",label:"是否啟用",inline:!0,options:[{label:"啟用",value:"Y"},{label:"停用",value:"N"}],required:!0},{modelId:"isDeleted",name:"isDeleted",type:"radio",label:"是否刪除",inline:!0,options:[{label:"刪除",value:"Y"},{label:"不刪除",value:"N"}],required:!0},{modelId:"token",name:"token",type:"text",label:"業務別的密碼(明碼)",hint:"若留空則系統自動產生32位隨機字串",maxlength:32,required:!1}]}]}},q=["aria-labelledby","aria-hidden"],G={class:"modal-content"},Q={class:"modal-header"},W={class:"modal-title"},J={class:"modal-body"},R={class:"btn-group me-2 mb-3",role:"group","aria-label":"First group"},$={key:0,class:"text-muted"},H={key:1,class:"d-flex flex-wrap w-100",style:{"min-height":"400px"}},K={class:"card"},X={class:"card-body p-2 d-flex flex-column justify-content-between",style:{height:"100px"}},Z=["title"],ee=["onClick"],te={key:2,style:{"min-height":"400px"}},ne={class:"table table-bordered"},ae=["onClick"],le={class:"modal-footer"},re=o({__name:"BusinessAllowModal",props:{operateBusiness:{},AllBusinessLists:{}},setup:function(e,t){var n=t.expose,l=e,r=i(l.operateBusiness),o=i(D());function D(){return{ModalInstance:{modalId:"AllowData",title:r.value+" 授權業務別管理 ",showModal:!1,size:"modal-xl",staticBackdrop:!0,animateBackdrop:!1},PaginationType:"client",DisplayMode:"table",FullDataList:[],CurrentPageDataList:[],TotalItems:2,CurrentPage:1,PageSize:10}}function S(){return(S=s(a().m((function e(){return a().w((function(e){for(;;)switch(e.n){case 0:return o.value=D(),e.n=1,A();case 1:o.value.ModalInstance.showModal=!0;case 2:return e.a(2)}}),e)})))).apply(this,arguments)}function I(){o.value.ModalInstance.showModal=!1}function B(e){e.target===e.currentTarget&&(o.value.ModalInstance.animateBackdrop=!0,setTimeout((function(){o.value.ModalInstance.animateBackdrop=!1}),150))}u((function(){r.value=l.operateBusiness,o.value.ModalInstance.title=r.value+" 授權業務別管理 "})),c((function(){return{currentPage:o.value.CurrentPage,pageSize:o.value.PageSize}}),(function(){A()})),c((function(){return r.value}),(function(e,t){e!==t&&(o.value=D(),A())}));var A=function(){var e=s(a().m((function e(){var t,n,l,s;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,k.AccessibleBusinessViewData(r.value);case 1:(t=e.v).status?o.value.FullDataList=t.result.items:w(t),o.value.FullDataList.length>0&&(n=(o.value.CurrentPage-1)*o.value.PageSize,l=o.value.CurrentPage*o.value.PageSize,o.value.CurrentPageDataList=o.value.FullDataList.slice(n,l),o.value.TotalItems=o.value.FullDataList.length),e.n=3;break;case 2:e.p=2,s=e.v,console.error("Error fetching business:",s);case 3:return e.p=3,e.f(3);case 4:return e.a(2)}}),e,null,[[0,2,3,4]])})));return function(){return e.apply(this,arguments)}}(),z=new C;function T(e){return j.apply(this,arguments)}function j(){return(j=s(a().m((function e(t){var n;return a().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,z.showAlert(M.Warning,"警告","確定要刪除授權業務別 ".concat(t.allowBusiness," 嗎？"),[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline ",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-info",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return e.n=2,k.AccessibleBusinessRemove(r.value,t.allowBusiness);case 2:if(!(n=e.v).status){e.n=4;break}return e.n=3,A();case 3:e.n=5;break;case 4:w(n);case 5:return e.a(2)}}),e)})))).apply(this,arguments)}var O=i(L());function L(){return{ModalInstance:{modalId:"business-select-list-modal",title:"選擇業務別",showModal:!1,size:"modal-xl",staticBackdrop:!0,scrollable:!0},PaginationType:"server",DisabledDataList:o.value.FullDataList.map((function(e){return e.business})),DataList:[],TotalItems:0,PageNumber:1,PageSize:10}}var _=function(){var e=s(a().m((function e(t,n,l){var r,s,o;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,k.BusinessManagementViewData(t,n,l);case 1:(s=e.v).status&&null!==(r=s.result)&&void 0!==r&&r.items?(O.value.DataList=s.result.items.map((function(e){return{name:e.business,value:e.business}})),O.value.TotalItems=s.result.totalCount,O.value.PageSize=l):w(s),e.n=3;break;case 2:e.p=2,o=e.v,console.error("Error fetching business:",o);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,n,a){return e.apply(this,arguments)}}();function N(){return E.apply(this,arguments)}function E(){return(E=s(a().m((function e(){var t;return a().w((function(e){for(;;)switch(e.n){case 0:return O.value=L(),e.n=1,k.BusinessManagementViewData("",1,O.value.PageSize);case 1:t=e.v,O.value.DataList=t.result.items.map((function(e){return{name:e.business,value:e.business}})),O.value.TotalItems=t.result.totalCount,O.value.PageSize=1,O.value.ModalInstance.showModal=!0;case 2:return e.a(2)}}),e)})))).apply(this,arguments)}function U(e){return Y.apply(this,arguments)}function Y(){return(Y=s(a().m((function e(t){var n;return a().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,z.showAlert(M.Warning,"提醒","確定要將 ".concat(t," 加入到 ").concat(r.value,"授權業務別中嗎？"),[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline ",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-info",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return e.n=2,k.AccessibleBusinessAdd(r.value,t);case 2:if(!(n=e.v).status){e.n=4;break}return e.n=3,A();case 3:O.value.ModalInstance.showModal=!1,e.n=5;break;case 4:w(n);case 5:console.log("選擇列表模態框提交，選擇項目:",t);case 6:return e.a(2)}}),e)})))).apply(this,arguments)}function re(){O.value.ModalInstance.showModal=!1}return n({openModal:function(){return S.apply(this,arguments)}}),function(e,t){return P(),d(p,null,[o.value.ModalInstance.showModal?(P(),d("div",{key:0,class:m(["modal show d-block",{"static-backdrop-animation":o.value.ModalInstance.animateBackdrop}]),tabindex:"-1","aria-labelledby":o.value.ModalInstance.modalId,"aria-hidden":!o.value.ModalInstance.showModal,onClick:B},[v("div",{class:m(["modal-dialog",[o.value.ModalInstance.size,o.value.ModalInstance.scrollable?"modal-dialog-scrollable":""]])},[v("div",G,[v("div",Q,[v("h5",W,y(o.value.ModalInstance.title),1),v("button",{type:"button",class:"btn-close",onClick:I})]),v("div",J,[v("div",R,[v("button",{type:"button",class:m(["btn btn-esun-outline",{active:"card"===o.value.DisplayMode}]),onClick:t[0]||(t[0]=function(e){return o.value.DisplayMode="card"})}," 卡片顯示 ",2),v("button",{type:"button",class:m(["btn btn-esun-outline",{active:"table"===o.value.DisplayMode}]),onClick:t[1]||(t[1]=function(e){return o.value.DisplayMode="table"})}," 表格顯示 ",2),v("button",{type:"button",class:"btn btn-esun-outline",onClick:N}," 新增授權業務別 ")]),0===o.value.CurrentPageDataList.length?(P(),d("div",$,"無項目")):b("",!0),"card"===o.value.DisplayMode?(P(),d("div",H,[(P(!0),d(p,null,g(o.value.CurrentPageDataList,(function(e,t){return P(),d("div",{key:t,class:"p-2",style:{flex:"1 1 0","min-width":"25%","max-width":"25%",width:"25%"}},[v("div",K,[v("div",X,[v("div",{class:"mb-2 text-truncate",title:e.allowBusiness,style:{width:"100%"}},y(e.allowBusiness),9,Z),v("button",{type:"button",class:"btn btn-sm btn-danger align-self-end",onClick:function(t){return T(e)}}," 移除 ",8,ee)])])])})),128))])):b("",!0),"table"===o.value.DisplayMode?(P(),d("div",te,[v("table",ne,[t[4]||(t[4]=v("thead",null,[v("tr",null,[v("th",null,"項目"),v("th",null,"操作")])],-1)),v("tbody",null,[(P(!0),d(p,null,g(o.value.CurrentPageDataList,(function(e,t){return P(),d("tr",{key:t},[v("td",null,y(e.allowBusiness),1),v("td",null,[e.allowBusiness!==r.value?(P(),d("button",{key:0,type:"button",class:"btn btn-sm btn-danger",onClick:function(t){return T(e)}}," 移除 ",8,ae)):b("",!0)])])})),128))])])])):b("",!0),o.value.CurrentPageDataList.length>0?(P(),f(V,{key:3,modelValue:o.value.CurrentPage,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.value.CurrentPage=e}),pageSize:o.value.PageSize,"onUpdate:pageSize":t[3]||(t[3]=function(e){return o.value.PageSize=e}),"total-items":o.value.TotalItems},null,8,["modelValue","pageSize","total-items"])):b("",!0)]),v("div",le,[v("button",{class:"btn btn-esun-outline",onClick:h(I,["prevent"])},"關閉")])])],2)],10,q)):b("",!0),O.value.ModalInstance.showModal?(P(),f(F,{key:1,myModal:O.value.ModalInstance,paginationType:O.value.PaginationType,disabledDataList:O.value.DisabledDataList,selectedList:O.value.DataList,totalItems:O.value.TotalItems,onSelect:U,onCancel:re,onPageChange:_},null,8,["myModal","paginationType","disabledDataList","selectedList","totalItems"])):b("",!0)],64)}}}),se=D(re,[["__scopeId","data-v-0f1e7761"]]),oe={class:"p-4 mt-5"},ie={class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},ue={class:"h2"},ce={class:"btn-toolbar justify-content-end mb-3",role:"toolbar","aria-label":"Toolbar with button groups"},de={class:"btn-group me-2",role:"group","aria-label":"First group"},pe={class:"input-group ms-3",style:{"max-width":"200px"}},be={class:"btn-group",role:"group"},fe={key:0},me={class:"card card-esun h-100 esun-animate-in"},ve={class:"card-body"},ye={class:"card-title"},ge={class:"card-text"},he={class:"dropdown mt-3"},ke={class:"dropdown-menu w-100"},we=["onClick"],Ce=["onClick"],Me=["onClick"],xe=["onClick"],Pe={class:"table table-bordered table-hover align-middle"},De={class:"dropdown mt-3"},Se={class:"dropdown-menu w-100"},Ie=["onClick"],Be=["onClick"],Ae=["onClick"],ze=["onClick"],Te=o({__name:"BusinessManagement",props:{collapsed:{type:Boolean},paginationType:{}},emits:["toggleTheme"],setup:function(e){var l=i([]),r=function(){var e=s(a().m((function e(){var t;return a().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,k.GetAllSystemInfo();case 1:if(!1!==(t=e.v).status){e.n=2;break}return w(t.message),e.a(2);case 2:l.value=t.result.items;case 3:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),o=S({business:[],searchQuery:"",paginationType:"server",pageNumber:1,pageSize:10,totalCount:0,displayMode:"card"}),u=i(U(l.value)),D=i({business:"",system:"",isActive:"Y",isDeleted:"N",token:"",base64TokenSignature:"",base64Salt:"",pepper:"",createdTime:"",lastUpdate:null}),F=function(){var e=s(a().m((function e(){var t,n,l;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,k.BusinessManagementViewData(o.searchQuery,o.pageNumber,o.pageSize);case 1:(n=e.v).status&&null!==(t=n.result)&&void 0!==t&&t.items?(o.business=n.result.items,o.totalCount=n.result.totalCount):w(n),e.n=3;break;case 2:e.p=2,l=e.v,T(l),console.error("Error fetching business:",l);case 3:return e.p=3,e.f(3);case 4:return e.a(2)}}),e,null,[[0,2,3,4]])})));return function(){return e.apply(this,arguments)}}();function q(){u.value.showModal=!0}function G(e){return Q.apply(this,arguments)}function Q(){return(Q=s(a().m((function e(t){var n,l,r,s;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=t,e.n=1,R.showAlert(M.Warning,"警告","確定新增系統 ".concat(n.system," 嗎？"),[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline ",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-info",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return l={business:n.business,systemName:n.system,isDeleted:"Y"===n.isDeleted,isActive:"Y"===n.isActive,token:n.token},e.n=2,k.BusinessManagementCreate(l);case 2:if(!(r=e.v).status){e.n=4;break}return e.n=3,F();case 3:e.n=5;break;case 4:w(r);case 5:u.value.showModal=!1,e.n=7;break;case 6:e.p=6,s=e.v,T(s),console.error("Error fetching business:",s);case 7:return e.a(2)}}),e,null,[[0,6]])})))).apply(this,arguments)}I(s(a().m((function e(){return a().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,r();case 1:return u.value=U(l.value),$.value=Y(l.value),e.n=2,F();case 2:return e.a(2)}}),e)})))),c((function(){return{pageNumber:o.pageNumber,pageSize:o.pageSize}}),(function(){F()}));var W=O((function(){F()}),100),J=function(){o.searchQuery="",F()},R=new C,$=i(Y(l.value)),H=i({business:"",system:"",isActive:"Y",isDeleted:"N",token:"",base64TokenSignature:"",base64Salt:"",pepper:"",createdTime:"",lastUpdate:null});function K(e){H.value=function(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?t(Object(l),!0).forEach((function(t){n(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({},e),$.value.showModal=!0}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=s(a().m((function e(t){var n,l,r,s;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,$.value.showModal=!1,n=t,e.n=1,R.showAlert(M.Warning,"警告","確定要更新系統 ".concat(n.system," 嗎？"),[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline ",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-info",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return l={business:n.business,systemName:n.system,isDeleted:"Y"===n.isDeleted,isActive:"Y"===n.isActive,token:n.token},e.n=2,k.BusinessManagementUpdate(l);case 2:if(!(r=e.v).status){e.n=4;break}return e.n=3,F();case 3:e.n=5;break;case 4:w(r);case 5:e.n=7;break;case 6:e.p=6,s=e.v,T(s),console.error("Error fetching business:",s);case 7:return e.a(2)}}),e,null,[[0,6]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=s(a().m((function e(t){var n,l;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,R.showAlert(M.Warning,"警告","確定要刪除系統 ".concat(t.system," 嗎？"),[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline ",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-info",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return e.n=2,k.BusinessManagementDelete(t.business);case 2:if(!(n=e.v).status){e.n=4;break}return e.n=3,F();case 3:e.n=5;break;case 4:w(n);case 5:e.n=7;break;case 6:e.p=6,l=e.v,T(l),console.error("Error fetching business:",l);case 7:return e.a(2)}}),e,null,[[0,6]])})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=s(a().m((function e(t){var n,l;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,R.showAlert(M.Warning,"警告","確定要停用此系統嗎？",[{id:"cancel",type:x.callback,btnClass:"btn-esun-outline",resolveParam:"cancel",title:"取消"},{id:"confirm",type:x.callback,btnClass:"btn-warning",resolveParam:"confirm",title:"確定"}]);case 1:if("confirm"!==e.v.param){e.n=5;break}return e.n=2,k.BusinessManagementDeactivate(t.business);case 2:if(!(n=e.v).status){e.n=4;break}return e.n=3,F();case 3:e.n=5;break;case 4:w(n);case 5:e.n=7;break;case 6:e.p=6,l=e.v,T(l),console.error("Error fetching business:",l);case 7:return e.a(2)}}),e,null,[[0,6]])})))).apply(this,arguments)}var le=i(""),re=i(),Te=function(e){le.value=e,N((function(){var e;re.value&&(null===(e=re.value)||void 0===e||e.openModal())}))};return function(e,t){return P(),d(p,null,[v("div",oe,[v("div",ie,[v("h1",ue,y(B(j).BusinessManagement.label),1),v("div",ce,[v("div",de,[v("div",pe,[A(v("input",{type:"text",class:"form-control form-control-esun",placeholder:"搜尋系統","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.searchQuery=e})},null,512),[[z,o.searchQuery]]),v("div",{class:"btn-close position-absolute end-0 top-50 translate-middle cursor-pointer shadow-none",onClick:J,"aria-label":"清除搜尋"},t[11]||(t[11]=[v("button",{class:"btn btn-link p-0","aria-label":"Close"},null,-1)]))]),v("button",{class:"btn btn-sm btn-esun-outline ml-3",onClick:t[1]||(t[1]=function(){return B(W)&&B(W).apply(void 0,arguments)})},"搜尋"),v("button",{class:"btn btn-esun-primary ml-3",onClick:q},"新增業務別")]),u.value.showModal?(P(),f(E,{key:0,myModal:u.value,modelValue:D.value,onSubmit:G,onCancel:t[2]||(t[2]=function(e){return u.value.showModal=!1})},null,8,["myModal","modelValue"])):b("",!0),v("div",be,[v("button",{class:m(["btn btn-esun-outline",{active:"card"===o.displayMode}]),onClick:t[3]||(t[3]=function(e){return o.displayMode="card"})}," 卡片模式 ",2),v("button",{class:m(["btn btn-esun-outline",{active:"table"===o.displayMode}]),onClick:t[4]||(t[4]=function(e){return o.displayMode="table"})}," 表格模式 ",2)])])]),0===o.totalCount?(P(),d("div",fe,"無 資 料 !")):b("",!0),o.totalCount?(P(),f(V,{key:1,modelValue:o.pageNumber,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.pageNumber=e}),pageSize:o.pageSize,"onUpdate:pageSize":t[6]||(t[6]=function(e){return o.pageSize=e}),"total-items":o.totalCount},null,8,["modelValue","pageSize","total-items"])):b("",!0),"card"===o.displayMode?(P(),d("div",{key:2,class:m(["row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 active",{"fade-in":o.pageNumber}]),ref:"dataContainer"},[(P(!0),d(p,null,g(o.business,(function(e){return P(),d("div",{class:"col",key:e.business},[v("div",me,[v("div",ve,[v("h5",ye,y(e.business),1),v("p",ge,[t[12]||(t[12]=v("strong",null,"系統代號:",-1)),L(" "+y(e.system),1),t[13]||(t[13]=v("br",null,null,-1)),t[14]||(t[14]=v("strong",null,"是否軟刪除:",-1)),v("span",{class:m("N"===e.isDeleted?"text-success":"text-danger")},y("Y"===e.isDeleted?"是":"否"),3),t[15]||(t[15]=v("br",null,null,-1)),t[16]||(t[16]=v("strong",null,"啟用狀態:",-1)),v("span",{class:m("Y"===e.isActive?"text-success":"text-danger")},y("Y"===e.isActive?"啟用中":"已停用"),3),t[17]||(t[17]=v("br",null,null,-1)),t[18]||(t[18]=v("strong",null,"token:",-1)),L(" "+y(e.token),1),t[19]||(t[19]=v("br",null,null,-1)),t[20]||(t[20]=v("strong",null,"建立時間:",-1)),L(" "+y(_(e.createdTime)),1),t[21]||(t[21]=v("br",null,null,-1)),t[22]||(t[22]=v("strong",null,"更新時間:",-1)),L(" "+y(_(e.lastUpdate)),1)]),v("div",he,[t[27]||(t[27]=v("button",{class:"btn btn-esun-outline dropdown-toggle w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[v("i",{class:"bi bi-gear me-1"}),L(" 操作選單 ")],-1)),v("ul",ke,[v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return K(e)}),["prevent"])},t[23]||(t[23]=[v("i",{class:"bi bi-pencil-square me-1 text-primary"},null,-1),L(" 修改 ")]),8,we)]),v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return ee(e)}),["prevent"])},t[24]||(t[24]=[v("i",{class:"bi bi-trash me-1 text-danger"},null,-1),L(" 刪除 ")]),8,Ce)]),v("li",null,[v("a",{class:m(["dropdown-item",{disabled:!e.isActive}]),href:"#",onClick:h((function(t){return ne(e)}),["prevent"])},t[25]||(t[25]=[v("i",{class:"bi bi-slash-circle me-1 text-warning"},null,-1),L(" 停用 ")]),10,Me)]),v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return Te(e.business)}),["prevent"])},t[26]||(t[26]=[v("i",{class:"bi bi-trash me-1 text-info"},null,-1),L(" 授權業務別管理 ")]),8,xe)])])])])])])})),128))],2)):(P(),d("div",{key:3,class:m([{"fade-in":o.pageNumber},"active"]),style:{overflow:"auto"}},[v("table",Pe,[t[33]||(t[33]=v("thead",{class:"table-light"},[v("tr",null,[v("th",null,"業務別"),v("th",null,"系統代號"),v("th",null,"是否軟刪除"),v("th",null,"啟用狀態"),v("th",null,"token"),v("th",null,"建立時間"),v("th",null,"更新時間"),v("th",null,"操作選單")])],-1)),v("tbody",null,[(P(!0),d(p,null,g(o.business,(function(e){return P(),d("tr",{key:e.business},[v("td",null,y(e.business),1),v("td",null,y(e.system),1),v("td",null,[v("span",{class:m(e.isDeleted?"text-success":"text-danger")},y(e.isDeleted?"啟用中":"已停用"),3)]),v("td",null,[v("span",{class:m(e.isActive?"text-success":"text-danger")},y(e.isActive?"啟用中":"已停用"),3)]),v("td",null,y(e.token),1),v("td",null,y(_(e.createdTime)),1),v("td",null,y(_(e.lastUpdate)),1),v("td",null,[v("div",De,[t[32]||(t[32]=v("button",{class:"btn btn-esun-outline dropdown-toggle w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[v("i",{class:"bi bi-gear me-1"}),L(" 操作選單 ")],-1)),v("ul",Se,[v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return K(e)}),["prevent"])},t[28]||(t[28]=[v("i",{class:"bi bi-pencil-square me-1 text-primary"},null,-1),L(" 修改 ")]),8,Ie)]),v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return ee(e)}),["prevent"])},t[29]||(t[29]=[v("i",{class:"bi bi-trash me-1 text-danger"},null,-1),L(" 刪除 ")]),8,Be)]),v("li",null,[v("a",{class:m(["dropdown-item",{disabled:!e.isActive}]),href:"#",onClick:h((function(t){return ne(e)}),["prevent"])},t[30]||(t[30]=[v("i",{class:"bi bi-slash-circle me-1 text-warning"},null,-1),L(" 停用 ")]),10,Ae)]),v("li",null,[v("a",{class:"dropdown-item",href:"#",onClick:h((function(t){return Te(e.business)}),["prevent"])},t[31]||(t[31]=[v("i",{class:"bi bi-trash me-1 text-info"},null,-1),L(" 授權業務別管理 ")]),8,ze)])])])])])})),128))])])],2)),o.totalCount?(P(),f(V,{key:4,modelValue:o.pageNumber,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.pageNumber=e}),pageSize:o.pageSize,"onUpdate:pageSize":t[8]||(t[8]=function(e){return o.pageSize=e}),"total-items":o.totalCount},null,8,["modelValue","pageSize","total-items"])):b("",!0),$.value.showModal?(P(),f(E,{key:5,myModal:$.value,modelValue:H.value,"onUpdate:modelValue":t[9]||(t[9]=function(e){return H.value=e}),onSubmit:X,onCancel:t[10]||(t[10]=function(e){return $.value.showModal=!1})},null,8,["myModal","modelValue"])):b("",!0)]),le.value?(P(),f(se,{key:0,ref_key:"BusinessAllowModalRef",ref:re,operateBusiness:le.value,AllBusinessLists:o.business},null,8,["operateBusiness","AllBusinessLists"])):b("",!0)],64)}}});e("default",D(Te,[["__scopeId","data-v-a1c2544c"]]))}}}))}();
//# sourceMappingURL=BusinessManagement-legacy-wJAVUTZc.js.map
