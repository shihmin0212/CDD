{"version":3,"file":"FileInfosManagement-legacy-DqOgoxOO.js","sources":["../../src/components/modal/JsonFormModal/schema.ts","../../src/components/BackStage/6_FileInfos/BusinessSelectModal.vue","../../src/components/BackStage/6_FileInfos/FileCaseSelectModal.vue","../../src/components/BackStage/6_FileInfos/DocTypeSelectModal.vue","../../src/components/BackStage/6_FileInfos/ImagePreviewModal.vue","../../src/libs/ImageHelper.ts","../../src/components/BackStage/6_FileInfos/FileInfosManagement.vue","../../src/components/BackStage/6_FileInfos/CreateFileInfosModal.ts","../../src/components/BackStage/6_FileInfos/UpdateFileInfosModal.ts"],"sourcesContent":["// schema.ts\r\nexport type FieldType = 'text' | 'select' | 'checkbox' | 'radio' | 'textarea' | 'file' | 'datetime';\r\nexport type ModalSize = 'modal-sm' | 'modal-lg' | 'modal-xl' | 'modal-fullscreen';\r\nexport interface MyModal {\r\n    modalId: string;\r\n    title: string;\r\n    showModal: boolean;\r\n    size: ModalSize;\r\n    staticBackdrop: boolean;\r\n    scrollable?: boolean;\r\n    fieldGroups: FieldsGridGroup[];\r\n    methods?: {\r\n        Check: (value: string) => void;\r\n    };\r\n}\r\n\r\nexport interface FieldsGridGroup {\r\n    gridClass: string;\r\n    title?: string | null;\r\n    fields: Field[];\r\n}\r\n\r\n// 擴充 CheckboxField / RadioField 的 options\r\nexport interface FieldOption {\r\n    label: string;\r\n    value: string | boolean | number;\r\n    disabled?: boolean;\r\n    tooltip?: string;\r\n    hint?: string;\r\n}\r\n\r\ntype IBaseField = {\r\n    type: FieldType;\r\n    label: string;\r\n    hint?: string;\r\n    name: string;\r\n    modelId: string;\r\n\r\n    required?: boolean;\r\n    disabled?: boolean;\r\n    placeholder?: string;\r\n    error?: string;\r\n};\r\n\r\nexport interface TextField extends IBaseField {\r\n    type: 'text';\r\n    maxlength: number;\r\n    readonly?: boolean;\r\n    onChangeCallback?: (value: string) => void;\r\n    onInputCallback?: (value: string) => void;\r\n    onClickCallback?: () => void;\r\n    onSubmitCheckCallback?: (value: string, formData?: Record<string, any>) => string;\r\n    onClearInput?: () => void;\r\n}\r\n\r\nexport interface TextareaField extends IBaseField {\r\n    type: 'textarea';\r\n    rows: number | 50;\r\n    maxlength: number;\r\n    onChangeCallback?: (value: string) => void;\r\n    onInputCallback?: (value: string) => void;\r\n    onSubmitCheckCallback?: (value: string) => string;\r\n}\r\n\r\nexport interface RadioField extends IBaseField {\r\n    type: 'radio';\r\n    options: FieldOption[];\r\n    inline?: boolean;\r\n    onChangeCallback?: (value: string | boolean | number) => void;\r\n    onInputCallback?: (value: string | boolean | number) => void;\r\n    onSubmitCheckCallback?: (value: string | boolean | number) => string;\r\n}\r\n\r\nexport interface SelectField extends IBaseField {\r\n    type: 'select';\r\n    options: FieldOption[];\r\n    onChangeCallback?: (value: string) => void;\r\n    onInputCallback?: (value: string) => void;\r\n    onSubmitCheckCallback?: (value: string) => string;\r\n}\r\n\r\nexport interface CheckboxField extends IBaseField {\r\n    type: 'checkbox';\r\n    options: FieldOption[];\r\n    inline?: boolean;\r\n    onChangeCallback?: (value: string[] | number[]) => void;\r\n    onInputCallback?: (value: string[] | number[]) => void;\r\n    onSubmitCheckCallback?: (value: string[] | number[]) => string;\r\n}\r\n\r\nexport interface FileField extends IBaseField {\r\n    type: 'file';\r\n    accept?: string; // 檔案格式限制，例如: '.pdf,.doc,.docx' 或 'image/*'\r\n    multiple?: boolean; // 是否允許多檔案上傳\r\n    maxSize?: number; // 檔案大小限制 (bytes)\r\n    maxFiles?: number; // 最大檔案數量\r\n    onChangeCallback?: (value: File[] | File | null) => void;\r\n    onInputCallback?: (value: File[] | File | null) => void;\r\n    onSubmitCheckCallback?: (value: File[] | File | null) => string;\r\n}\r\n\r\nexport interface DatetimeField extends IBaseField {\r\n    type: 'datetime';\r\n    minDate?: string; // 最小日期時間，格式: YYYY-MM-DDTHH:MM\r\n    maxDate?: string; // 最大日期時間，格式: YYYY-MM-DDTHH:MM\r\n    onChangeCallback?: (value: Date | null) => void;\r\n    onInputCallback?: (value: Date | null) => void;\r\n    onSubmitCheckCallback?: (value: Date | null) => string;\r\n}\r\n\r\nexport type Field = CheckboxField | TextField | RadioField | SelectField | TextareaField | FileField | DatetimeField;\r\nexport type FieldValue<T extends Field> = T extends TextField | TextareaField | RadioField | SelectField\r\n    ? string\r\n    : T extends CheckboxField\r\n      ? string[]\r\n      : T extends FileField\r\n        ? File[] | File | null\r\n        : T extends DatetimeField\r\n          ? Date | null\r\n          : never;\r\n\r\n// Type-safe overloads\r\nexport function createField(field: TextField): TextField;\r\nexport function createField(field: CheckboxField): CheckboxField;\r\nexport function createField(field: SelectField): SelectField;\r\nexport function createField(field: RadioField): RadioField;\r\nexport function createField(field: TextareaField): TextareaField;\r\nexport function createField(field: FileField): FileField;\r\nexport function createField(field: DatetimeField): DatetimeField;\r\n\r\n// 通用 callback\r\nexport function createField<T extends Field>(field: T): T {\r\n    return field;\r\n}\r\n\r\n/**\r\n * @todo 尋找Field by Id\r\n * @param myModal\r\n * @param lookupId\r\n * @returns\r\n */\r\nexport function getFieldsGridGroupById(myModal: MyModal, lookupId: string): Field | null {\r\n    for (const group of myModal.fieldGroups) {\r\n        for (const field of group.fields) {\r\n            if (field.modelId === lookupId) {\r\n                return field;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n","<template>\r\n    <div\r\n        v-if=\"SelectModal.ModalInstance.showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        :aria-labelledby=\"SelectModal.ModalInstance.modalId\"\r\n        :aria-hidden=\"!SelectModal.ModalInstance.showModal\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': SelectModal.ModalInstance.animateBackdrop }\"\r\n    >\r\n        <div\r\n            class=\"modal-dialog\"\r\n            :class=\"[\r\n                SelectModal.ModalInstance.size,\r\n                SelectModal.ModalInstance.scrollable ? 'modal-dialog-scrollable' : ''\r\n            ]\"\r\n        >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">{{ SelectModal.ModalInstance.title }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!-- 搜尋輸入框 -->\r\n                    <div class=\"mb-3\">\r\n                        <div class=\"input-group\">\r\n                            <span class=\"input-group-text\">\r\n                                <i class=\"bi bi-search\"></i>\r\n                            </span>\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                placeholder=\"搜尋業務別代號...\"\r\n                                v-model=\"searchInput\"\r\n                                @keyup.enter=\"handleSearch\"\r\n                            />\r\n                            <button class=\"btn btn-esun-primary\" type=\"button\" @click=\"handleSearch\">搜尋</button>\r\n                            <button\r\n                                class=\"btn btn-esun-outline\"\r\n                                type=\"button\"\r\n                                @click=\"clearSearch\"\r\n                                v-if=\"SelectModal.SearchQuery\"\r\n                            >\r\n                                清除\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"btn-group me-2 mb-3\" role=\"group\" aria-label=\"First group\">\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'card' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'card'\"\r\n                        >\r\n                            卡片顯示\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'table' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'table'\"\r\n                        >\r\n                            表格顯示\r\n                        </button>\r\n                    </div>\r\n                    <div v-if=\"SelectModal.DataList.length === 0\" class=\"text-muted\">無業務別資料</div>\r\n\r\n                    <div\r\n                        v-if=\"SelectModal.DisplayMode === 'card'\"\r\n                        class=\"d-flex flex-wrap w-100\"\r\n                        style=\"min-height: 400px\"\r\n                    >\r\n                        <div\r\n                            v-for=\"(item, index) in SelectModal.DataList\"\r\n                            :key=\"index\"\r\n                            class=\"p-2\"\r\n                            style=\"flex: 1 1 0; min-width: 33.33%; max-width: 33.33%; width: 33.33%\"\r\n                        >\r\n                            <div class=\"card\">\r\n                                <div\r\n                                    class=\"card-body p-2 d-flex flex-column justify-content-between\"\r\n                                    style=\"height: 140px\"\r\n                                >\r\n                                    <div class=\"mb-2\">\r\n                                        <div class=\"text-truncate fw-bold\" :title=\"item.business\" style=\"width: 100%\">\r\n                                            {{ item.business }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">系統: {{ item.system }}</div>\r\n                                        <div class=\"text-muted small\">\r\n                                            狀態: {{ item.isActive === 'Y' ? '啟用' : '停用' }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">建立時間: {{ formatDate(item.createdTime) }}</div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        class=\"btn btn-sm btn-esun-primary align-self-end\"\r\n                                        @click=\"selectBusiness(item)\"\r\n                                        :disabled=\"item.isActive !== 'Y'\"\r\n                                    >\r\n                                        選擇\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div v-if=\"SelectModal.DisplayMode === 'table'\" style=\"min-height: 400px\">\r\n                        <table class=\"table table-bordered table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>業務別代號</th>\r\n                                    <th>系統代號</th>\r\n                                    <th>狀態</th>\r\n                                    <th>建立時間</th>\r\n                                    <th>操作</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, index) in SelectModal.DataList\" :key=\"index\">\r\n                                    <td>{{ item.business }}</td>\r\n                                    <td>{{ item.system }}</td>\r\n                                    <td>\r\n                                        <span :class=\"item.isActive === 'Y' ? 'text-success' : 'text-danger'\">\r\n                                            {{ item.isActive === 'Y' ? '啟用' : '停用' }}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td>{{ formatDate(item.createdTime) }}</td>\r\n                                    <td>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            class=\"btn btn-sm btn-esun-primary\"\r\n                                            @click=\"selectBusiness(item)\"\r\n                                            :disabled=\"item.isActive !== 'Y'\"\r\n                                        >\r\n                                            選擇\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <Pagination\r\n                        v-if=\"SelectModal.DataList.length > 0\"\r\n                        v-model:modelValue=\"SelectModal.CurrentPage\"\r\n                        v-model:pageSize=\"SelectModal.PageSize\"\r\n                        :total-items=\"SelectModal.TotalItems\"\r\n                    />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-esun-outline\" @click.prevent=\"closeModal\">取消</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport type { MyBaseModal } from '@/components/modal/BaseModal/schema';\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\nimport * as Common from '@/libs/Common';\r\n\r\nexport interface SelectModal {\r\n    ModalInstance: MyBaseModal;\r\n    PaginationType: 'server' | 'client';\r\n    DisplayMode: 'table' | 'card';\r\n    DataList: BusinessDTO[];\r\n    TotalItems: number;\r\n    CurrentPage: number;\r\n    PageSize: number;\r\n    SearchQuery: string;\r\n}\r\n\r\nconst SelectModal = ref<SelectModal>(GetDefaultSelectModal());\r\n\r\n// 搜尋輸入框的值（與實際搜尋條件分離）\r\nconst searchInput = ref('');\r\n\r\nfunction GetDefaultSelectModal(): SelectModal {\r\n    return {\r\n        ModalInstance: {\r\n            modalId: 'BusinessSelectModal',\r\n            title: '選擇業務別',\r\n            showModal: false,\r\n            size: 'modal-xl',\r\n            staticBackdrop: true,\r\n            animateBackdrop: false,\r\n            scrollable: true\r\n        },\r\n        PaginationType: 'server',\r\n        DisplayMode: 'table',\r\n        DataList: [],\r\n        TotalItems: 0,\r\n        CurrentPage: 1,\r\n        PageSize: 10,\r\n        SearchQuery: ''\r\n    };\r\n}\r\n\r\n// 分頁監聽\r\nwatch(\r\n    () => ({\r\n        currentPage: SelectModal.value.CurrentPage,\r\n        pageSize: SelectModal.value.PageSize\r\n    }),\r\n    () => {\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\n/**\r\n * 展開Modal\r\n */\r\nasync function openModal() {\r\n    SelectModal.value = GetDefaultSelectModal();\r\n    searchInput.value = ''; // 清空搜尋輸入框\r\n    await LoadViewData();\r\n    SelectModal.value.ModalInstance.showModal = true;\r\n}\r\n\r\n/**\r\n * 關閉Modal\r\n */\r\nfunction closeModal() {\r\n    SelectModal.value.ModalInstance.showModal = false;\r\n}\r\n\r\n/**\r\n * 處理點擊背景事件，觸發背景動畫\r\n */\r\nfunction handleBackgroundClick(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) {\r\n        SelectModal.value.ModalInstance.animateBackdrop = true;\r\n        setTimeout(() => {\r\n            SelectModal.value.ModalInstance.animateBackdrop = false;\r\n        }, 150);\r\n    }\r\n}\r\n\r\n/**\r\n * 載入業務別資料\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        // 呼叫業務別管理API，包含搜尋參數\r\n        const response = await API.BusinessManagementViewData(\r\n            SelectModal.value.SearchQuery,\r\n            SelectModal.value.CurrentPage,\r\n            SelectModal.value.PageSize\r\n        );\r\n\r\n        if (response && response.status) {\r\n            SelectModal.value.DataList = response.result.items.filter(\r\n                (item) => item.isActive === 'Y' && item.isDeleted !== 'Y'\r\n            );\r\n            SelectModal.value.TotalItems = response.result.totalCount;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching Business data:', error);\r\n    }\r\n};\r\n\r\n// 節流處理LoadViewData，避免按鈕被連續點擊\r\nconst throttledLoadViewData = Common.Throttle(LoadViewData, 300);\r\n\r\n/**\r\n * 選擇業務別\r\n */\r\nfunction selectBusiness(item: BusinessDTO) {\r\n    emit('select', item.business);\r\n    closeModal();\r\n}\r\n\r\n/**\r\n * 格式化日期\r\n */\r\nfunction formatDate(dateString: string): string {\r\n    if (!dateString) return '';\r\n    try {\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('zh-TW', {\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit'\r\n        });\r\n    } catch {\r\n        return dateString;\r\n    }\r\n}\r\n\r\n/**\r\n * 處理搜尋按鈕點擊\r\n */\r\nfunction handleSearch() {\r\n    // 更新搜尋條件並重置到第一頁\r\n    SelectModal.value.SearchQuery = searchInput.value;\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n/**\r\n * 清除搜尋\r\n */\r\nfunction clearSearch() {\r\n    searchInput.value = '';\r\n    SelectModal.value.SearchQuery = '';\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n// 定義事件發射器\r\nconst emit = defineEmits<{\r\n    select: [business: string];\r\n}>();\r\n\r\n// 將方法暴露給父元件使用\r\ndefineExpose({ openModal });\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n.modal-dialog-scrollable .modal-body {\r\n    max-height: calc(100vh - 200px);\r\n    overflow-y: auto;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div\r\n        v-if=\"SelectModal.ModalInstance.showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        :aria-labelledby=\"SelectModal.ModalInstance.modalId\"\r\n        :aria-hidden=\"!SelectModal.ModalInstance.showModal\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': SelectModal.ModalInstance.animateBackdrop }\"\r\n    >\r\n        <div\r\n            class=\"modal-dialog\"\r\n            :class=\"[\r\n                SelectModal.ModalInstance.size,\r\n                SelectModal.ModalInstance.scrollable ? 'modal-dialog-scrollable' : ''\r\n            ]\"\r\n        >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">{{ SelectModal.ModalInstance.title }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!-- 搜尋輸入框 -->\r\n                    <div class=\"mb-3\">\r\n                        <div class=\"input-group\">\r\n                            <span class=\"input-group-text\">\r\n                                <i class=\"bi bi-search\"></i>\r\n                            </span>\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                placeholder=\"搜尋文件類別序號、業務別...\"\r\n                                v-model=\"searchInput\"\r\n                                @keyup.enter=\"handleSearch\"\r\n                            />\r\n                            <button class=\"btn btn-esun-primary\" type=\"button\" @click=\"handleSearch\">搜尋</button>\r\n                            <button\r\n                                class=\"btn btn-esun-outline\"\r\n                                type=\"button\"\r\n                                @click=\"clearSearch\"\r\n                                v-if=\"SelectModal.SearchQuery\"\r\n                            >\r\n                                清除\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"btn-group me-2 mb-3\" role=\"group\" aria-label=\"First group\">\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'card' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'card'\"\r\n                        >\r\n                            卡片顯示\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'table' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'table'\"\r\n                        >\r\n                            表格顯示\r\n                        </button>\r\n                    </div>\r\n                    <div v-if=\"SelectModal.DataList.length === 0\" class=\"text-muted\">無檔案案件資料</div>\r\n\r\n                    <div\r\n                        v-if=\"SelectModal.DisplayMode === 'card'\"\r\n                        class=\"d-flex flex-wrap w-100\"\r\n                        style=\"min-height: 400px\"\r\n                    >\r\n                        <div\r\n                            v-for=\"(item, index) in SelectModal.DataList\"\r\n                            :key=\"index\"\r\n                            class=\"p-2\"\r\n                            style=\"flex: 1 1 0; min-width: 33.33%; max-width: 33.33%; width: 33.33%\"\r\n                        >\r\n                            <div class=\"card\">\r\n                                <div\r\n                                    class=\"card-body p-2 d-flex flex-column justify-content-between\"\r\n                                    style=\"height: 140px\"\r\n                                >\r\n                                    <div class=\"mb-2\">\r\n                                        <div class=\"text-truncate fw-bold\" :title=\"item.caseNo\" style=\"width: 100%\">\r\n                                            {{ item.caseNo }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">業務別: {{ item.business }}</div>\r\n                                        <div class=\"text-muted small\">\r\n                                            權限: {{ getPermissionText(item.permission) }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">更新時間: {{ formatDate(item.updateTime) }}</div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        class=\"btn btn-sm btn-esun-primary align-self-end\"\r\n                                        @click=\"selectFileCase(item)\"\r\n                                    >\r\n                                        選擇\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div v-if=\"SelectModal.DisplayMode === 'table'\" style=\"min-height: 400px\">\r\n                        <table class=\"table table-bordered table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>文件類別序號</th>\r\n                                    <th>業務別</th>\r\n                                    <th>權限</th>\r\n                                    <th>更新時間</th>\r\n                                    <th>操作</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, index) in SelectModal.DataList\" :key=\"index\">\r\n                                    <td>{{ item.caseNo }}</td>\r\n                                    <td>{{ item.business }}</td>\r\n                                    <td>{{ getPermissionText(item.permission) }}</td>\r\n                                    <td>{{ formatDate(item.updateTime) }}</td>\r\n                                    <td>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            class=\"btn btn-sm btn-esun-primary\"\r\n                                            @click=\"selectFileCase(item)\"\r\n                                        >\r\n                                            選擇\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <Pagination\r\n                        v-if=\"SelectModal.DataList.length > 0\"\r\n                        v-model:modelValue=\"SelectModal.CurrentPage\"\r\n                        v-model:pageSize=\"SelectModal.PageSize\"\r\n                        :total-items=\"SelectModal.TotalItems\"\r\n                    />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-esun-outline\" @click.prevent=\"closeModal\">取消</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport type { MyBaseModal } from '@/components/modal/BaseModal/schema';\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport type { FileCase } from '@/models/DTO/FileCase';\r\nimport * as Common from '@/libs/Common';\r\n\r\nexport interface SelectModal {\r\n    ModalInstance: MyBaseModal;\r\n    PaginationType: 'server' | 'client';\r\n    DisplayMode: 'table' | 'card';\r\n    DataList: FileCase[];\r\n    TotalItems: number;\r\n    CurrentPage: number;\r\n    PageSize: number;\r\n    SearchQuery: string;\r\n}\r\n\r\nconst SelectModal = ref<SelectModal>(GetDefaultSelectModal());\r\n\r\n// 搜尋輸入框的值（與實際搜尋條件分離）\r\nconst searchInput = ref('');\r\n\r\nfunction GetDefaultSelectModal(): SelectModal {\r\n    return {\r\n        ModalInstance: {\r\n            modalId: 'FileCaseSelectModal',\r\n            title: '選擇檔案案件',\r\n            showModal: false,\r\n            size: 'modal-xl',\r\n            staticBackdrop: true,\r\n            animateBackdrop: false,\r\n            scrollable: true\r\n        },\r\n        PaginationType: 'server',\r\n        DisplayMode: 'table',\r\n        DataList: [],\r\n        TotalItems: 0,\r\n        CurrentPage: 1,\r\n        PageSize: 10,\r\n        SearchQuery: ''\r\n    };\r\n}\r\n\r\n// 分頁監聽\r\nwatch(\r\n    () => ({\r\n        currentPage: SelectModal.value.CurrentPage,\r\n        pageSize: SelectModal.value.PageSize\r\n    }),\r\n    () => {\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\n// 移除搜尋監聽器，改用按鈕觸發\r\n\r\n/**\r\n * 展開Modal\r\n */\r\nasync function openModal() {\r\n    SelectModal.value = GetDefaultSelectModal();\r\n    searchInput.value = ''; // 清空搜尋輸入框\r\n    await LoadViewData();\r\n    SelectModal.value.ModalInstance.showModal = true;\r\n}\r\n\r\n/**\r\n * 關閉Modal\r\n */\r\nfunction closeModal() {\r\n    SelectModal.value.ModalInstance.showModal = false;\r\n}\r\n\r\n/**\r\n * 處理點擊背景事件，觸發背景動畫\r\n */\r\nfunction handleBackgroundClick(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) {\r\n        SelectModal.value.ModalInstance.animateBackdrop = true;\r\n        setTimeout(() => {\r\n            SelectModal.value.ModalInstance.animateBackdrop = false;\r\n        }, 150);\r\n    }\r\n}\r\n\r\n/**\r\n * 載入檔案案件資料\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        // 呼叫後端分頁 API，包含搜尋參數\r\n        const response = await API.FileCaseManagementViewData({\r\n            pageNumber: SelectModal.value.CurrentPage,\r\n            pageSize: SelectModal.value.PageSize,\r\n            searchQuery: SelectModal.value.SearchQuery\r\n        });\r\n\r\n        if (response && response.status) {\r\n            SelectModal.value.DataList = response.result.items;\r\n            SelectModal.value.TotalItems = response.result.totalItems ?? 0;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching FileCase data:', error);\r\n    }\r\n};\r\n\r\n// 節流處理LoadViewData，避免按鈕被連續點擊\r\nconst throttledLoadViewData = Common.Throttle(LoadViewData, 300);\r\n\r\n/**\r\n * 選擇檔案案件\r\n */\r\nfunction selectFileCase(item: FileCase) {\r\n    emit('select', item.caseNo);\r\n    closeModal();\r\n}\r\n\r\n/**\r\n * 格式化權限顯示文字\r\n */\r\nfunction getPermissionText(permission: number): string {\r\n    const permissionMap: { [key: string]: string } = {\r\n        0: '不限制任何系統 (Public)',\r\n        1: '限制註冊系統 (Protect)',\r\n        2: '限制白名單系統 (ProtectInternal)',\r\n        3: '自己才可存取 (Private)'\r\n    };\r\n    return permissionMap[permission] || '未知';\r\n}\r\n\r\n/**\r\n * 格式化日期\r\n */\r\nfunction formatDate(dateString: string): string {\r\n    if (!dateString) return '';\r\n    try {\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('zh-TW', {\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit'\r\n        });\r\n    } catch {\r\n        return dateString;\r\n    }\r\n}\r\n\r\n/**\r\n * 處理搜尋按鈕點擊\r\n */\r\nfunction handleSearch() {\r\n    // 更新搜尋條件並重置到第一頁\r\n    SelectModal.value.SearchQuery = searchInput.value;\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n/**\r\n * 清除搜尋\r\n */\r\nfunction clearSearch() {\r\n    searchInput.value = '';\r\n    SelectModal.value.SearchQuery = '';\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n// 定義事件發射器\r\nconst emit = defineEmits<{\r\n    select: [caseNo: string];\r\n}>();\r\n\r\n// 將方法暴露給父元件使用\r\ndefineExpose({ openModal });\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n.modal-dialog-scrollable .modal-body {\r\n    max-height: calc(100vh - 200px);\r\n    overflow-y: auto;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div\r\n        v-if=\"SelectModal.ModalInstance.showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        :aria-labelledby=\"SelectModal.ModalInstance.modalId\"\r\n        :aria-hidden=\"!SelectModal.ModalInstance.showModal\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': SelectModal.ModalInstance.animateBackdrop }\"\r\n    >\r\n        <div\r\n            class=\"modal-dialog\"\r\n            :class=\"[\r\n                SelectModal.ModalInstance.size,\r\n                SelectModal.ModalInstance.scrollable ? 'modal-dialog-scrollable' : ''\r\n            ]\"\r\n        >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">{{ SelectModal.ModalInstance.title }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <!-- 搜尋輸入框 -->\r\n                    <div class=\"mb-3\">\r\n                        <div class=\"input-group\">\r\n                            <span class=\"input-group-text\">\r\n                                <i class=\"bi bi-search\"></i>\r\n                            </span>\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                placeholder=\"搜尋文件類型名稱...\"\r\n                                v-model=\"searchInput\"\r\n                                @keyup.enter=\"handleSearch\"\r\n                            />\r\n                            <button class=\"btn btn-esun-primary\" type=\"button\" @click=\"handleSearch\">搜尋</button>\r\n                            <button\r\n                                class=\"btn btn-esun-outline\"\r\n                                type=\"button\"\r\n                                @click=\"clearSearch\"\r\n                                v-if=\"SelectModal.SearchQuery\"\r\n                            >\r\n                                清除\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"btn-group me-2 mb-3\" role=\"group\" aria-label=\"First group\">\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'card' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'card'\"\r\n                        >\r\n                            卡片顯示\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: SelectModal.DisplayMode === 'table' }\"\r\n                            @click=\"SelectModal.DisplayMode = 'table'\"\r\n                        >\r\n                            表格顯示\r\n                        </button>\r\n                    </div>\r\n                    <div v-if=\"SelectModal.DataList.length === 0\" class=\"text-muted\">無文件類型資料</div>\r\n\r\n                    <div\r\n                        v-if=\"SelectModal.DisplayMode === 'card'\"\r\n                        class=\"d-flex flex-wrap w-100\"\r\n                        style=\"min-height: 400px\"\r\n                    >\r\n                        <div\r\n                            v-for=\"(item, index) in SelectModal.DataList\"\r\n                            :key=\"index\"\r\n                            class=\"p-2\"\r\n                            style=\"flex: 1 1 0; min-width: 33.33%; max-width: 33.33%; width: 33.33%\"\r\n                        >\r\n                            <div class=\"card\">\r\n                                <div\r\n                                    class=\"card-body p-2 d-flex flex-column justify-content-between\"\r\n                                    style=\"height: 140px\"\r\n                                >\r\n                                    <div class=\"mb-2\">\r\n                                        <div class=\"text-truncate fw-bold\" :title=\"item.docName\" style=\"width: 100%\">\r\n                                            {{ item.docName }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">編號: {{ item.docType }}</div>\r\n                                        <div class=\"text-muted small\">\r\n                                            權限: {{ getPermissionText(item.permission) }}\r\n                                        </div>\r\n                                        <div class=\"text-muted small\">描述: {{ item.description || '-' }}</div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        class=\"btn btn-sm btn-esun-primary align-self-end\"\r\n                                        @click=\"selectDocType(item)\"\r\n                                    >\r\n                                        選擇\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div v-if=\"SelectModal.DisplayMode === 'table'\" style=\"min-height: 400px\">\r\n                        <table class=\"table table-bordered table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>文件類型編號</th>\r\n                                    <th>文件類型名稱</th>\r\n                                    <th>權限</th>\r\n                                    <th>描述</th>\r\n                                    <th>操作</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, index) in SelectModal.DataList\" :key=\"index\">\r\n                                    <td>{{ item.docType }}</td>\r\n                                    <td>{{ item.docName }}</td>\r\n                                    <td>{{ getPermissionText(item.permission) }}</td>\r\n                                    <td>{{ item.description || '-' }}</td>\r\n                                    <td>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            class=\"btn btn-sm btn-esun-primary\"\r\n                                            @click=\"selectDocType(item)\"\r\n                                        >\r\n                                            選擇\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <Pagination\r\n                        v-if=\"SelectModal.DataList.length > 0\"\r\n                        v-model:modelValue=\"SelectModal.CurrentPage\"\r\n                        v-model:pageSize=\"SelectModal.PageSize\"\r\n                        :total-items=\"SelectModal.TotalItems\"\r\n                    />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-esun-outline\" @click.prevent=\"closeModal\">取消</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport type { MyBaseModal } from '@/components/modal/BaseModal/schema';\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport type { DocTypeDTO } from '@/models/DTO/DocType';\r\nimport * as Common from '@/libs/Common';\r\n\r\nexport interface SelectModal {\r\n    ModalInstance: MyBaseModal;\r\n    PaginationType: 'server' | 'client';\r\n    DisplayMode: 'table' | 'card';\r\n    DataList: DocTypeDTO[];\r\n    TotalItems: number;\r\n    CurrentPage: number;\r\n    PageSize: number;\r\n    SearchQuery: string;\r\n}\r\n\r\nconst SelectModal = ref<SelectModal>(GetDefaultSelectModal());\r\n\r\n// 搜尋輸入框的值（與實際搜尋條件分離）\r\nconst searchInput = ref('');\r\n\r\nfunction GetDefaultSelectModal(): SelectModal {\r\n    return {\r\n        ModalInstance: {\r\n            modalId: 'DocTypeSelectModal',\r\n            title: '選擇文件類型',\r\n            showModal: false,\r\n            size: 'modal-xl',\r\n            staticBackdrop: true,\r\n            animateBackdrop: false,\r\n            scrollable: true\r\n        },\r\n        PaginationType: 'server',\r\n        DisplayMode: 'table',\r\n        DataList: [],\r\n        TotalItems: 0,\r\n        CurrentPage: 1,\r\n        PageSize: 10,\r\n        SearchQuery: ''\r\n    };\r\n}\r\n\r\n// 分頁監聽\r\nwatch(\r\n    () => ({\r\n        currentPage: SelectModal.value.CurrentPage,\r\n        pageSize: SelectModal.value.PageSize\r\n    }),\r\n    () => {\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\n/**\r\n * 展開Modal\r\n */\r\nasync function openModal() {\r\n    SelectModal.value = GetDefaultSelectModal();\r\n    searchInput.value = ''; // 清空搜尋輸入框\r\n    await LoadViewData();\r\n    SelectModal.value.ModalInstance.showModal = true;\r\n}\r\n\r\n/**\r\n * 關閉Modal\r\n */\r\nfunction closeModal() {\r\n    SelectModal.value.ModalInstance.showModal = false;\r\n}\r\n\r\n/**\r\n * 處理點擊背景事件，觸發背景動畫\r\n */\r\nfunction handleBackgroundClick(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) {\r\n        SelectModal.value.ModalInstance.animateBackdrop = true;\r\n        setTimeout(() => {\r\n            SelectModal.value.ModalInstance.animateBackdrop = false;\r\n        }, 150);\r\n    }\r\n}\r\n\r\n/**\r\n * 載入文件類型資料\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        // 呼叫後端分頁 API，包含搜尋參數\r\n        const response = await API.DocTypeManagementViewData(\r\n            SelectModal.value.CurrentPage,\r\n            SelectModal.value.PageSize,\r\n            SelectModal.value.SearchQuery\r\n        );\r\n\r\n        if (response && response.status) {\r\n            SelectModal.value.DataList = response.result.items;\r\n            SelectModal.value.TotalItems = response.result.totalCount ?? 0;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching DocType data:', error);\r\n    }\r\n};\r\n\r\n// 節流處理LoadViewData，避免按鈕被連續點擊\r\nconst throttledLoadViewData = Common.Throttle(LoadViewData, 300);\r\n\r\n/**\r\n * 選擇文件類型\r\n */\r\nfunction selectDocType(item: DocTypeDTO) {\r\n    emit('select', item.docType, item.docName);\r\n    closeModal();\r\n}\r\n\r\n/**\r\n * 格式化權限顯示文字\r\n */\r\nfunction getPermissionText(permission: string): string {\r\n    const permissionMap: { [key: string]: string } = {\r\n        '0': '不限制任何系統 (Public)',\r\n        '1': '限制註冊系統 (Protect)',\r\n        '2': '限制白名單系統 (ProtectInternal)',\r\n        '3': '自己才可存取 (Private)'\r\n    };\r\n    return permissionMap[permission] || '未知';\r\n}\r\n\r\n/**\r\n * 處理搜尋按鈕點擊\r\n */\r\nfunction handleSearch() {\r\n    // 更新搜尋條件並重置到第一頁\r\n    SelectModal.value.SearchQuery = searchInput.value;\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n/**\r\n * 清除搜尋\r\n */\r\nfunction clearSearch() {\r\n    searchInput.value = '';\r\n    SelectModal.value.SearchQuery = '';\r\n    SelectModal.value.CurrentPage = 1;\r\n    throttledLoadViewData();\r\n}\r\n\r\n// 定義事件發射器\r\nconst emit = defineEmits<{\r\n    select: [docType: number, docName: string];\r\n}>();\r\n\r\n// 將方法暴露給父元件使用\r\ndefineExpose({ openModal });\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n.modal-dialog-scrollable .modal-body {\r\n    max-height: calc(100vh - 200px);\r\n    overflow-y: auto;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div\r\n        v-if=\"showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        aria-hidden=\"false\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': animateBackdrop }\"\r\n    >\r\n        <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">圖片預覽 - {{ fileName }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n                </div>\r\n                <div class=\"modal-body text-center\" style=\"max-height: 70vh; overflow: auto\">\r\n                    <div v-if=\"loading\" class=\"d-flex justify-content-center align-items-center\" style=\"height: 300px\">\r\n                        <div class=\"spinner-border text-primary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">載入中...</span>\r\n                        </div>\r\n                    </div>\r\n                    <div v-else-if=\"error\" class=\"alert alert-danger\">\r\n                        {{ error }}\r\n                    </div>\r\n                    <div v-else-if=\"imageData\">\r\n                        <img\r\n                            :src=\"imageData\"\r\n                            :alt=\"fileName\"\r\n                            class=\"img-fluid\"\r\n                            style=\"max-width: 100%; max-height: 60vh; object-fit: contain\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-esun-primary\" @click=\"downloadImage\" :disabled=\"!imageData\">\r\n                        <i class=\"bi bi-download me-1\"></i>下載圖片\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-esun-outline\" @click=\"closeModal\">關閉</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\nimport API from '@/api/v1/';\r\nimport type { FileInfos } from '@/models/DTO/FileInfos';\r\n\r\nconst showModal = ref(false);\r\nconst animateBackdrop = ref(false);\r\nconst loading = ref(false);\r\nconst error = ref('');\r\nconst imageData = ref('');\r\nconst fileName = ref('');\r\nconst currentFileInfo = ref<FileInfos | null>(null);\r\n\r\n/**\r\n * 打開圖片預覽模態框\r\n */\r\nasync function openModal(fileInfo: FileInfos) {\r\n    currentFileInfo.value = fileInfo;\r\n    fileName.value = fileInfo.fileName;\r\n    showModal.value = true;\r\n    loading.value = true;\r\n    error.value = '';\r\n    imageData.value = '';\r\n\r\n    try {\r\n        // 獲取圖片 blob 數據\r\n        const blob = await API.GetFileContent({ business: fileInfo.business, fileNo: fileInfo.fileNo });\r\n\r\n        // 創建 blob URL\r\n        const imageUrl = URL.createObjectURL(blob);\r\n        imageData.value = imageUrl;\r\n    } catch (err: any) {\r\n        console.error('獲取圖片失敗:', err);\r\n        error.value = '無法載入圖片，請稍後再試。';\r\n    } finally {\r\n        loading.value = false;\r\n    }\r\n}\r\n\r\n/**\r\n * 關閉模態框\r\n */\r\nfunction closeModal() {\r\n    showModal.value = false;\r\n\r\n    // 清理 blob URL 避免記憶體洩漏\r\n    if (imageData.value) {\r\n        URL.revokeObjectURL(imageData.value);\r\n        imageData.value = '';\r\n    }\r\n\r\n    currentFileInfo.value = null;\r\n    fileName.value = '';\r\n    error.value = '';\r\n}\r\n\r\n/**\r\n * 下載圖片\r\n */\r\nasync function downloadImage() {\r\n    if (!currentFileInfo.value || !imageData.value) return;\r\n\r\n    try {\r\n        // 重新獲取 blob 以確保數據正確\r\n        const blob = await API.GetFileContent({\r\n            business: currentFileInfo.value.business,\r\n            fileNo: currentFileInfo.value.fileNo\r\n        });\r\n\r\n        // 創建下載連結\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = currentFileInfo.value.fileName;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        // 清理 URL\r\n        URL.revokeObjectURL(url);\r\n    } catch (err: any) {\r\n        console.error('下載圖片失敗:', err);\r\n        // 可以顯示錯誤提示\r\n    }\r\n}\r\n\r\n/**\r\n * 處理點擊背景事件\r\n */\r\nfunction handleBackgroundClick(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) {\r\n        animateBackdrop.value = true;\r\n        setTimeout(() => {\r\n            animateBackdrop.value = false;\r\n        }, 150);\r\n    }\r\n}\r\n\r\n// 將方法暴露給父元件使用\r\ndefineExpose({ openModal });\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n\r\n/* 確保圖片在各種螢幕尺寸下都能正確顯示 */\r\n.modal-body img {\r\n    border-radius: 4px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n</style>\r\n","import * as Common from '@/libs/Common';\r\nimport { SimplePopUp, SimplePopUpBtnType, SimplePopUpModalType } from '@/libs/SimplePopUp';\r\nconst simplePopUp = new SimplePopUp();\r\n/**\r\n * @todo 縮圖 + 自定輸出格式\r\n * @param base64Src 原圖 base64\r\n * @param maxWidth 最大寬度\r\n * @param maxHeight 最大高度\r\n * @param imgQuality 壓縮品質 (0 ~ 1)\r\n * @param imageMaxSizeMb 限制最大大小 (MB)\r\n * @param mimeType 輸出格式，預設 'image/jpeg'\r\n * @returns\r\n */\r\nexport async function ResizeImageToBase64(\r\n    srcType: 'blob' | 'base64',\r\n    blob: Blob,\r\n    base64Src: string | null,\r\n    maxWidth: number = 2048,\r\n    maxHeight: number = 2048,\r\n    imgQuality: number = 0.8,\r\n    imageMaxSizeMb: number = 8,\r\n    mimeType: string = 'image/jpeg',\r\n    isShowPopUp: boolean = true\r\n): Promise<string | null> {\r\n    try {\r\n        if (srcType === 'blob') {\r\n            const base64 = await FileToBase64(blob);\r\n            base64Src = base64;\r\n        }\r\n        if (!base64Src) {\r\n            throw new Error('Base64 source is null.');\r\n        }\r\n        const img = await Common.Base64ToImage(base64Src);\r\n        const canvas = document.createElement('canvas');\r\n        // Resize width & height\r\n        if (img.width > img.height && img.width > maxWidth) {\r\n            img.height *= maxWidth / img.width;\r\n            img.width = maxWidth;\r\n        } else if (img.height > maxHeight) {\r\n            img.width *= maxHeight / img.height;\r\n            img.height = maxHeight;\r\n        }\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        // draw\r\n        const context = canvas.getContext('2d');\r\n        if (!context) {\r\n            throw new Error('Cannot get canvas 2D context.');\r\n        }\r\n        context.clearRect(0, 0, img.width, img.height);\r\n        context.drawImage(img, 0, 0, img.width, img.height);\r\n        const src = canvas.toDataURL(mimeType, imgQuality);\r\n        // const blob = await new Promise(resolve => canvas.toBlob(resolve,'image/jpeg', this.ImgQuality));\r\n\r\n        // 8MB Check\r\n        const fileSizeInBytes = getBase64Size(src);\r\n        const maxSize = imageMaxSizeMb * 1024 * 1024;\r\n        if (fileSizeInBytes > maxSize) {\r\n            if (isShowPopUp) {\r\n                simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', `很抱歉您上傳的照片大小超過${imageMaxSizeMb}MB請重新上傳，敬請見諒。`, [\r\n                    {\r\n                        id: 'confirm',\r\n                        type: SimplePopUpBtnType.callback,\r\n                        btnClass: 'btn-info',\r\n                        resolveParam: 'confirm',\r\n                        title: '確認'\r\n                    }\r\n                ]);\r\n            }\r\n            return null;\r\n        }\r\n        return src;\r\n    } catch (error) {\r\n        Common.ConsoleLog(error instanceof Error ? error.message : error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 縮圖 + 自定輸出格式\r\n * @param blob\r\n * @param maxWidth\r\n * @param maxHeight\r\n * @param imgQuality\r\n * @param imageMaxSizeMb\r\n * @param mimeType\r\n * @param isShowPopUp\r\n * @returns\r\n */\r\nexport async function ResizeImageBlobToBase64(\r\n    blob: Blob,\r\n    maxWidth: number = 2048,\r\n    maxHeight: number = 2048,\r\n    imgQuality: number = 0.8,\r\n    imageMaxSizeMb: number = 8,\r\n    mimeType: string = 'image/jpeg',\r\n    isShowPopUp: boolean = true\r\n): Promise<string | null> {\r\n    return ResizeImageToBase64('blob', blob, null, maxWidth, maxHeight, imgQuality, imageMaxSizeMb, mimeType, isShowPopUp);\r\n}\r\n\r\n/**\r\n * 縮圖 + 自定輸出格式，回傳 File 物件\r\n * @param base64Src 原圖 base64\r\n * @param fileName 檔案名稱\r\n * @param maxWidth 最大寬度\r\n * @param maxHeight 最大高度\r\n * @param imgQuality 壓縮品質\r\n * @param imageMaxSizeMb 最大大小(MB)\r\n * @param isShowPopUp 是否跳警告\r\n * @returns File 或 null\r\n */\r\nexport async function ResizeImageToFile(\r\n    srcType: 'blob' | 'base64',\r\n    fileInput: File,\r\n    base64Src: string | null,\r\n    fileName: string,\r\n    maxWidth: number = 2048,\r\n    maxHeight: number = 2048,\r\n    imgQuality: number = 0.8,\r\n    imageMaxSizeMb: number = 8,\r\n    isShowPopUp: boolean = true\r\n): Promise<File | null> {\r\n    try {\r\n        let localBase64Src = base64Src;\r\n        if (srcType === 'blob') {\r\n            const base64 = await FileToBase64(fileInput);\r\n            localBase64Src = base64;\r\n        }\r\n        if (!localBase64Src) {\r\n            throw new Error('Base64 source is null.');\r\n        }\r\n\r\n        const img = await Base64ToImage(localBase64Src);\r\n        const canvas = document.createElement('canvas');\r\n\r\n        // Resize width & height\r\n        if (img.width > img.height && img.width > maxWidth) {\r\n            img.height *= maxWidth / img.width;\r\n            img.width = maxWidth;\r\n        } else if (img.height > maxHeight) {\r\n            img.width *= maxHeight / img.height;\r\n            img.height = maxHeight;\r\n        }\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        const context = canvas.getContext('2d');\r\n        if (!context) {\r\n            throw new Error('Cannot get canvas 2D context.');\r\n        }\r\n\r\n        context.clearRect(0, 0, img.width, img.height);\r\n        context.drawImage(img, 0, 0, img.width, img.height);\r\n\r\n        const blob = await new Promise<Blob | null>((resolve) => {\r\n            canvas.toBlob((b) => resolve(b), fileInput.type, imgQuality);\r\n        });\r\n\r\n        if (!blob) {\r\n            throw new Error('Failed to create blob.');\r\n        }\r\n\r\n        // 檢查大小\r\n        const fileSizeInBytes = blob.size;\r\n        const maxSize = imageMaxSizeMb * 1024 * 1024;\r\n        if (fileSizeInBytes > maxSize) {\r\n            if (isShowPopUp) {\r\n                const simplePopUp = new SimplePopUp();\r\n                simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', `很抱歉您上傳的照片大小超過${imageMaxSizeMb}MB請重新上傳，敬請見諒。`, [\r\n                    {\r\n                        id: 'confirm',\r\n                        type: SimplePopUpBtnType.callback,\r\n                        btnClass: 'btn-info',\r\n                        resolveParam: 'confirm',\r\n                        title: '確認'\r\n                    }\r\n                ]);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // 把 Blob 轉成 File\r\n        const file = new File([blob], fileName, { type: fileInput.type });\r\n        return file;\r\n    } catch (error) {\r\n        Common.ConsoleLog(error instanceof Error ? error.message : error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * 縮圖 + 自定輸出格式，回傳 Blob\r\n */\r\nexport async function ResizeBase64ToBlob(\r\n    base64Src: string,\r\n    maxWidth: number = 2048,\r\n    maxHeight: number = 2048,\r\n    imgQuality: number = 0.8,\r\n    imageMaxSizeMb: number = 8,\r\n    mimeType: string = 'image/jpeg',\r\n    isShowPopUp: boolean = true\r\n): Promise<Blob | null> {\r\n    try {\r\n        const img = await Common.Base64ToImage(base64Src);\r\n        const canvas = document.createElement('canvas');\r\n\r\n        // Resize width & height\r\n        if (img.width > img.height && img.width > maxWidth) {\r\n            img.height *= maxWidth / img.width;\r\n            img.width = maxWidth;\r\n        } else if (img.height > maxHeight) {\r\n            img.width *= maxHeight / img.height;\r\n            img.height = maxHeight;\r\n        }\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        const context = canvas.getContext('2d');\r\n        if (!context) {\r\n            throw new Error('Cannot get canvas 2D context.');\r\n        }\r\n\r\n        context.clearRect(0, 0, img.width, img.height);\r\n        context.drawImage(img, 0, 0, img.width, img.height);\r\n\r\n        // 轉成 Blob\r\n        const blob = await new Promise<Blob | null>((resolve) => {\r\n            canvas.toBlob((b) => resolve(b), mimeType, imgQuality);\r\n        });\r\n\r\n        if (!blob) {\r\n            throw new Error('Failed to create blob.');\r\n        }\r\n\r\n        // Check size\r\n        const fileSizeInBytes = blob.size;\r\n        const maxSize = imageMaxSizeMb * 1024 * 1024;\r\n        if (fileSizeInBytes > maxSize) {\r\n            if (isShowPopUp) {\r\n                simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', `很抱歉您上傳的照片大小超過${imageMaxSizeMb}MB請重新上傳，敬請見諒。`, [\r\n                    {\r\n                        id: 'confirm',\r\n                        type: SimplePopUpBtnType.callback,\r\n                        btnClass: 'btn-info',\r\n                        resolveParam: 'confirm',\r\n                        title: '確認'\r\n                    }\r\n                ]);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        return blob;\r\n    } catch (error) {\r\n        Common.ConsoleLog(error);\r\n        if (error instanceof Error) {\r\n            Common.ConsoleLog(error.message);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 取得base64 without base64Marker\r\n * @param data\r\n * @returns\r\n */\r\nexport const GetBase64Content = (data: string) => {\r\n    const base64Marker = ';base64,';\r\n    if (data.includes(base64Marker)) {\r\n        let base64Index = data.indexOf(base64Marker) + base64Marker.length;\r\n        return data.substring(base64Index);\r\n    }\r\n    return data;\r\n};\r\n\r\n/**\r\n * 計算 base64 字串的大小\r\n * @param base64String 原圖 base64\r\n * @returns 大小 (bytes)\r\n */\r\nexport function getBase64Size(base64String: string): number {\r\n    // 如果有 \"data:image/...\" 前綴，去掉\r\n    let base64Data = base64String;\r\n    const commaIndex = base64String.indexOf(',');\r\n    if (commaIndex !== -1) {\r\n        base64Data = base64String.substring(commaIndex + 1);\r\n    }\r\n\r\n    const padding = (base64Data.match(/=+$/) || [''])[0].length;\r\n    return (base64Data.length * 3) / 4 - padding;\r\n}\r\n\r\n/**\r\n * 將檔案轉換為 base64\r\n * @param file 檔案\r\n * @returns base64\r\n */\r\nexport const FileToBase64 = (file: Blob): Promise<string | any> => {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = (e: ProgressEvent<FileReader>) => {\r\n            resolve(e.target?.result);\r\n        };\r\n        reader.onerror = (error) => {\r\n            reject(error);\r\n        };\r\n    });\r\n};\r\n\r\n/**\r\n * 將 base64 轉換為圖片\r\n * @param base64String base64\r\n * @returns 圖片\r\n */\r\nexport const Base64ToImage = (base64String: string): Promise<HTMLImageElement> => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = window.document.createElement('img');\r\n        img.onload = () => resolve(img);\r\n        img.onerror = (error) => reject(new Error('Failed to load image from base64.' + error.toString()));\r\n        img.src = base64String;\r\n    });\r\n};\r\n","<style scoped>\r\n.content {\r\n    margin-left: 250px;\r\n    transition: margin-left 0.3s;\r\n}\r\n.content.expanded {\r\n    margin-left: 0;\r\n}\r\n\r\n.fade-in {\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease-in-out;\r\n}\r\n\r\n.fade-in.active {\r\n    opacity: 1;\r\n}\r\n</style>\r\n\r\n<template>\r\n    <div class=\"p-4 mt-5\">\r\n        <!-- top button  -->\r\n        <div\r\n            class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\"\r\n        >\r\n            <h1 class=\"h2\">{{ RouteUrlList.FileInfosManagement.label }}</h1>\r\n            <div class=\"btn-toolbar justify-content-end mb-3\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\r\n                <div class=\"btn-group me-2\" role=\"group\" aria-label=\"First group\">\r\n                    <!-- 新增搜尋輸入框 -->\r\n                    <div class=\"input-group ms-3\" style=\"max-width: 300px\">\r\n                        <span class=\"input-group-text\">\r\n                            <i class=\"bi bi-search\"></i>\r\n                        </span>\r\n                        <input\r\n                            type=\"text\"\r\n                            class=\"form-control\"\r\n                            placeholder=\"搜尋檔案名稱、序號...\"\r\n                            v-model=\"FileInfosData.searchQuery\"\r\n                            @keyup.enter=\"handleSearch\"\r\n                        />\r\n                        <button class=\"btn btn-esun-primary\" type=\"button\" @click=\"throttledHandleSearch\">搜尋</button>\r\n                        <button class=\"btn btn-esun-outline\" type=\"button\" @click=\"clearSearch\">清除</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"btn-group me-2\">\r\n                    <button class=\"btn btn-esun-primary ml-3\" @click=\"openCreateModal\">新增檔案資訊</button>\r\n                </div>\r\n\r\n                <!-- 新增檔案資訊Modal -->\r\n                <JsonFormModal\r\n                    v-if=\"createModal.showModal\"\r\n                    ref=\"createModalRef\"\r\n                    :myModal=\"createModal\"\r\n                    :modelValue=\"createFileData\"\r\n                    @submit=\"handleCreateSubmit\"\r\n                    @cancel=\"createModal.showModal = false\"\r\n                />\r\n\r\n                <!-- 更新Modal -->\r\n                <JsonFormModal\r\n                    v-if=\"updateModal.showModal\"\r\n                    ref=\"updateModalRef\"\r\n                    :myModal=\"updateModal\"\r\n                    v-model=\"updateFileData\"\r\n                    @submit=\"handleEditSubmit\"\r\n                    @cancel=\"updateModal.showModal = false\"\r\n                />\r\n\r\n                <BusinessSelectModal ref=\"businessSelectModal\" @select=\"handleBusinessSelect\" />\r\n                <FileCaseSelectModal ref=\"fileCaseSelectModal\" @select=\"handleFileCaseSelect\" />\r\n                <DocTypeSelectModal ref=\"docTypeSelectModal\" @select=\"handleDocTypeSelect\" />\r\n                <ImagePreviewModal ref=\"imagePreviewModal\" />\r\n\r\n                <!-- 切換顯示模式 -->\r\n                <div class=\"btn-group\" role=\"group\">\r\n                    <button\r\n                        class=\"btn btn-esun-outline\"\r\n                        :class=\"{ active: FileInfosData.displayMode === 'card' }\"\r\n                        @click=\"FileInfosData.displayMode = 'card'\"\r\n                    >\r\n                        卡片模式\r\n                    </button>\r\n                    <button\r\n                        class=\"btn btn-esun-outline\"\r\n                        :class=\"{ active: FileInfosData.displayMode === 'table' }\"\r\n                        @click=\"FileInfosData.displayMode = 'table'\"\r\n                    >\r\n                        表格模式\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 顯示資料 -->\r\n        <Pagination\r\n            v-if=\"FileInfosData.totalItems\"\r\n            v-model:modelValue=\"FileInfosData.currentPage\"\r\n            v-model:pageSize=\"FileInfosData.pageSize\"\r\n            :total-items=\"FileInfosData.totalItems\"\r\n            :go-to-page=\"LoadViewData\"\r\n        />\r\n        <div\r\n            v-if=\"FileInfosData.displayMode === 'card'\"\r\n            class=\"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 active\"\r\n            :class=\"{ 'fade-in': FileInfosData.currentPage }\"\r\n            ref=\"dataContainer\"\r\n        >\r\n            <div class=\"col\" v-for=\"item in FileInfosData.DataList\" :key=\"item.fileNo\">\r\n                <div class=\"card card-esun h-100 esun-animate-in\">\r\n                    <div class=\"card-body\">\r\n                        <h5 class=\"card-title\">{{ item.fileName }}</h5>\r\n                        <p class=\"card-text\">\r\n                            <strong>檔案序號:</strong> {{ item.fileNo }}<br />\r\n                            <strong>案件序號:</strong> {{ item.caseNo }}<br />\r\n                            <strong>文件類型:</strong> {{ item.docType || '-' }}<br />\r\n                            <strong>啟用狀態:</strong>\r\n                            <span :class=\"item.isActive ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isActive ? '啟用中' : '已停用' }} </span\r\n                            ><br />\r\n                            <strong>權限:</strong> {{ item.filePermission }}<br />\r\n                            <strong>檔案路徑:</strong> {{ item.filePath }}<br />\r\n                            <strong>定期刪除:</strong>\r\n                            <span :class=\"item.isUseRetention ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isUseRetention ? '啟用' : '未啟用' }} </span\r\n                            ><br />\r\n                            <strong>刪除時間:</strong> {{ item.deleteTime || '-' }}<br />\r\n                            <strong>上傳/覆蓋時間:</strong> {{ item.uploadDate || '-' }}<br />\r\n                            <strong>描述:</strong> {{ item.description || '-' }}\r\n                        </p>\r\n\r\n                        <!-- 操作選單 -->\r\n                        <div class=\"dropdown mt-3\">\r\n                            <button\r\n                                class=\"btn btn-esun-outline dropdown-toggle w-100\"\r\n                                type=\"button\"\r\n                                data-bs-toggle=\"dropdown\"\r\n                                aria-expanded=\"false\"\r\n                            >\r\n                                <i class=\"bi bi-gear me-1\"></i> 操作選單\r\n                            </button>\r\n                            <ul class=\"dropdown-menu w-100\">\r\n                                <li>\r\n                                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handlePreviewOrDownLoad(item)\">\r\n                                        <i class=\"bi bi-download me-1 text-info\"></i> 預覽或下載\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleEdit(item)\">\r\n                                        <i class=\"bi bi-pencil-square me-1 text-primary\"></i> 編輯\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleDelete(item)\">\r\n                                        <i class=\"bi bi-trash me-1 text-danger\"></i> 刪除\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div\r\n            v-else\r\n            :class=\"{ 'fade-in': FileInfosData.currentPage }\"\r\n            ref=\"dataContainer\"\r\n            style=\"overflow: auto\"\r\n            class=\"active\"\r\n        >\r\n            <table class=\"table table-bordered table-hover align-middle\">\r\n                <thead class=\"table-light\">\r\n                    <tr>\r\n                        <th>檔案名稱</th>\r\n                        <th>檔案序號</th>\r\n                        <th>案件序號</th>\r\n                        <th>文件類型</th>\r\n                        <th>啟用狀態</th>\r\n                        <th>權限</th>\r\n                        <th>檔案路徑</th>\r\n                        <th>定期刪除</th>\r\n                        <th>刪除時間</th>\r\n                        <th>上傳/覆蓋時間</th>\r\n                        <th>描述</th>\r\n                        <th>操作</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"item in FileInfosData.DataList\" :key=\"item.fileNo\">\r\n                        <td>{{ item.fileName }}</td>\r\n                        <td>{{ item.fileNo }}</td>\r\n                        <td>{{ item.caseNo }}</td>\r\n                        <td>{{ item.docType || '-' }}</td>\r\n                        <td>\r\n                            <span :class=\"item.isActive ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isActive ? '啟用中' : '已停用' }}\r\n                            </span>\r\n                        </td>\r\n                        <td>{{ item.filePermission }}</td>\r\n                        <td>{{ item.filePath }}</td>\r\n                        <td>\r\n                            <span :class=\"item.isUseRetention ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isUseRetention ? '啟用' : '未啟用' }}\r\n                            </span>\r\n                        </td>\r\n                        <td>{{ item.deleteTime || '-' }}</td>\r\n                        <td>{{ item.uploadDate || '-' }}</td>\r\n                        <td>{{ item.description || '-' }}</td>\r\n                        <td>\r\n                            <!-- 操作選單 -->\r\n                            <div class=\"dropdown\">\r\n                                <button\r\n                                    class=\"btn btn-esun-outline dropdown-toggle btn-sm\"\r\n                                    type=\"button\"\r\n                                    data-bs-toggle=\"dropdown\"\r\n                                    aria-expanded=\"false\"\r\n                                >\r\n                                    <i class=\"bi bi-gear me-1\"></i> 操作\r\n                                </button>\r\n                                <ul class=\"dropdown-menu\">\r\n                                    <li>\r\n                                        <a\r\n                                            class=\"dropdown-item\"\r\n                                            href=\"#\"\r\n                                            @click.prevent=\"handlePreviewOrDownLoad(item)\"\r\n                                        >\r\n                                            <i class=\"bi bi-pencil-square me-1 text-primary\"></i> 預覽或下載\r\n                                        </a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleEdit(item)\">\r\n                                            <i class=\"bi bi-pencil-square me-1 text-primary\"></i> 編輯\r\n                                        </a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleDelete(item)\">\r\n                                            <i class=\"bi bi-trash me-1 text-danger\"></i> 刪除\r\n                                        </a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <Pagination\r\n            v-if=\"FileInfosData.totalItems\"\r\n            v-model:modelValue=\"FileInfosData.currentPage\"\r\n            v-model:pageSize=\"FileInfosData.pageSize\"\r\n            :total-items=\"FileInfosData.totalItems\"\r\n            :go-to-page=\"LoadViewData\"\r\n        />\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch, computed, nextTick, reactive } from 'vue';\r\ndefineProps<{ collapsed: boolean; paginationType?: 'client' | 'server' }>();\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\nimport * as Common from '@/libs/Common';\r\nimport type { FileInfos } from '@/models/DTO/FileInfos';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport JsonFormModal from '@/components/modal/JsonFormModal/JsonFormModal.vue';\r\nimport { GetCreateFileInfosModal, GetDefaultFormData, type FileInfosFormData } from './CreateFileInfosModal';\r\nimport {\r\n    GetUpdateFileInfosModal,\r\n    GetDefaultUpdateFormData,\r\n    type UpdateFileInfosFormData\r\n} from './UpdateFileInfosModal';\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\nimport { getFieldsGridGroupById, type MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport { RouteUrlList } from '@/libs/RouteList';\r\nimport BusinessSelectModal from './BusinessSelectModal.vue';\r\nimport FileCaseSelectModal from './FileCaseSelectModal.vue';\r\nimport DocTypeSelectModal from './DocTypeSelectModal.vue';\r\nimport ImagePreviewModal from './ImagePreviewModal.vue';\r\nimport {\r\n    SimplePopUp,\r\n    SimplePopUpBtnType,\r\n    SimplePopUpModalType,\r\n    SimplePopUpSize,\r\n    type SimplePopupResolveResult\r\n} from '@/libs/SimplePopUp';\r\n\r\ninterface IFileInfosData {\r\n    DataList: FileInfos[];\r\n    searchQuery: string;\r\n    currentPage: number;\r\n    pageSize: number;\r\n    totalItems: number;\r\n    displayMode: 'card' | 'table';\r\n}\r\nconst FileInfosData = reactive<IFileInfosData>({\r\n    DataList: [],\r\n    searchQuery: '',\r\n    currentPage: 1,\r\n    pageSize: 10,\r\n    totalItems: 0,\r\n    displayMode: 'card'\r\n});\r\n\r\n/**\r\n * @todo 載入資料 - 使用後端分頁\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        // 使用後端分頁API\r\n        const response = await API.FileInfosManagementViewData({\r\n            pageNumber: FileInfosData.currentPage,\r\n            pageSize: FileInfosData.pageSize,\r\n            searchQuery: FileInfosData.searchQuery\r\n        });\r\n\r\n        if (response.status && response.result?.items) {\r\n            FileInfosData.DataList = response.result.items;\r\n            FileInfosData.totalItems = response.result.totalCount || 0;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching fileInfos:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n};\r\n\r\nonMounted(async () => {\r\n    await LoadViewData();\r\n});\r\n\r\nwatch(\r\n    () => ({\r\n        currentPage: FileInfosData.currentPage,\r\n        pageSize: FileInfosData.pageSize\r\n    }),\r\n    () => {\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\n/**\r\n * 處理預覽或下載檔案\r\n * @param item 檔案資訊\r\n */\r\nasync function handlePreviewOrDownLoad(item: FileInfos) {\r\n    try {\r\n        const fileName = item.fileName.toLowerCase();\r\n        const isImage = Common.IsImageFile(fileName);\r\n\r\n        if (isImage) {\r\n            // 圖片檔案：顯示預覽模態框\r\n            imagePreviewModal.value?.openModal(item);\r\n        } else {\r\n            // 其他檔案：直接下載\r\n            await downloadFile(item);\r\n        }\r\n    } catch (error) {\r\n        console.error('處理檔案預覽/下載時發生錯誤:', error);\r\n        simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', '處理檔案時發生錯誤，請稍後再試。');\r\n    }\r\n}\r\n\r\n/**\r\n * 下載檔案\r\n * @param item 檔案資訊\r\n */\r\nasync function downloadFile(item: FileInfos) {\r\n    try {\r\n        // 顯示載入中的提示\r\n        const loadingAlert = simplePopUp.showAlert(SimplePopUpModalType.Info, '下載中', '檔案下載中，請稍候...');\r\n\r\n        // 獲取檔案 blob\r\n        const blob = await API.GetFileContent({ business: item.business, fileNo: item.fileNo });\r\n\r\n        // 創建下載連結\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = item.fileName;\r\n\r\n        // 觸發下載\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        // 清理 URL\r\n        URL.revokeObjectURL(url);\r\n\r\n        // 關閉載入提示並顯示成功訊息\r\n        await simplePopUp.showAlert(SimplePopUpModalType.Success, '下載完成', `檔案「${item.fileName}」下載完成！`);\r\n    } catch (error) {\r\n        console.error('下載檔案失敗:', error);\r\n        await simplePopUp.showAlert(\r\n            SimplePopUpModalType.Warning,\r\n            '下載失敗',\r\n            `檔案「${item.fileName}」下載失敗，請稍後再試。`\r\n        );\r\n    }\r\n}\r\n// ------------------------------------------------------------------------------------------- //\r\n\r\n// 建立 FileInfos 相關\r\nconst createFileData = ref<FileInfosFormData>(GetDefaultFormData());\r\nconst businessSelectModal = ref<InstanceType<typeof BusinessSelectModal>>();\r\nconst fileCaseSelectModal = ref<InstanceType<typeof FileCaseSelectModal>>();\r\nconst docTypeSelectModal = ref<InstanceType<typeof DocTypeSelectModal>>();\r\nconst imagePreviewModal = ref<InstanceType<typeof ImagePreviewModal>>();\r\nconst createModal = ref<MyModal>(GetCreateFileInfosModal());\r\nconst createModalRef = ref<InstanceType<typeof JsonFormModal>>();\r\n\r\n// 更新 FileInfos 相關\r\nconst updateFileData = ref<UpdateFileInfosFormData>(GetDefaultUpdateFormData());\r\nconst updateModal = ref<MyModal>(GetUpdateFileInfosModal());\r\nconst updateModalRef = ref<InstanceType<typeof JsonFormModal>>();\r\n\r\n// 初始化 SimplePopUp\r\nconst simplePopUp = new SimplePopUp();\r\n\r\nimport * as ImageHelper from '@/libs/ImageHelper';\r\nimport { create } from 'lodash';\r\nasync function openCreateModal() {\r\n    // 重置表單資料\r\n    createFileData.value = GetDefaultFormData();\r\n\r\n    // 設定文件上傳的 callback 來自動填入檔案名稱\r\n    const fileUploadField = getFieldsGridGroupById(createModal.value, 'fileUpload');\r\n    if (fileUploadField && fileUploadField.type === 'file') {\r\n        fileUploadField.onInputCallback = async (value: File | File[] | null) => {\r\n            // 由於 multiple: false，所以應該是單個檔案\r\n            const file = Array.isArray(value) ? value[0] : value;\r\n            if (file && Common.IsImageFile(file.name)) {\r\n                // 縮圖 + 自定輸出格式  8MB Check\r\n                const src = await ImageHelper.ResizeImageBlobToBase64(file, 4096, 4096, 0.8, 8, 'image/jpeg', true);\r\n                if (!src) {\r\n                    return;\r\n                }\r\n                let fileSrc = (await Common.GetBase64Content(src)) ?? '';\r\n                createFileData.value.fileSrc = fileSrc;\r\n                createFileData.value.fileName = file.name;\r\n            } else if (file && !Common.IsImageFile(file.name)) {\r\n                let fileSrc = (await Common.FileToBase64(file)) ?? '';\r\n                createFileData.value.fileSrc = Common.GetBase64Content(fileSrc);\r\n                createFileData.value.fileName = file.name;\r\n            } else {\r\n                createFileData.value.fileSrc = '';\r\n                createFileData.value.fileName = '';\r\n            }\r\n        };\r\n    }\r\n\r\n    // 設定業務別欄位的點擊事件\r\n    const businessField = getFieldsGridGroupById(createModal.value, 'business');\r\n    if (businessField && businessField.type === 'text') {\r\n        businessField.onClickCallback = () => {\r\n            // 如果欄位被停用，不執行任何操作\r\n            if (businessField.disabled) {\r\n                //\r\n                simplePopUp.showAlert(SimplePopUpModalType.Warning, '提醒', '業務別和檔案案件只能選擇一項');\r\n                return;\r\n            }\r\n            // 打開業務別選擇模態框\r\n            businessSelectModal.value?.openModal();\r\n        };\r\n        businessField.onClearInput = () => {\r\n            // 雙擊清除業務別\r\n            clearFieldAndUpdateState('business', 'create');\r\n        };\r\n    }\r\n\r\n    // 設定文件類別序號欄位的點擊事件\r\n    const caseNoField = getFieldsGridGroupById(createModal.value, 'caseNo');\r\n    // createModal.value.fieldGroups[0].fields.find((f: any) => f.modelId === 'caseNo');\r\n    if (caseNoField && caseNoField.type === 'text') {\r\n        caseNoField.onClickCallback = () => {\r\n            // 如果欄位被停用，不執行任何操作\r\n            if (caseNoField.disabled) {\r\n                simplePopUp.showAlert(SimplePopUpModalType.Warning, '提醒', '業務別和檔案案件只能選擇一項');\r\n                return;\r\n            }\r\n            // 打開案件選擇模態框\r\n            fileCaseSelectModal.value?.openModal();\r\n        };\r\n        caseNoField.onClearInput = () => {\r\n            // 雙擊清除檔案案件\r\n            clearFieldAndUpdateState('caseNo', 'create');\r\n        };\r\n    }\r\n\r\n    // 設定文件類型欄位的點擊事件\r\n    const docTypeField = getFieldsGridGroupById(createModal.value, 'docType');\r\n    if (docTypeField && docTypeField.type === 'text') {\r\n        docTypeField.onClickCallback = () => {\r\n            // 打開文件類型選擇模態框\r\n            docTypeSelectModal.value?.openModal();\r\n        };\r\n    }\r\n\r\n    // 設定定期刪除相關欄位的監聽事件\r\n    const isUseRetentionField = getFieldsGridGroupById(createModal.value, 'isUseRetention');\r\n    if (isUseRetentionField && isUseRetentionField.type === 'radio') {\r\n        isUseRetentionField.onChangeCallback = (value: string | number | boolean) => {\r\n            // 直接使用 DOM 操作來啟用/停用欄位\r\n            const boolValue = value === true || value === 'true' || value === 1 || value === '1';\r\n\r\n            setTimeout(() => {\r\n                const deleteTimeInput = document.querySelector('#deleteTime') as HTMLInputElement;\r\n                const uploadDateInput = document.querySelector('#uploadDate') as HTMLInputElement;\r\n\r\n                if (deleteTimeInput) {\r\n                    deleteTimeInput.disabled = !boolValue;\r\n                }\r\n                if (uploadDateInput) {\r\n                    uploadDateInput.disabled = !boolValue;\r\n                }\r\n            }, 50);\r\n        };\r\n    }\r\n\r\n    createModal.value.showModal = true;\r\n\r\n    // 初始化欄位狀態\r\n    updateFieldDisabledState('create');\r\n    nextTick();\r\n}\r\n\r\n/**\r\n * 處理業務別選擇\r\n */\r\nfunction handleBusinessSelect(business: string) {\r\n    // 檢查哪個模態框正在顯示\r\n    if (createModal.value.showModal) {\r\n        createFileData.value.business = business;\r\n        // 清空檔案案件並禁用\r\n        createFileData.value.caseNo = '';\r\n        updateFieldDisabledState('create');\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        createModalRef.value?.clearFieldError('business');\r\n        createModalRef.value?.clearFieldError('caseNo');\r\n    } else if (updateModal.value.showModal) {\r\n        updateFileData.value.business = business;\r\n        // 清空檔案案件並禁用\r\n        updateFileData.value.caseNo = '';\r\n        updateFieldDisabledState('update');\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        updateModalRef.value?.clearFieldError('business');\r\n        updateModalRef.value?.clearFieldError('caseNo');\r\n    }\r\n}\r\n\r\n/**\r\n * 處理檔案案件選擇\r\n */\r\nfunction handleFileCaseSelect(caseNo: string) {\r\n    // 檢查哪個模態框正在顯示\r\n    if (createModal.value.showModal) {\r\n        createFileData.value.caseNo = caseNo;\r\n        // 清空業務別並禁用\r\n        createFileData.value.business = '';\r\n        updateFieldDisabledState('create');\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        createModalRef.value?.clearFieldError('caseNo');\r\n        createModalRef.value?.clearFieldError('business');\r\n    } else if (updateModal.value.showModal) {\r\n        updateFileData.value.caseNo = caseNo;\r\n        // 清空業務別並禁用\r\n        updateFileData.value.business = '';\r\n        updateFieldDisabledState('update');\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        updateModalRef.value?.clearFieldError('caseNo');\r\n        updateModalRef.value?.clearFieldError('business');\r\n    }\r\n}\r\n\r\n/**\r\n * 更新欄位的啟用/停用狀態\r\n */\r\nfunction updateFieldDisabledState(modalType: 'create' | 'update') {\r\n    const modal = modalType === 'create' ? createModal.value : updateModal.value;\r\n    const formData = modalType === 'create' ? createFileData.value : updateFileData.value;\r\n\r\n    // 獲取business和caseNo欄位\r\n    const businessField = document.querySelector('#business') as HTMLInputElement;\r\n    const caseNoField = document.querySelector('#caseNo') as HTMLInputElement;\r\n\r\n    if (businessField && caseNoField) {\r\n        // 如果選擇了business，則禁用caseNo\r\n        if (formData.business) {\r\n            caseNoField.disabled = true;\r\n            businessField.disabled = false;\r\n        }\r\n        // 如果選擇了caseNo，則禁用business\r\n        else if (formData.caseNo) {\r\n            businessField.disabled = true;\r\n            caseNoField.disabled = false;\r\n        }\r\n        // 如果都沒選擇，則都啟用\r\n        else {\r\n            businessField.disabled = false;\r\n            caseNoField.disabled = false;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 清除business或caseNo的值並更新狀態\r\n */\r\nfunction clearFieldAndUpdateState(fieldType: 'business' | 'caseNo', modalType: 'create' | 'update') {\r\n    const formData = modalType === 'create' ? createFileData.value : updateFileData.value;\r\n    const modalRef = modalType === 'create' ? createModalRef.value : updateModalRef.value;\r\n\r\n    if (fieldType === 'business') {\r\n        formData.business = '';\r\n        modalRef?.clearFieldError('business');\r\n    } else {\r\n        formData.caseNo = '';\r\n        modalRef?.clearFieldError('caseNo');\r\n    }\r\n\r\n    updateFieldDisabledState(modalType);\r\n}\r\n\r\n/**\r\n * 處理文件類型選擇\r\n */\r\nfunction handleDocTypeSelect(docType: number, docName: string) {\r\n    // 檢查哪個模態框正在顯示\r\n    if (createModal.value.showModal) {\r\n        createFileData.value.docType = docType;\r\n        createFileData.value.docName = docName;\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        createModalRef.value?.clearFieldError('docType');\r\n    } else if (updateModal.value.showModal) {\r\n        updateFileData.value.docType = docType;\r\n        updateFileData.value.docName = docName;\r\n        // 使用 JsonFormModal 的方法清除錯誤訊息\r\n        updateModalRef.value?.clearFieldError('docType');\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 新增檔案資訊提交處理\r\n * @param formData\r\n */\r\nasync function handleCreateSubmit(formData: Record<string, any>) {\r\n    try {\r\n        const fileInfoData = formData as FileInfosFormData;\r\n\r\n        // 檢查是否有上傳檔案\r\n        if (fileInfoData.fileUpload) {\r\n            console.log('上傳的檔案:', fileInfoData.fileUpload);\r\n            console.log('檔案名稱:', fileInfoData.fileUpload.name);\r\n            console.log('檔案大小:', fileInfoData.fileUpload.size);\r\n            console.log('檔案類型:', fileInfoData.fileUpload.type);\r\n\r\n            if (!fileInfoData.fileSrc) {\r\n                // 根據檔案類型決定處理方式\r\n                try {\r\n                    let fileSrc: string;\r\n\r\n                    // 判斷是否為圖片檔案\r\n                    const fileName = fileInfoData.fileUpload.name.toLowerCase();\r\n\r\n                    if (Common.IsImageFile(fileName)) {\r\n                        // 圖片檔案：進行壓縮處理\r\n                        console.log('處理圖片檔案:', fileName);\r\n                        const processedImage = await ImageHelper.ResizeImageBlobToBase64(\r\n                            fileInfoData.fileUpload,\r\n                            4096, // maxWidth\r\n                            4096, // maxHeight\r\n                            0.8, // quality\r\n                            8, // maxSizeMB\r\n                            'image/jpeg', // outputFormat\r\n                            false // allowNonImage - 只處理圖片\r\n                        );\r\n\r\n                        if (!processedImage) {\r\n                            await simplePopUp.showAlert(\r\n                                SimplePopUpModalType.Warning,\r\n                                '錯誤',\r\n                                '圖片處理失敗，請檢查圖片格式或大小'\r\n                            );\r\n                            return;\r\n                        }\r\n\r\n                        // 移除base64 marker\r\n                        fileSrc = Common.GetBase64Content(processedImage);\r\n                        fileInfoData.fileSrc = fileSrc;\r\n                    } else {\r\n                        // 非圖片檔案：直接轉Base64\r\n                        console.log('處理非圖片檔案:', fileName);\r\n                        fileSrc = (await Common.FileToBase64(fileInfoData.fileUpload)) ?? '';\r\n                        fileInfoData.fileSrc = Common.GetBase64Content(fileSrc);\r\n                    }\r\n                } catch (error) {\r\n                    console.error('檔案處理失敗:', error);\r\n                    await simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', '檔案處理失敗，請稍後再試');\r\n                    return;\r\n                }\r\n            } else {\r\n                fileInfoData.fileSrc = (await Common.GetBase64Content(fileInfoData.fileSrc)) ?? '';\r\n            }\r\n        }\r\n\r\n        // 實作實際的檔案上傳 API 呼叫\r\n        const response = await API.FileInfosManagementCreate({\r\n            business: fileInfoData.business,\r\n            caseNo: fileInfoData.caseNo,\r\n            docType: fileInfoData.docType || 1,\r\n            fileName: fileInfoData.fileName,\r\n            fileSrc: fileInfoData.fileSrc,\r\n            isActive: fileInfoData.isActive,\r\n            filePermission: fileInfoData.filePermission,\r\n            description: fileInfoData.description,\r\n            isUseRetention: fileInfoData.isUseRetention,\r\n            deleteTime: fileInfoData.deleteTime,\r\n            uploadDate: fileInfoData.uploadDate,\r\n            isForceFileUpload: fileInfoData.isForceFileUpload\r\n        });\r\n\r\n        if (response.status) {\r\n            let successMessage = '檔案資訊新增成功！';\r\n\r\n            // 如果回傳結果包含詳細資訊，提供更詳細的訊息\r\n            if (response.result && response.result.fileInfo && response.result.fileInfo.length > 0) {\r\n                const fileInfo = response.result.fileInfo[0];\r\n                if (fileInfo.processOk) {\r\n                    successMessage += `\\n檔案序號: ${fileInfo.fileNo}`;\r\n                    if (fileInfo.moveFileTask) {\r\n                        const task = fileInfo.moveFileTask;\r\n                        if (task.insertOrUpdateRes && task.moveToNasRes) {\r\n                            successMessage += '\\n檔案已成功上傳至系統';\r\n                        } else if (!task.insertOrUpdateRes) {\r\n                            successMessage += '\\n警告: 資料庫操作失敗';\r\n                        } else if (!task.moveToNasRes) {\r\n                            successMessage += '\\n警告: 檔案移動失敗';\r\n                        }\r\n                    }\r\n                } else {\r\n                    successMessage += '\\n注意: 檔案處理過程中發生問題';\r\n                }\r\n            }\r\n\r\n            await simplePopUp.showAlert(SimplePopUpModalType.Success, '成功', successMessage);\r\n            createModal.value.showModal = false;\r\n            // 重新載入資料\r\n            await LoadViewData();\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error creating file info:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n}\r\n\r\n// 搜尋檔案名稱 - 使用後端分頁，按鈕觸發\r\nconst handleSearch = async () => {\r\n    // 重置頁碼到第一頁\r\n    FileInfosData.currentPage = 1;\r\n    // 重新載入資料\r\n    await LoadViewData();\r\n};\r\n\r\n// 節流處理LoadViewData，避免按鈕被連續點擊\r\nconst throttledHandleSearch = Common.Throttle(handleSearch, 300);\r\n\r\nconst clearSearch = async () => {\r\n    FileInfosData.searchQuery = '';\r\n    // 重置頁碼到第一頁\r\n    FileInfosData.currentPage = 1;\r\n    // 重新載入資料\r\n    await LoadViewData();\r\n};\r\n\r\n/**\r\n * 處理編輯檔案資訊\r\n */\r\nasync function handleEdit(item: FileInfos) {\r\n    // 複製資料避免直接修改原始資料\r\n    updateFileData.value = {\r\n        fileNo: item.fileNo,\r\n        business: item.business,\r\n        caseNo: item.caseNo,\r\n        docType: item.docType || null,\r\n        docName: item.docName, // 這裡可能需要根據 docType 查詢名稱\r\n        isForceFileUpload: item.isForceFileUpload,\r\n        fileUpload: null,\r\n        fileSrc: null,\r\n        fileName: item.fileName,\r\n        isActive: item.isActive,\r\n        filePermission: item.filePermission,\r\n        description: item.description,\r\n        filePath: item.filePath,\r\n        isUseRetention: item.isUseRetention,\r\n        deleteTime: item.deleteTime,\r\n        uploadDate: item.uploadDate\r\n    };\r\n\r\n    // 設定文件上傳的 callback 來自動填入檔案名稱\r\n    const fileUploadField = getFieldsGridGroupById(updateModal.value, 'fileUpload');\r\n    if (fileUploadField && fileUploadField.type === 'file') {\r\n        fileUploadField.onInputCallback = async (value: File | File[] | null) => {\r\n            // 由於 multiple: false，所以應該是單個檔案\r\n            const file = Array.isArray(value) ? value[0] : value;\r\n            if (file && Common.IsImageFile(file.name)) {\r\n                // 縮圖 + 自定輸出格式  8MB Check\r\n                const src = await ImageHelper.ResizeImageBlobToBase64(file, 4096, 4096, 0.8, 8, 'image/jpeg', true);\r\n                if (!src) {\r\n                    return;\r\n                }\r\n                updateFileData.value.fileSrc = src;\r\n                updateFileData.value.fileName = file.name;\r\n            } else if (file && !Common.IsImageFile(file.name)) {\r\n                updateFileData.value.fileSrc = await Common.FileToBase64(file);\r\n                updateFileData.value.fileName = file.name;\r\n            } else {\r\n                updateFileData.value.fileSrc = '';\r\n                updateFileData.value.fileName = '';\r\n            }\r\n        };\r\n    }\r\n\r\n    // 設定業務別欄位的點擊事件\r\n    const businessFieldUpdate = getFieldsGridGroupById(updateModal.value, 'business');\r\n    if (businessFieldUpdate && businessFieldUpdate.type === 'text') {\r\n        businessFieldUpdate.onClickCallback = () => {\r\n            // 如果欄位被停用，不執行任何操作\r\n            if (businessFieldUpdate.disabled) {\r\n                return;\r\n            }\r\n            businessSelectModal.value?.openModal();\r\n        };\r\n        businessFieldUpdate.onClearInput = () => {\r\n            // 雙擊清除業務別\r\n            clearFieldAndUpdateState('business', 'update');\r\n        };\r\n    }\r\n\r\n    // 設定文件類別序號欄位的點擊事件\r\n    const caseNoFieldUpdate = getFieldsGridGroupById(updateModal.value, 'caseNo');\r\n    if (caseNoFieldUpdate && caseNoFieldUpdate.type === 'text') {\r\n        caseNoFieldUpdate.onClickCallback = () => {\r\n            // 如果欄位被停用，不執行任何操作\r\n            if (caseNoFieldUpdate.disabled) return;\r\n            fileCaseSelectModal.value?.openModal();\r\n        };\r\n        caseNoFieldUpdate.onClearInput = () => {\r\n            // 雙擊清除檔案案件\r\n            clearFieldAndUpdateState('caseNo', 'update');\r\n        };\r\n    }\r\n\r\n    // 設定文件類型欄位的點擊事件\r\n    const docTypeFieldUpdate = updateModal.value.fieldGroups[0].fields.find((f: any) => f.modelId === 'docType');\r\n    if (docTypeFieldUpdate && docTypeFieldUpdate.type === 'text') {\r\n        docTypeFieldUpdate.onClickCallback = () => {\r\n            docTypeSelectModal.value?.openModal();\r\n        };\r\n    }\r\n\r\n    // 設定定期刪除相關欄位的監聽事件\r\n    const isUseRetentionField = updateModal.value.fieldGroups[1].fields.find(\r\n        (f: any) => f.modelId === 'isUseRetention'\r\n    );\r\n    if (isUseRetentionField && isUseRetentionField.type === 'radio') {\r\n        isUseRetentionField.onChangeCallback = (value: string | boolean | number) => {\r\n            // 直接使用 DOM 操作來啟用/停用欄位\r\n            const boolValue = value === true || value === 'true' || value === 1 || value === '1';\r\n            setTimeout(() => {\r\n                const deleteTimeInput = document.querySelector('#deleteTime') as HTMLInputElement;\r\n                const uploadDateInput = document.querySelector('#uploadDate') as HTMLInputElement;\r\n\r\n                if (deleteTimeInput) {\r\n                    deleteTimeInput.disabled = !boolValue;\r\n                }\r\n                if (uploadDateInput) {\r\n                    uploadDateInput.disabled = !boolValue;\r\n                }\r\n            }, 50);\r\n        };\r\n    }\r\n\r\n    updateModal.value.showModal = true;\r\n\r\n    // 初始化欄位狀態\r\n    updateFieldDisabledState('update');\r\n    nextTick();\r\n}\r\n\r\n/**\r\n * 處理編輯提交\r\n */\r\nasync function handleEditSubmit(formData: Record<string, any>) {\r\n    try {\r\n        const updateData = formData as UpdateFileInfosFormData;\r\n\r\n        // 檢查是否有上傳新檔案\r\n        // 檢查是否有上傳檔案\r\n        if (updateData.fileUpload) {\r\n            console.log('上傳的檔案:', updateData.fileUpload);\r\n            console.log('檔案名稱:', updateData.fileUpload.name);\r\n            console.log('檔案大小:', updateData.fileUpload.size);\r\n            console.log('檔案類型:', updateData.fileUpload.type);\r\n\r\n            if (!updateData.fileSrc) {\r\n                // 根據檔案類型決定處理方式\r\n                try {\r\n                    let fileSrc: string;\r\n\r\n                    // 判斷是否為圖片檔案\r\n                    const fileName = updateData.fileUpload.name.toLowerCase();\r\n\r\n                    if (Common.IsImageFile(fileName)) {\r\n                        // 圖片檔案：進行壓縮處理\r\n                        console.log('處理圖片檔案:', fileName);\r\n                        const processedImage = await ImageHelper.ResizeImageBlobToBase64(\r\n                            updateData.fileUpload,\r\n                            4096, // maxWidth\r\n                            4096, // maxHeight\r\n                            0.8, // quality\r\n                            8, // maxSizeMB\r\n                            'image/jpeg', // outputFormat\r\n                            false // allowNonImage - 只處理圖片\r\n                        );\r\n\r\n                        if (!processedImage) {\r\n                            await simplePopUp.showAlert(\r\n                                SimplePopUpModalType.Warning,\r\n                                '錯誤',\r\n                                '圖片處理失敗，請檢查圖片格式或大小'\r\n                            );\r\n                            return;\r\n                        }\r\n\r\n                        // 移除base64 marker\r\n                        fileSrc = ImageHelper.GetBase64Content(processedImage);\r\n                    } else {\r\n                        // 非圖片檔案：直接轉Base64\r\n                        console.log('處理非圖片檔案:', fileName);\r\n                        updateData.fileSrc = (await Common.FileToBase64(updateData.fileUpload)) ?? '';\r\n                    }\r\n                } catch (error) {\r\n                    console.error('檔案處理失敗:', error);\r\n                    await simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', '檔案處理失敗，請稍後再試');\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (updateData.fileUpload) {\r\n            console.log('更新時上傳的檔案:', updateData.fileUpload);\r\n            console.log('檔案名稱:', updateData.fileUpload.name);\r\n            console.log('檔案大小:', updateData.fileUpload.size);\r\n            console.log('檔案類型:', updateData.fileUpload.type);\r\n\r\n            // 這裡可以實作檔案上傳邏輯\r\n            // 例如：使用 FormData 上傳檔案到後端\r\n            const uploadData = new FormData();\r\n            uploadData.append('file', updateData.fileUpload);\r\n            uploadData.append('fileName', updateData.fileName);\r\n            uploadData.append('caseNo', updateData.caseNo);\r\n            uploadData.append('fileNo', updateData.fileNo);\r\n            uploadData.append('isActive', updateData.isActive?.toString() ?? '');\r\n            uploadData.append('isForceFileUpload', updateData.isForceFileUpload?.toString() ?? '');\r\n            uploadData.append('isUseRetention', updateData.isUseRetention?.toString() ?? '');\r\n            uploadData.append('filePermission', updateData.filePermission?.toString() ?? 0);\r\n\r\n            if (updateData.description) {\r\n                uploadData.append('description', updateData.description);\r\n            }\r\n            if (updateData.deleteTime) {\r\n                uploadData.append('deleteTime', updateData.deleteTime);\r\n            }\r\n            if (updateData.uploadDate) {\r\n                uploadData.append('uploadDate', updateData.uploadDate);\r\n            }\r\n\r\n            // TODO: 實作實際的檔案上傳 API 呼叫\r\n            // await API.updateFileWithUpload(uploadData);\r\n        }\r\n\r\n        const response = await API.FileInfosManagementUpdate({\r\n            business: updateData.business,\r\n            caseNo: updateData.caseNo,\r\n            docType: updateData.docType || 1,\r\n            fileSrc: updateData.fileSrc ? Common.GetBase64Content(updateData.fileSrc) : '',\r\n            fileNo: updateData.fileNo,\r\n            fileName: updateData.fileName,\r\n            isActive: updateData.isActive,\r\n            filePermission: updateData.filePermission,\r\n            description: updateData.description,\r\n            isUseRetention: updateData.isUseRetention,\r\n            deleteTime: updateData.deleteTime\r\n        });\r\n\r\n        if (response.status) {\r\n            let successMessage = '檔案資訊新增成功！';\r\n\r\n            // 如果回傳結果包含詳細資訊，提供更詳細的訊息\r\n            if (response.result && response.result.fileInfo && response.result.fileInfo.length > 0) {\r\n                const fileInfo = response.result.fileInfo[0];\r\n                if (fileInfo.processOk) {\r\n                    successMessage += `\\n檔案序號: ${fileInfo.fileNo}`;\r\n                    if (fileInfo.moveFileTask) {\r\n                        const task = fileInfo.moveFileTask;\r\n                        if (task.insertOrUpdateRes && task.moveToNasRes) {\r\n                            successMessage += '\\n檔案已成功上傳至系統';\r\n                        } else if (!task.insertOrUpdateRes) {\r\n                            successMessage += '\\n警告: 資料庫操作失敗';\r\n                        } else if (!task.moveToNasRes) {\r\n                            successMessage += '\\n警告: 檔案移動失敗';\r\n                        }\r\n                    }\r\n                } else {\r\n                    successMessage += '\\n注意: 檔案處理過程中發生問題';\r\n                }\r\n            }\r\n\r\n            await simplePopUp.showAlert(SimplePopUpModalType.Success, '成功', successMessage);\r\n            updateModal.value.showModal = false;\r\n            // 重新載入資料\r\n            await LoadViewData();\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('更新檔案資訊時發生錯誤:', error);\r\n        await simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', '更新檔案資訊時發生錯誤，請稍後再試。');\r\n    }\r\n}\r\n\r\n/**\r\n * 處理刪除檔案資訊\r\n */\r\nasync function handleDelete(item: FileInfos) {\r\n    const action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n        SimplePopUpModalType.Warning,\r\n        '確認刪除',\r\n        `確定要刪除檔案「${item.fileName}」嗎？此操作無法復原。`,\r\n        [\r\n            {\r\n                id: 'cancel',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-esun-outline',\r\n                resolveParam: 'cancel',\r\n                title: '取消'\r\n            },\r\n            {\r\n                id: 'confirm',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-danger',\r\n                resolveParam: 'confirm',\r\n                title: '確定刪除'\r\n            }\r\n        ]\r\n    );\r\n\r\n    if (action.param === 'confirm') {\r\n        try {\r\n            const response = await API.FileInfosManagementDelete(item.fileNo);\r\n\r\n            if (response.status) {\r\n                await simplePopUp.showAlert(SimplePopUpModalType.Success, '成功', '檔案資訊刪除成功！');\r\n                // 重新載入資料\r\n                await LoadViewData();\r\n            } else {\r\n                ApiClient.HandleGeneralRespError(response);\r\n            }\r\n        } catch (error) {\r\n            console.error('刪除檔案資訊時發生錯誤:', error);\r\n            await simplePopUp.showAlert(SimplePopUpModalType.Warning, '錯誤', '刪除檔案資訊時發生錯誤，請稍後再試。');\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import type { MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport * as Common from '@/libs/Common';\r\n\r\n/**\r\n * 建立 FileInfos Modal 結構\r\n */\r\nexport const GetCreateFileInfosModal = (): MyModal => {\r\n    return {\r\n        modalId: 'fileInfosModal',\r\n        title: '新增檔案資訊',\r\n        showModal: false,\r\n        size: 'modal-xl',\r\n        staticBackdrop: true,\r\n        scrollable: true,\r\n        fieldGroups: [\r\n            {\r\n                title: '',\r\n                gridClass: 'col-6',\r\n                fields: [\r\n                    {\r\n                        modelId: 'business',\r\n                        name: 'business',\r\n                        type: 'text',\r\n                        label: '選擇業務別',\r\n                        placeholder: '請選擇業務別',\r\n                        required: false,\r\n                        maxlength: 25,\r\n                        readonly: true,\r\n                        onSubmitCheckCallback: (value: string, formData: any) => {\r\n                            // 驗證business和caseNo必須至少有一項有值\r\n                            if (!value && !formData.caseNo) {\r\n                                return '業務別和檔案案件必須至少選擇一項';\r\n                            }\r\n                            return '';\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'caseNo',\r\n                        name: 'caseNo',\r\n                        type: 'text',\r\n                        label: '選擇檔案案件',\r\n                        placeholder: '請選擇檔案案件',\r\n                        required: false,\r\n                        maxlength: 36,\r\n                        readonly: true,\r\n                        onSubmitCheckCallback: (value: string, formData: any) => {\r\n                            // 驗證business和caseNo必須至少有一項有值\r\n                            if (!value && !formData.business) {\r\n                                return '業務別和檔案案件必須至少選擇一項';\r\n                            }\r\n                            return '';\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'docType',\r\n                        name: 'docType',\r\n                        type: 'text',\r\n                        label: '選擇文件類型',\r\n                        placeholder: '請選擇文件類型',\r\n                        required: true,\r\n                        readonly: true,\r\n                        maxlength: 50\r\n                    },\r\n                    {\r\n                        modelId: 'isForceFileUpload',\r\n                        name: 'isForceFileUpload',\r\n                        type: 'radio',\r\n                        label: '檔案名稱已存在時',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '擋掉重複檔案', value: true },\r\n                            { label: '允許同名檔案', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'fileUpload',\r\n                        name: 'fileUpload',\r\n                        type: 'file',\r\n                        label: '上傳檔案',\r\n                        hint: '選擇要上傳的檔案，檔案名稱將自動填入',\r\n                        accept: '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar',\r\n                        maxSize: 50 * 1024 * 1024, // 50MB\r\n                        multiple: false,\r\n                        required: true,\r\n                        onInputCallback: (value: File | File[] | null) => {\r\n                            // 當選擇檔案時，自動填入檔案名稱\r\n                            // 這個 callback 會在 Vue 組件中動態設定\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'fileName',\r\n                        name: 'fileName',\r\n                        type: 'text',\r\n                        label: '檔案名稱',\r\n                        placeholder: '將自動從上傳的檔案中填入',\r\n                        required: false,\r\n                        maxlength: 255,\r\n                        disabled: true\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '',\r\n                gridClass: 'col-6',\r\n                fields: [\r\n                    {\r\n                        modelId: 'isActive',\r\n                        name: 'isActive',\r\n                        type: 'radio',\r\n                        label: '是否啟用（可否存取）',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: true },\r\n                            { label: '停用', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'filePermission',\r\n                        name: 'filePermission',\r\n                        type: 'radio',\r\n                        label: '權限控制',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '不限制任何系統都可以存取 (Public)', value: '0' },\r\n                            { label: '限制跟我所屬業務別註冊的業務別都可以存取 (Protect)', value: '1' },\r\n                            { label: '限制跟我註冊的業務別都可以存取 (Protect_Internal)', value: '2' },\r\n                            { label: '自己才可存取 (Private)', value: '3' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'description',\r\n                        name: 'description',\r\n                        type: 'textarea',\r\n                        label: '自訂描述',\r\n                        placeholder: '請輸入描述',\r\n                        required: false,\r\n                        maxlength: 500,\r\n                        rows: 3\r\n                    },\r\n                    {\r\n                        modelId: 'isUseRetention',\r\n                        name: 'isUseRetention',\r\n                        type: 'radio',\r\n                        label: '是否啟用定期刪除',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: true },\r\n                            { label: '不啟用', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'deleteTime',\r\n                        name: 'deleteTime',\r\n                        type: 'text',\r\n                        label: '定期刪除的時間點 (yyyy-MM-dd HH:mm:ss)',\r\n                        placeholder: 'yyyy-MM-dd HH:mm:ss',\r\n                        required: false,\r\n                        maxlength: 20,\r\n                        disabled: true,\r\n                        onSubmitCheckCallback: (value: string, formData) => {\r\n                            let error = '';\r\n                            if (formData?.isUseRetention === true) {\r\n                                if (!value) {\r\n                                    error = '請填寫 定期刪除的時間點 ';\r\n                                } else if (Common.IsValidDateTime(value) === false) {\r\n                                    error = '時間格式錯誤';\r\n                                }\r\n                            }\r\n\r\n                            return error;\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'uploadDate',\r\n                        name: 'uploadDate',\r\n                        type: 'text',\r\n                        label: '上傳或覆蓋的時間點 (yyyy-MM-dd HH:mm:ss)',\r\n                        placeholder: 'yyyy-MM-dd HH:mm:ss',\r\n                        required: false,\r\n                        maxlength: 20,\r\n                        disabled: true,\r\n                        onSubmitCheckCallback: (value: string, formData) => {\r\n                            let error = '';\r\n                            if (formData?.isUseRetention === true) {\r\n                                if (!value) {\r\n                                    error = '請填寫 上傳或覆蓋的時間點 ';\r\n                                } else if (Common.IsValidDateTime(value) === false) {\r\n                                    error = '時間格式錯誤';\r\n                                }\r\n                            }\r\n\r\n                            return error;\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nexport interface FileInfosFormData {\r\n    business: string;\r\n    caseNo: string;\r\n    docType: number | null;\r\n    docName: string;\r\n    fileNo: string;\r\n    isForceFileUpload: boolean;\r\n    fileUpload: File | null;\r\n    fileSrc: string | null;\r\n    fileName: string;\r\n    isActive: boolean;\r\n    filePermission: string;\r\n    description?: string | null;\r\n    filePath: string;\r\n    isUseRetention: boolean;\r\n    deleteTime?: string | null;\r\n    uploadDate?: string | null;\r\n}\r\n\r\nexport const GetDefaultFormData = (): FileInfosFormData => {\r\n    return {\r\n        business: '',\r\n        caseNo: '',\r\n        docType: null,\r\n        docName: '',\r\n        fileNo: '',\r\n        isForceFileUpload: true,\r\n        fileUpload: null,\r\n        fileSrc: null,\r\n        fileName: '',\r\n        isActive: true,\r\n        filePermission: '3',\r\n        description: null,\r\n        filePath: '',\r\n        isUseRetention: false,\r\n        deleteTime: null,\r\n        uploadDate: null\r\n    };\r\n};\r\n","import type { MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport * as Common from '@/libs/Common';\r\n\r\n/**\r\n * 建立 FileInfos 更新 Modal 結構\r\n */\r\nexport const GetUpdateFileInfosModal = (): MyModal => {\r\n    return {\r\n        modalId: 'updateFileInfosModal',\r\n        title: '編輯檔案資訊',\r\n        showModal: false,\r\n        size: 'modal-xl',\r\n        staticBackdrop: true,\r\n        scrollable: true,\r\n        fieldGroups: [\r\n            {\r\n                title: '',\r\n                gridClass: 'col-6',\r\n                fields: [\r\n                    {\r\n                        modelId: 'business',\r\n                        name: 'business',\r\n                        type: 'text',\r\n                        label: '選擇業務別',\r\n                        placeholder: '請選擇業務別',\r\n                        required: false,\r\n                        maxlength: 25,\r\n                        readonly: true,\r\n                        onSubmitCheckCallback: (value: string, formData: any) => {\r\n                            // 驗證business和caseNo必須至少有一項有值\r\n                            if (!value && !formData.caseNo) {\r\n                                return '業務別和檔案案件必須至少選擇一項';\r\n                            }\r\n                            return '';\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'caseNo',\r\n                        name: 'caseNo',\r\n                        type: 'text',\r\n                        label: '選擇檔案案件',\r\n                        placeholder: '請選擇檔案案件',\r\n                        required: false,\r\n                        maxlength: 36,\r\n                        readonly: true,\r\n                        onSubmitCheckCallback: (value: string, formData: any) => {\r\n                            // 驗證business和caseNo必須至少有一項有值\r\n                            if (!value && !formData.business) {\r\n                                return '業務別和檔案案件必須至少選擇一項';\r\n                            }\r\n                            return '';\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'docType',\r\n                        name: 'docType',\r\n                        type: 'text',\r\n                        label: '選擇文件類型',\r\n                        placeholder: '請選擇文件類型',\r\n                        required: true,\r\n                        readonly: true,\r\n                        maxlength: 50\r\n                    },\r\n                    {\r\n                        modelId: 'fileNo',\r\n                        name: 'fileNo',\r\n                        type: 'text',\r\n                        label: '檔案序號',\r\n                        placeholder: '檔案序號',\r\n                        required: true,\r\n                        maxlength: 36,\r\n                        readonly: true\r\n                    },\r\n                    {\r\n                        modelId: 'isForceFileUpload',\r\n                        name: 'isForceFileUpload',\r\n                        type: 'radio',\r\n                        label: '檔案名稱已存在時',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '擋掉重複檔案', value: true },\r\n                            { label: '允許同名檔案', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'fileUpload',\r\n                        name: 'fileUpload',\r\n                        type: 'file',\r\n                        label: '上傳檔案',\r\n                        hint: '選擇要上傳的檔案，檔案名稱將自動填入',\r\n                        accept: '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar',\r\n                        maxSize: 50 * 1024 * 1024, // 50MB\r\n                        multiple: false,\r\n                        required: false,\r\n                        onInputCallback: (value: File | File[] | null) => {\r\n                            // 當選擇檔案時，自動填入檔案名稱\r\n                            // 這個 callback 會在 Vue 組件中動態設定\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'fileName',\r\n                        name: 'fileName',\r\n                        type: 'text',\r\n                        label: '檔案名稱',\r\n                        placeholder: '將自動從上傳的檔案中填入',\r\n                        required: true,\r\n                        maxlength: 255,\r\n                        disabled: true\r\n                    },\r\n                    {\r\n                        modelId: 'filePath',\r\n                        name: 'filePath',\r\n                        type: 'text',\r\n                        label: '檔案路徑',\r\n                        placeholder: '檔案儲存路徑',\r\n                        required: false,\r\n                        maxlength: 500,\r\n                        disabled: true\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '',\r\n                gridClass: 'col-6',\r\n                fields: [\r\n                    {\r\n                        modelId: 'isActive',\r\n                        name: 'isActive',\r\n                        type: 'radio',\r\n                        label: '是否啟用（可否存取）',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: true },\r\n                            { label: '停用', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'filePermission',\r\n                        name: 'filePermission',\r\n                        type: 'radio',\r\n                        label: '權限控制',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '不限制任何系統都可以存取 (Public)', value: '0' },\r\n                            { label: '限制跟我所屬業務別註冊的業務別都可以存取 (Protect)', value: '1' },\r\n                            { label: '限制跟我註冊的業務別都可以存取 (Protect_Internal)', value: '2' },\r\n                            { label: '自己才可存取 (Private)', value: '3' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'description',\r\n                        name: 'description',\r\n                        type: 'textarea',\r\n                        label: '自訂描述',\r\n                        placeholder: '請輸入描述',\r\n                        required: false,\r\n                        maxlength: 500,\r\n                        rows: 3\r\n                    },\r\n                    {\r\n                        modelId: 'isUseRetention',\r\n                        name: 'isUseRetention',\r\n                        type: 'radio',\r\n                        label: '是否啟用定期刪除',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: true },\r\n                            { label: '不啟用', value: false }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'deleteTime',\r\n                        name: 'deleteTime',\r\n                        type: 'text',\r\n                        label: '定期刪除的時間點 (yyyy-MM-dd)',\r\n                        required: false,\r\n                        maxlength: 20,\r\n                        onSubmitCheckCallback: (value: string, formData) => {\r\n                            let error = '';\r\n                            if (formData?.isUseRetention === true) {\r\n                                if (!value) {\r\n                                    error = '請填寫 定期刪除的時間點 ';\r\n                                } else if (Common.IsValidDateTime(value) === false) {\r\n                                    error = '時間格式錯誤';\r\n                                }\r\n                            }\r\n                            return error;\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'uploadDate',\r\n                        name: 'uploadDate',\r\n                        type: 'text',\r\n                        label: '上傳或覆蓋的時間點 (yyyy-MM-dd)',\r\n                        required: false,\r\n                        maxlength: 20,\r\n                        onSubmitCheckCallback: (value: string, formData) => {\r\n                            let error = '';\r\n                            if (formData?.isUseRetention === true) {\r\n                                if (!value) {\r\n                                    error = '請填寫 上傳或覆蓋的時間點 ';\r\n                                } else if (Common.IsValidDateTime(value) === false) {\r\n                                    error = '時間格式錯誤';\r\n                                }\r\n                            }\r\n\r\n                            return error;\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nexport interface UpdateFileInfosFormData {\r\n    fileNo: string;\r\n    business: string;\r\n    caseNo: string;\r\n    docType: number | null;\r\n    docName: string;\r\n    isForceFileUpload: boolean | null;\r\n    fileUpload: File | null;\r\n    fileSrc: string | null;\r\n    fileName: string;\r\n    isActive: boolean | null;\r\n    filePermission: string;\r\n    description?: string | null;\r\n    filePath: string;\r\n    isUseRetention: boolean | null;\r\n    deleteTime?: string | null;\r\n    uploadDate?: string | null;\r\n}\r\n\r\nexport const GetDefaultUpdateFormData = (): UpdateFileInfosFormData => {\r\n    return {\r\n        fileNo: '',\r\n        business: '',\r\n        caseNo: '',\r\n        docType: null,\r\n        docName: '',\r\n        isForceFileUpload: null,\r\n        fileUpload: null,\r\n        fileSrc: '',\r\n        fileName: '',\r\n        isActive: null,\r\n        filePermission: '3',\r\n        description: null,\r\n        filePath: '',\r\n        isUseRetention: null,\r\n        deleteTime: null,\r\n        uploadDate: null\r\n    };\r\n};\r\n"],"names":["getFieldsGridGroupById","myModal","lookupId","_step","_iterator","_createForOfIteratorHelper","fieldGroups","s","n","done","_step2","_iterator2","value","fields","field","modelId","err","e","f","SelectModal","ref","ModalInstance","modalId","title","showModal","size","staticBackdrop","animateBackdrop","scrollable","PaginationType","DisplayMode","DataList","TotalItems","CurrentPage","PageSize","SearchQuery","searchInput","_openModal","_asyncToGenerator","_regenerator","m","_callee2","w","_context2","LoadViewData","a","apply","this","arguments","closeModal","handleBackgroundClick","event","target","currentTarget","setTimeout","watch","currentPage","pageSize","_callee","response","_t","_context","p","API","BusinessManagementViewData","v","status","result","items","filter","item","isActive","isDeleted","totalCount","ApiClient.HandleGeneralRespError","console","error","throttledLoadViewData","Common.Throttle","selectBusiness","emit","business","formatDate","dateString","Date","toLocaleDateString","year","month","day","_unused","handleSearch","clearSearch","__emit","__expose","openModal","_createElementBlock","class","tabindex","onClick","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","type","_hoisted_5","_hoisted_6","_hoisted_7","placeholder","$event","onKeyup","_hoisted_8","_normalizeClass","active","_cache","length","_hoisted_9","_openBlock","_hoisted_10","_Fragment","index","key","style","flex","width","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","system","_hoisted_16","_hoisted_17","createdTime","disabled","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_createBlock","Pagination","modelValue","_hoisted_22","_openModal2","_callee4","_context4","_callee3","_response$result$tota","_t2","_context3","FileCaseManagementViewData","pageNumber","searchQuery","totalItems","selectFileCase","caseNo","getPermissionText","permission","_unused2","updateTime","_openModal3","_callee6","_context6","_callee5","_response$result$tota2","_t3","_context5","DocTypeManagementViewData","selectDocType","docType","docName","description","loading","imageData","fileName","currentFileInfo","_callee7","fileInfo","blob","imageUrl","_t4","_context7","GetFileContent","fileNo","URL","createObjectURL","revokeObjectURL","downloadImage","_downloadImage","_callee8","url","link","_t5","_context8","document","createElement","href","download","body","appendChild","click","removeChild","_hoisted_1","role","src","alt","simplePopUp","SimplePopUp","ResizeImageToBase64","_x2","_x3","_x4","_ResizeImageToBase","_callee20","srcType","base64Src","maxWidth","maxHeight","imgQuality","imageMaxSizeMb","mimeType","isShowPopUp","base64","img","canvas","context","_t27","_args20","_context20","undefined","FileToBase64","Error","Common.Base64ToImage","height","getContext","clearRect","drawImage","toDataURL","getBase64Size","showAlert","SimplePopUpModalType","Warning","concat","id","SimplePopUpBtnType","callback","btnClass","resolveParam","Common.ConsoleLog","message","ResizeImageBlobToBase64","_x5","_ResizeImageBlobToBase","_callee21","_args21","_context21","GetBase64Content","data","base64Marker","includes","base64Index","indexOf","substring","base64String","base64Data","commaIndex","padding","match","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","_e$target","onerror","FileInfosData","reactive","displayMode","_callee9","_response$result","_t6","_context9","FileInfosManagementViewData","handlePreviewOrDownLoad","_callee11","_imagePreviewModal$va","_t7","_context11","toLowerCase","Common.IsImageFile","imagePreviewModal","downloadFile","_callee12","loadingAlert","_t8","_context12","Info","Success","onMounted","_callee0","_context0","createFileData","isForceFileUpload","fileUpload","fileSrc","filePermission","filePath","isUseRetention","deleteTime","uploadDate","businessSelectModal","fileCaseSelectModal","docTypeSelectModal","createModal","gridClass","name","label","required","maxlength","readonly","onSubmitCheckCallback","formData","inline","options","hint","accept","maxSize","multiple","onInputCallback","rows","Common.IsValidDateTime","createModalRef","updateFileData","updateModal","updateModalRef","openCreateModal","_openCreateModal","_callee14","fileUploadField","businessField","caseNoField","docTypeField","isUseRetentionField","_context14","_ref10","_callee13","_yield$GetBase64Conte","_yield$FileToBase64$","_fileSrc","_t9","_t0","_t1","_t10","_t11","_t12","_context13","Array","isArray","ImageHelper.ResizeImageBlobToBase64","Common.GetBase64Content","Common.FileToBase64","_x10","onClickCallback","_businessSelectModal$","onClearInput","clearFieldAndUpdateState","_fileCaseSelectModal$","_docTypeSelectModal$v","onChangeCallback","boolValue","deleteTimeInput","querySelector","uploadDateInput","updateFieldDisabledState","nextTick","handleBusinessSelect","_createModalRef$value","_createModalRef$value2","clearFieldError","_updateModalRef$value","_updateModalRef$value2","handleFileCaseSelect","_createModalRef$value3","_createModalRef$value4","_updateModalRef$value3","_updateModalRef$value4","modalType","fieldType","modalRef","handleDocTypeSelect","_createModalRef$value5","_updateModalRef$value5","handleCreateSubmit","_callee15","fileInfoData","processedImage","_yield$FileToBase64$2","_yield$GetBase64Conte2","successMessage","task","_t13","_t14","_t15","_t16","_t17","_t18","_t19","_t20","_context15","log","FileInfosManagementCreate","processOk","moveFileTask","insertOrUpdateRes","moveToNasRes","_callee1","_context1","throttledHandleSearch","_callee10","_context10","handleEdit","_callee17","businessFieldUpdate","caseNoFieldUpdate","docTypeFieldUpdate","_context17","_ref11","_callee16","_context16","_x11","_businessSelectModal$2","_fileCaseSelectModal$2","find","_docTypeSelectModal$v2","_handleEdit","handleEditSubmit","_handleEditSubmit","_callee18","updateData","_yield$FileToBase64$3","_updateData$isActive$","_updateData$isActive","_updateData$isForceFi","_updateData$isForceFi2","_updateData$isUseRete","_updateData$isUseRete2","_updateData$filePermi","_updateData$filePermi2","uploadData","_t21","_t22","_t23","_t24","_t25","_context18","ImageHelper.GetBase64Content","FormData","append","toString","FileInfosManagementUpdate","handleDelete","_handleDelete","_callee19","_t26","_context19","action","param","FileInfosManagementDelete","_unref","FileInfosManagement","_vModelText","JsonFormModal","onSubmit","onCancel","_createVNode","BusinessSelectModal","onSelect","FileCaseSelectModal","DocTypeSelectModal","ImagePreviewModal","_renderList","_withModifiers","overflow"],"mappings":"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"}