{"version":3,"file":"BusinessManagement-iZMv54E2.js","sources":["../../src/components/BackStage/3_Business/CreateBusinessModal.ts","../../src/components/BackStage/3_Business/UpdateBusinessModal.ts","../../src/components/BackStage/3_Business/BusinessAllowModal.vue","../../src/components/BackStage/3_Business/BusinessManagement.vue"],"sourcesContent":["import { ref, onMounted, watch, computed } from 'vue';\r\nimport type { MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\nimport * as Common from '@/libs/Common';\r\nimport type { SystemDTO } from '@/models/DTO/SystemDTO';\r\n\r\n// 定義測試欄位群組與欄位\r\nexport const GetCreateBusinessModal = (systemList: SystemDTO[]): MyModal => {\r\n    return {\r\n        modalId: 'myModal',\r\n        title: '新增系統業務別',\r\n        showModal: false,\r\n        size: 'modal-xl',\r\n        staticBackdrop: true,\r\n        scrollable: true,\r\n        fieldGroups: [\r\n            {\r\n                title: '',\r\n                gridClass: 'col-12  ',\r\n                fields: [\r\n                    {\r\n                        modelId: 'business',\r\n                        name: 'business',\r\n                        type: 'text',\r\n                        label: '業務別名稱',\r\n                        placeholder: '業務別名稱',\r\n                        required: true,\r\n                        maxlength: 25,\r\n                        onInputCallback: (value: string) => {\r\n                            return Common.ReplaceSpecialChar(value);\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'system',\r\n                        name: 'system',\r\n                        type: 'select',\r\n                        label: '系統代號',\r\n                        hint: '關聯的系統代號',\r\n                        required: true,\r\n                        options: systemList?.map((system) => ({\r\n                            label: system.system,\r\n                            value: system.system\r\n                        }))\r\n                    },\r\n                    {\r\n                        modelId: 'isActive',\r\n                        name: 'isActive',\r\n                        type: 'radio',\r\n                        label: '是否啟用',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: 'Y' },\r\n                            { label: '停用', value: 'N' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'isDeleted',\r\n                        name: 'isDeleted',\r\n                        type: 'radio',\r\n                        label: '是否刪除',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '刪除', value: 'Y' },\r\n                            { label: '不刪除', value: 'N' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'token',\r\n                        name: 'token',\r\n                        type: 'text',\r\n                        label: '業務別的密碼(明碼)',\r\n                        hint: '若留空則系統自動產生32位隨機字串',\r\n                        maxlength: 32,\r\n                        required: false\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nexport interface BusinessFormData extends BusinessDTO {}\r\nexport const GetDefaultFormData = (): BusinessFormData => {\r\n    return {\r\n        business: '',\r\n        system: '',\r\n\r\n        isActive: 'Y',\r\n        isDeleted: 'N',\r\n        token: '',\r\n        base64TokenSignature: '',\r\n        base64Salt: '',\r\n        pepper: '',\r\n        createdTime: '',\r\n        lastUpdate: null\r\n    };\r\n};\r\n","import { ref, onMounted, watch, computed } from 'vue';\r\nimport type { MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\nimport * as Common from '@/libs/Common';\r\nimport type { SystemDTO } from '@/models/DTO/SystemDTO';\r\n\r\n// 定義測試欄位群組與欄位\r\nexport const GetUpdateBusinessModal = (systemList: SystemDTO[]): MyModal => {\r\n    return {\r\n        modalId: 'myModal',\r\n        title: '新增系統業務別',\r\n        showModal: false,\r\n        size: 'modal-xl',\r\n        staticBackdrop: true,\r\n        scrollable: true,\r\n        fieldGroups: [\r\n            {\r\n                title: '',\r\n                gridClass: 'col-12  ',\r\n                fields: [\r\n                    {\r\n                        modelId: 'business',\r\n                        name: 'business',\r\n                        type: 'text',\r\n                        label: '業務別名稱',\r\n                        placeholder: '業務別名稱',\r\n                        required: true,\r\n                        maxlength: 10,\r\n                        onInputCallback: (value: string) => {\r\n                            return Common.ReplaceSpecialChar(value);\r\n                        }\r\n                    },\r\n                    {\r\n                        modelId: 'system',\r\n                        name: 'system',\r\n                        type: 'select',\r\n                        label: '系統代號',\r\n                        hint: '關聯的系統代號',\r\n                        required: true,\r\n                        options: systemList?.map((system) => ({\r\n                            label: system.system,\r\n                            value: system.system\r\n                        }))\r\n                    },\r\n                    {\r\n                        modelId: 'isActive',\r\n                        name: 'isActive',\r\n                        type: 'radio',\r\n                        label: '是否啟用',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '啟用', value: 'Y' },\r\n                            { label: '停用', value: 'N' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'isDeleted',\r\n                        name: 'isDeleted',\r\n                        type: 'radio',\r\n                        label: '是否刪除',\r\n                        inline: true,\r\n                        options: [\r\n                            { label: '刪除', value: 'Y' },\r\n                            { label: '不刪除', value: 'N' }\r\n                        ],\r\n                        required: true\r\n                    },\r\n                    {\r\n                        modelId: 'token',\r\n                        name: 'token',\r\n                        type: 'text',\r\n                        label: '業務別的密碼(明碼)',\r\n                        hint: '若留空則系統自動產生32位隨機字串',\r\n                        maxlength: 32,\r\n                        required: false\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n};\r\n","<template>\r\n    <div\r\n        v-if=\"AllowData.ModalInstance.showModal\"\r\n        class=\"modal show d-block\"\r\n        tabindex=\"-1\"\r\n        :aria-labelledby=\"AllowData.ModalInstance.modalId\"\r\n        :aria-hidden=\"!AllowData.ModalInstance.showModal\"\r\n        @click=\"handleBackgroundClick\"\r\n        :class=\"{ 'static-backdrop-animation': AllowData.ModalInstance.animateBackdrop }\"\r\n    >\r\n        <div\r\n            class=\"modal-dialog\"\r\n            :class=\"[AllowData.ModalInstance.size, AllowData.ModalInstance.scrollable ? 'modal-dialog-scrollable' : '']\"\r\n        >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">{{ AllowData.ModalInstance.title }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"btn-group me-2 mb-3\" role=\"group\" aria-label=\"First group\">\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: AllowData.DisplayMode === 'card' }\"\r\n                            @click=\"AllowData.DisplayMode = 'card'\"\r\n                        >\r\n                            卡片顯示\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-esun-outline\"\r\n                            :class=\"{ active: AllowData.DisplayMode === 'table' }\"\r\n                            @click=\"AllowData.DisplayMode = 'table'\"\r\n                        >\r\n                            表格顯示\r\n                        </button>\r\n\r\n                        <button type=\"button\" class=\"btn btn-esun-outline\" @click=\"openAccessBusinessModal\">\r\n                            新增授權業務別\r\n                        </button>\r\n                    </div>\r\n                    <div v-if=\"AllowData.CurrentPageDataList.length === 0\" class=\"text-muted\">無項目</div>\r\n\r\n                    <div\r\n                        v-if=\"AllowData.DisplayMode === 'card'\"\r\n                        class=\"d-flex flex-wrap w-100\"\r\n                        style=\"min-height: 400px\"\r\n                    >\r\n                        <div\r\n                            v-for=\"(item, index) in AllowData.CurrentPageDataList\"\r\n                            :key=\"index\"\r\n                            class=\"p-2\"\r\n                            style=\"flex: 1 1 0; min-width: 25%; max-width: 25%; width: 25%\"\r\n                        >\r\n                            <div class=\"card\">\r\n                                <div\r\n                                    class=\"card-body p-2 d-flex flex-column justify-content-between\"\r\n                                    style=\"height: 100px\"\r\n                                >\r\n                                    <div class=\"mb-2 text-truncate\" :title=\"item.allowBusiness\" style=\"width: 100%\">\r\n                                        {{ item.allowBusiness }}\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        class=\"btn btn-sm btn-danger align-self-end\"\r\n                                        @click=\"RemoveBusiness(item)\"\r\n                                    >\r\n                                        移除\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div v-if=\"AllowData.DisplayMode === 'table'\" style=\"min-height: 400px\">\r\n                        <table class=\"table table-bordered\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>項目</th>\r\n                                    <th>操作</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, index) in AllowData.CurrentPageDataList\" :key=\"index\">\r\n                                    <td>{{ item.allowBusiness }}</td>\r\n                                    <td>\r\n                                        <button\r\n                                            v-if=\"item.allowBusiness !== business\"\r\n                                            type=\"button\"\r\n                                            class=\"btn btn-sm btn-danger\"\r\n                                            @click=\"RemoveBusiness(item)\"\r\n                                        >\r\n                                            移除\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <Pagination\r\n                        v-if=\"AllowData.CurrentPageDataList.length > 0\"\r\n                        v-model:modelValue=\"AllowData.CurrentPage\"\r\n                        v-model:pageSize=\"AllowData.PageSize\"\r\n                        :total-items=\"AllowData.TotalItems\"\r\n                    />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-esun-outline\" @click.prevent=\"closeModal\">關閉</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <SelectListModal\r\n        v-if=\"AccessBusinessModal.ModalInstance.showModal\"\r\n        :myModal=\"AccessBusinessModal.ModalInstance\"\r\n        :paginationType=\"AccessBusinessModal.PaginationType\"\r\n        :disabledDataList=\"AccessBusinessModal.DisabledDataList\"\r\n        :selectedList=\"AccessBusinessModal.DataList\"\r\n        :totalItems=\"AccessBusinessModal.TotalItems\"\r\n        :onSelect=\"handleSelectAllowBusinessSubmit\"\r\n        :onCancel=\"handleSelectAllowBusinessCancel\"\r\n        :onPageChange=\"onPageChange\"\r\n    />\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\n\r\nconst props = defineProps<{\r\n    // 目前選取操作 業務別\r\n    operateBusiness: string;\r\n\r\n    // 所有業務別資料\r\n    AllBusinessLists: BusinessDTO[];\r\n}>();\r\nimport { ref, onMounted, watch, computed, watchEffect } from 'vue';\r\n\r\nimport type { MyBaseModal } from '@/components/modal/BaseModal/schema';\r\nimport type { AccessibleBusinessList } from '@/api/v1/3_Business/AccessibleBusinessViewData';\r\n\r\n// 業務別授權規則\r\n\r\nconst business = ref<string>(props.operateBusiness);\r\n\r\ninterface AllowData {\r\n    ModalInstance: MyBaseModal;\r\n    PaginationType: 'server' | 'client';\r\n    DisplayMode: 'table' | 'card';\r\n    FullDataList: AccessibleBusinessList[];\r\n    CurrentPageDataList: AccessibleBusinessList[];\r\n    TotalItems: number;\r\n    CurrentPage: number;\r\n    PageSize: number;\r\n}\r\nconst AllowData = ref<AllowData>(GetDefaultAllowData());\r\n\r\nfunction GetDefaultAllowData(): AllowData {\r\n    return {\r\n        ModalInstance: {\r\n            modalId: 'AllowData',\r\n            title: business.value + ' 授權業務別管理 ',\r\n            showModal: false,\r\n            size: 'modal-xl',\r\n            staticBackdrop: true,\r\n            animateBackdrop: false\r\n        },\r\n        PaginationType: 'client',\r\n        DisplayMode: 'table',\r\n        FullDataList: [],\r\n        CurrentPageDataList: [],\r\n        TotalItems: 2,\r\n        CurrentPage: 1,\r\n        PageSize: 10\r\n    };\r\n}\r\n\r\nwatchEffect(() => {\r\n    // 監聽 operateBusiness 屬性變化\r\n    business.value = props.operateBusiness;\r\n    // 更新 AllowData 的標題\r\n    AllowData.value.ModalInstance.title = business.value + ' 授權業務別管理 ';\r\n});\r\n\r\nwatch(\r\n    () => ({\r\n        currentPage: AllowData.value.CurrentPage,\r\n        pageSize: AllowData.value.PageSize\r\n    }),\r\n    () => {\r\n        // Client-side pagination logic will go here if needed\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\n// 監聽 business 以更新標題和重新載入數據\r\nwatch(\r\n    () => business.value,\r\n    (newVal, oldVal) => {\r\n        if (newVal !== oldVal) {\r\n            AllowData.value = GetDefaultAllowData();\r\n            LoadViewData();\r\n        }\r\n    }\r\n);\r\n\r\n/**\r\n * @todo 展開Modal\r\n */\r\nasync function openModal() {\r\n    AllowData.value = GetDefaultAllowData();\r\n    await LoadViewData();\r\n    AllowData.value.ModalInstance.showModal = true;\r\n}\r\n\r\n/**\r\n * @todo 關閉Modal\r\n */\r\nfunction closeModal() {\r\n    AllowData.value.ModalInstance.showModal = false;\r\n}\r\n\r\n/**\r\n * @todo 處理點擊背景事件，觸發背景動畫\r\n * @param event\r\n */\r\nfunction handleBackgroundClick(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) {\r\n        AllowData.value.ModalInstance.animateBackdrop = true;\r\n        setTimeout(() => {\r\n            AllowData.value.ModalInstance.animateBackdrop = false;\r\n        }, 150);\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 載入資料\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        const response = await API.AccessibleBusinessViewData(business.value);\r\n\r\n        if (response.status) {\r\n            AllowData.value.FullDataList = response.result.items;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n        // 分頁處理\r\n        if (AllowData.value.FullDataList.length > 0) {\r\n            const startIndex = (AllowData.value.CurrentPage - 1) * AllowData.value.PageSize;\r\n            const endIndex = AllowData.value.CurrentPage * AllowData.value.PageSize;\r\n\r\n            AllowData.value.CurrentPageDataList = AllowData.value.FullDataList.slice(startIndex, endIndex);\r\n            AllowData.value.TotalItems = AllowData.value.FullDataList.length;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    } finally {\r\n    }\r\n};\r\n\r\nimport {\r\n    SimplePopUp,\r\n    SimplePopUpBtnType,\r\n    SimplePopUpModalType,\r\n    SimplePopUpSize,\r\n    type SimplePopupResolveResult\r\n} from '@/libs/SimplePopUp';\r\nimport { GetUpdateBusinessModal } from './UpdateBusinessModal';\r\n\r\nconst simplePopUp = new SimplePopUp();\r\n\r\n/**\r\n * @todo 移除授權業務別\r\n * @param item\r\n */\r\nasync function RemoveBusiness(item: AccessibleBusinessList) {\r\n    // 刪除邏輯（可加 confirm）\r\n    let action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n        SimplePopUpModalType.Warning,\r\n        '警告',\r\n        `確定要刪除授權業務別 ${item.allowBusiness} 嗎？`,\r\n        [\r\n            {\r\n                id: 'cancel',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-esun-outline ',\r\n                resolveParam: 'cancel',\r\n                title: '取消'\r\n            },\r\n            {\r\n                id: 'confirm',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-info',\r\n                resolveParam: 'confirm',\r\n                title: '確定'\r\n            }\r\n        ]\r\n    );\r\n\r\n    if (action.param === 'confirm') {\r\n        const response = await API.AccessibleBusinessRemove(business.value, item.allowBusiness);\r\n        if (response.status) {\r\n            await LoadViewData();\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    }\r\n}\r\n// ---------------------------------------------------------------------------//\r\n\r\n/** 選擇列表模態框 */\r\n// 新增選擇列表模態框配置\r\nimport SelectListModal from '@/components/modal/SelectListModal/SelectListModal.vue';\r\nimport type { InternalSelectedList, MySelectListModal } from '@/components/modal/SelectListModal/schema';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\n\r\ninterface ISelectListModal {\r\n    ModalInstance: MySelectListModal;\r\n    PaginationType: 'server' | 'client';\r\n    // 禁用的項目列表\r\n    DisabledDataList: string[] | null;\r\n    // 選擇列表數據\r\n    DataList: InternalSelectedList[];\r\n    TotalItems: number;\r\n    PageNumber: number;\r\n    PageSize: number;\r\n}\r\nconst AccessBusinessModal = ref<ISelectListModal>(GetDefaultAccessBusinessModal());\r\n\r\nfunction GetDefaultAccessBusinessModal(): ISelectListModal {\r\n    return {\r\n        ModalInstance: {\r\n            modalId: 'business-select-list-modal',\r\n            title: '選擇業務別',\r\n            showModal: false,\r\n            size: 'modal-xl',\r\n            staticBackdrop: true,\r\n            scrollable: true\r\n        },\r\n        PaginationType: 'server',\r\n        DisabledDataList: AllowData.value.FullDataList.map((item) => item.business),\r\n        DataList: [],\r\n        TotalItems: 0,\r\n        PageNumber: 1,\r\n        PageSize: 10\r\n    };\r\n}\r\n\r\nfunction initAccessBusinessModal() {\r\n    // 初始化選擇列表為全部業務資料\r\n    // 排除目前已存在business\r\n    AccessBusinessModal.value = GetDefaultAccessBusinessModal();\r\n}\r\n\r\nconst onPageChange = async (searchQuery: string, pageNumber: number, pageSize: number) => {\r\n    try {\r\n        // 目前 business 資料少 分頁在前端做\r\n        const response = await API.BusinessManagementViewData(searchQuery, pageNumber, pageSize);\r\n\r\n        if (response.status && response.result?.items) {\r\n            AccessBusinessModal.value.DataList = response.result.items.map((item) => ({\r\n                name: item.business,\r\n                value: item.business\r\n            }));\r\n            AccessBusinessModal.value.TotalItems = response.result.totalCount;\r\n            AccessBusinessModal.value.PageSize = pageSize;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n};\r\n\r\n// 開啟選擇列表模態框\r\nasync function openAccessBusinessModal() {\r\n    // 初始化選擇列表為全部業務資料\r\n    initAccessBusinessModal();\r\n    // 排除目前已存在business\r\n    const resp = await API.BusinessManagementViewData('', 1, AccessBusinessModal.value.PageSize);\r\n    // const allowedBusinessSet = new Set(AllowData.value.FullDataList.map((item) => item.business));\r\n\r\n    // const filteredList = props.AllBusinessLists.filter((item) => !allowedBusinessSet.has(item.business));\r\n    AccessBusinessModal.value.DataList = resp.result.items.map((item) => ({\r\n        name: item.business,\r\n        value: item.business\r\n    }));\r\n    AccessBusinessModal.value.TotalItems = resp.result.totalCount;\r\n    AccessBusinessModal.value.PageSize = 1;\r\n    AccessBusinessModal.value.ModalInstance.showModal = true;\r\n}\r\n\r\n// 處理選擇列表模態框提交\r\nasync function handleSelectAllowBusinessSubmit(addedBusiness: string) {\r\n    // 這裡可以根據需求處理選擇結果，例如更新業務資料或其他操作\r\n    // 刪除邏輯（可加 confirm）\r\n    let action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n        SimplePopUpModalType.Warning,\r\n        '提醒',\r\n        `確定要將 ${addedBusiness} 加入到 ${business.value}授權業務別中嗎？`,\r\n        [\r\n            {\r\n                id: 'cancel',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-esun-outline ',\r\n                resolveParam: 'cancel',\r\n                title: '取消'\r\n            },\r\n            {\r\n                id: 'confirm',\r\n                type: SimplePopUpBtnType.callback,\r\n                btnClass: 'btn-info',\r\n                resolveParam: 'confirm',\r\n                title: '確定'\r\n            }\r\n        ]\r\n    );\r\n\r\n    if (action.param === 'confirm') {\r\n        const response = await API.AccessibleBusinessAdd(business.value, addedBusiness);\r\n        if (response.status) {\r\n            await LoadViewData();\r\n            AccessBusinessModal.value.ModalInstance.showModal = false;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    }\r\n    console.log('選擇列表模態框提交，選擇項目:', addedBusiness);\r\n}\r\n\r\n// 處理選擇列表模態框取消\r\nfunction handleSelectAllowBusinessCancel() {\r\n    AccessBusinessModal.value.ModalInstance.showModal = false;\r\n}\r\n\r\n// ---------------------------------------------------------------------------//\r\n// 將方法暴露給父元件使用\r\ndefineExpose({ openModal });\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.modal-dialog {\r\n    background-color: transparent;\r\n}\r\n\r\n.static-backdrop-animation {\r\n    animation: staticBackdropAnimation 0.15s ease-in-out;\r\n}\r\n\r\n.modal-dialog-scrollable .modal-body {\r\n    max-height: calc(100vh - 200px);\r\n    overflow-y: auto;\r\n}\r\n\r\n@keyframes staticBackdropAnimation {\r\n    0% {\r\n        transform: scale(1);\r\n    }\r\n    50% {\r\n        transform: scale(1.02);\r\n    }\r\n    100% {\r\n        transform: scale(1);\r\n    }\r\n}\r\n</style>\r\n","<style scoped>\r\n.content {\r\n    margin-left: 250px;\r\n    transition: margin-left 0.3s;\r\n}\r\n.content.expanded {\r\n    margin-left: 0;\r\n}\r\n\r\n.fade-in {\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease-in-out;\r\n}\r\n\r\n.fade-in.active {\r\n    opacity: 1;\r\n}\r\n</style>\r\n\r\n<template>\r\n    <div class=\"p-4 mt-5\">\r\n        <!-- top button  -->\r\n        <div\r\n            class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\"\r\n        >\r\n            <h1 class=\"h2\">{{ RouteUrlList.BusinessManagement.label }}</h1>\r\n            <div class=\"btn-toolbar justify-content-end mb-3\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\r\n                <div class=\"btn-group me-2\" role=\"group\" aria-label=\"First group\">\r\n                    <!-- 新增搜尋輸入框 -->\r\n                    <div class=\"input-group ms-3\" style=\"max-width: 200px\">\r\n                        <input\r\n                            type=\"text\"\r\n                            class=\"form-control form-control-esun\"\r\n                            placeholder=\"搜尋系統\"\r\n                            v-model=\"appData.searchQuery\"\r\n                        />\r\n                        <div\r\n                            class=\"btn-close position-absolute end-0 top-50 translate-middle cursor-pointer shadow-none\"\r\n                            @click=\"clearSearch\"\r\n                            aria-label=\"清除搜尋\"\r\n                        >\r\n                            <button class=\"btn btn-link p-0\" aria-label=\"Close\"></button>\r\n                        </div>\r\n                    </div>\r\n                    <button class=\"btn btn-sm btn-esun-outline ml-3\" @click=\"throttledHandleSearch\">搜尋</button>\r\n                    <button class=\"btn btn-esun-primary ml-3\" @click=\"open\">新增業務別</button>\r\n                </div>\r\n                <JsonFormModal\r\n                    v-if=\"createModal.showModal\"\r\n                    :myModal=\"createModal\"\r\n                    :modelValue=\"createData\"\r\n                    @submit=\"handleCreateSubmit\"\r\n                    @cancel=\"createModal.showModal = false\"\r\n                />\r\n\r\n                <!-- 切換顯示模式 -->\r\n                <div class=\"btn-group\" role=\"group\">\r\n                    <button\r\n                        class=\"btn btn-esun-outline\"\r\n                        :class=\"{ active: appData.displayMode === 'card' }\"\r\n                        @click=\"appData.displayMode = 'card'\"\r\n                    >\r\n                        卡片模式\r\n                    </button>\r\n                    <button\r\n                        class=\"btn btn-esun-outline\"\r\n                        :class=\"{ active: appData.displayMode === 'table' }\"\r\n                        @click=\"appData.displayMode = 'table'\"\r\n                    >\r\n                        表格模式\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"appData.totalCount === 0\">無 資 料 !</div>\r\n        <!-- 顯示資料 -->\r\n        <Pagination\r\n            v-if=\"appData.totalCount\"\r\n            v-model:modelValue=\"appData.pageNumber\"\r\n            v-model:pageSize=\"appData.pageSize\"\r\n            :total-items=\"appData.totalCount\"\r\n        />\r\n        <div\r\n            v-if=\"appData.displayMode === 'card'\"\r\n            class=\"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 active\"\r\n            :class=\"{ 'fade-in': appData.pageNumber }\"\r\n            ref=\"dataContainer\"\r\n        >\r\n            <div class=\"col\" v-for=\"item in appData.business\" :key=\"item.business\">\r\n                <div class=\"card card-esun h-100 esun-animate-in\">\r\n                    <div class=\"card-body\">\r\n                        <h5 class=\"card-title\">{{ item.business }}</h5>\r\n                        <p class=\"card-text\">\r\n                            <strong>系統代號:</strong> {{ item.system }}<br />\r\n                            <strong>是否軟刪除:</strong>\r\n                            <span :class=\"item.isDeleted === 'N' ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isDeleted === 'Y' ? '是' : '否' }} </span\r\n                            ><br />\r\n\r\n                            <strong>啟用狀態:</strong>\r\n                            <span :class=\"item.isActive === 'Y' ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isActive === 'Y' ? '啟用中' : '已停用' }} </span\r\n                            ><br />\r\n\r\n                            <strong>token:</strong> {{ item.token }}<br />\r\n\r\n                            <strong>建立時間:</strong> {{ Common.FormatDate(item.createdTime) }}<br />\r\n                            <strong>更新時間:</strong> {{ Common.FormatDate(item.lastUpdate) }}\r\n                        </p>\r\n\r\n                        <!-- 按鈕群組 -->\r\n                        <!-- Dropdown 按鈕 -->\r\n                        <div class=\"dropdown mt-3\">\r\n                            <button\r\n                                class=\"btn btn-esun-outline dropdown-toggle w-100\"\r\n                                type=\"button\"\r\n                                data-bs-toggle=\"dropdown\"\r\n                                aria-expanded=\"false\"\r\n                            >\r\n                                <i class=\"bi bi-gear me-1\"></i> 操作選單\r\n                            </button>\r\n                            <ul class=\"dropdown-menu w-100\">\r\n                                <li>\r\n                                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleEdit(item)\">\r\n                                        <i class=\"bi bi-pencil-square me-1 text-primary\"></i> 修改\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleDelete(item)\">\r\n                                        <i class=\"bi bi-trash me-1 text-danger\"></i> 刪除\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a\r\n                                        class=\"dropdown-item\"\r\n                                        href=\"#\"\r\n                                        @click.prevent=\"handleDeactivate(item)\"\r\n                                        :class=\"{ disabled: !item.isActive }\"\r\n                                    >\r\n                                        <i class=\"bi bi-slash-circle me-1 text-warning\"></i> 停用\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a\r\n                                        class=\"dropdown-item\"\r\n                                        href=\"#\"\r\n                                        @click.prevent=\"showBusinessAllowModal(item.business)\"\r\n                                    >\r\n                                        <i class=\"bi bi-trash me-1 text-info\"></i> 授權業務別管理\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <!-- Dropdown 按鈕 -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-else :class=\"{ 'fade-in': appData.pageNumber }\" style=\"overflow: auto\" class=\"active\">\r\n            <table class=\"table table-bordered table-hover align-middle\">\r\n                <thead class=\"table-light\">\r\n                    <tr>\r\n                        <th>業務別</th>\r\n                        <th>系統代號</th>\r\n                        <th>是否軟刪除</th>\r\n                        <th>啟用狀態</th>\r\n                        <th>token</th>\r\n                        <th>建立時間</th>\r\n                        <th>更新時間</th>\r\n                        <th>操作選單</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"item in appData.business\" :key=\"item.business\">\r\n                        <td>{{ item.business }}</td>\r\n                        <td>{{ item.system }}</td>\r\n                        <td>\r\n                            <span :class=\"item.isDeleted ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isDeleted ? '啟用中' : '已停用' }}\r\n                            </span>\r\n                        </td>\r\n\r\n                        <td>\r\n                            <span :class=\"item.isActive ? 'text-success' : 'text-danger'\">\r\n                                {{ item.isActive ? '啟用中' : '已停用' }}\r\n                            </span>\r\n                        </td>\r\n\r\n                        <td>{{ item.token }}</td>\r\n                        <td>{{ Common.FormatDate(item.createdTime) }}</td>\r\n                        <td>{{ Common.FormatDate(item.lastUpdate) }}</td>\r\n                        <td>\r\n                            <!-- 按鈕群組 -->\r\n                            <!-- Dropdown 按鈕 -->\r\n                            <div class=\"dropdown mt-3\">\r\n                                <button\r\n                                    class=\"btn btn-esun-outline dropdown-toggle w-100\"\r\n                                    type=\"button\"\r\n                                    data-bs-toggle=\"dropdown\"\r\n                                    aria-expanded=\"false\"\r\n                                >\r\n                                    <i class=\"bi bi-gear me-1\"></i> 操作選單\r\n                                </button>\r\n                                <ul class=\"dropdown-menu w-100\">\r\n                                    <li>\r\n                                        <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleEdit(item)\">\r\n                                            <i class=\"bi bi-pencil-square me-1 text-primary\"></i> 修改\r\n                                        </a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"handleDelete(item)\">\r\n                                            <i class=\"bi bi-trash me-1 text-danger\"></i> 刪除\r\n                                        </a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a\r\n                                            class=\"dropdown-item\"\r\n                                            href=\"#\"\r\n                                            @click.prevent=\"handleDeactivate(item)\"\r\n                                            :class=\"{ disabled: !item.isActive }\"\r\n                                        >\r\n                                            <i class=\"bi bi-slash-circle me-1 text-warning\"></i> 停用\r\n                                        </a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a\r\n                                            class=\"dropdown-item\"\r\n                                            href=\"#\"\r\n                                            @click.prevent=\"showBusinessAllowModal(item.business)\"\r\n                                        >\r\n                                            <i class=\"bi bi-trash me-1 text-info\"></i> 授權業務別管理\r\n                                        </a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <!-- Dropdown 按鈕 -->\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <Pagination\r\n            v-if=\"appData.totalCount\"\r\n            v-model:modelValue=\"appData.pageNumber\"\r\n            v-model:pageSize=\"appData.pageSize\"\r\n            :total-items=\"appData.totalCount\"\r\n        />\r\n\r\n        <JsonFormModal\r\n            v-if=\"updateModal.showModal\"\r\n            :myModal=\"updateModal\"\r\n            v-model=\"updateData\"\r\n            @submit=\"handleEditSubmit\"\r\n            @cancel=\"updateModal.showModal = false\"\r\n        />\r\n    </div>\r\n    <BusinessAllowModal\r\n        v-if=\"operateBusiness\"\r\n        ref=\"BusinessAllowModalRef\"\r\n        :operateBusiness=\"operateBusiness\"\r\n        :AllBusinessLists=\"appData.business\"\r\n    />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch, computed, reactive, nextTick } from 'vue';\r\ndefineProps<{ collapsed: boolean; paginationType?: 'client' | 'server' }>();\r\ndefineEmits(['toggleTheme']);\r\n\r\nimport Pagination from '@/components/pagination/Pagination.vue';\r\nimport * as Common from '@/libs/Common';\r\nimport type { BusinessDTO } from '@/models/DTO/BusinessDTO';\r\nimport * as ApiClient from '@/libs/ApiClient';\r\nimport API from '@/api/v1/';\r\nimport JsonFormModal from '@/components/modal/JsonFormModal/JsonFormModal.vue';\r\n\r\nimport { GetCreateBusinessModal, GetDefaultFormData } from './CreateBusinessModal';\r\nimport type { MyModal } from '@/components/modal/JsonFormModal/schema';\r\nimport { RouteUrlList } from '@/libs/RouteList';\r\nimport type { SystemDTO } from '@/models/DTO/SystemDTO';\r\n\r\n// business 資料（ API 傳入）\r\n// 取得所有系統資訊\r\nconst systemList = ref<SystemDTO[]>([]);\r\nconst GetAllSystemInfo = async () => {\r\n    const resp = await API.GetAllSystemInfo();\r\n    if (resp.status === false) {\r\n        ApiClient.HandleGeneralRespError(resp.message);\r\n        return;\r\n    }\r\n    systemList.value = resp.result.items;\r\n};\r\n\r\ninterface IAppData {\r\n    business: BusinessDTO[];\r\n    searchQuery: string;\r\n    paginationType: 'server' | 'client';\r\n    pageNumber: number; // 可以根據 pageNumber 與 pageSize 去查詢後端資料\r\n    pageSize: number;\r\n    totalCount: number;\r\n    displayMode: 'card' | 'table';\r\n}\r\nconst appData = reactive<IAppData>({\r\n    business: [],\r\n    searchQuery: '',\r\n    paginationType: 'server',\r\n    pageNumber: 1,\r\n    pageSize: 10,\r\n    totalCount: 0,\r\n    displayMode: 'card'\r\n});\r\n\r\n// 建立business 相關\r\nconst createModal = ref<MyModal>(GetCreateBusinessModal(systemList.value));\r\nconst createData = ref<BusinessDTO>(GetDefaultFormData());\r\n/**\r\n * @todo 載入資料\r\n */\r\nconst LoadViewData = async () => {\r\n    try {\r\n        // 目前 business 資料少 分頁在前端做\r\n        const response = await API.BusinessManagementViewData(\r\n            appData.searchQuery,\r\n            appData.pageNumber,\r\n            appData.pageSize\r\n        );\r\n\r\n        if (response.status && response.result?.items) {\r\n            appData.business = response.result.items;\r\n\r\n            appData.totalCount = response.result.totalCount;\r\n        } else {\r\n            ApiClient.HandleGeneralRespError(response);\r\n        }\r\n    } catch (error) {\r\n        ApiClient.HandleError(error);\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    } finally {\r\n    }\r\n};\r\n\r\nonMounted(async () => {\r\n    await GetAllSystemInfo();\r\n    createModal.value = GetCreateBusinessModal(systemList.value);\r\n    updateModal.value = GetUpdateBusinessModal(systemList.value);\r\n    // 初始化資料\r\n    await LoadViewData();\r\n});\r\n\r\nwatch(\r\n    () => ({\r\n        pageNumber: appData.pageNumber,\r\n        pageSize: appData.pageSize\r\n    }),\r\n    () => {\r\n        LoadViewData();\r\n    }\r\n);\r\n\r\nfunction open() {\r\n    createModal.value.showModal = true;\r\n}\r\n\r\nasync function handleCreateSubmit(formData: Record<string, any>) {\r\n    try {\r\n        const item: BusinessDTO = formData as BusinessDTO;\r\n\r\n        // 刪除邏輯（可加 confirm）\r\n        let action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n            SimplePopUpModalType.Warning,\r\n            '警告',\r\n            `確定新增系統 ${item.system} 嗎？`,\r\n            [\r\n                {\r\n                    id: 'cancel',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-esun-outline ',\r\n                    resolveParam: 'cancel',\r\n                    title: '取消'\r\n                },\r\n                {\r\n                    id: 'confirm',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-info',\r\n                    resolveParam: 'confirm',\r\n                    title: '確定'\r\n                }\r\n            ]\r\n        );\r\n\r\n        if (action.param === 'confirm') {\r\n            let postData: BusinessManagementCreateParams = {\r\n                business: item.business,\r\n                systemName: item.system,\r\n                isDeleted: item.isDeleted === 'Y' ? true : false,\r\n                isActive: item.isActive === 'Y' ? true : false,\r\n                token: item.token\r\n            };\r\n            const response = await API.BusinessManagementCreate(postData);\r\n            if (response.status) {\r\n                await LoadViewData(); // 重新載入資料\r\n            } else {\r\n                ApiClient.HandleGeneralRespError(response);\r\n            }\r\n        }\r\n\r\n        createModal.value.showModal = false;\r\n    } catch (error) {\r\n        ApiClient.HandleError(error);\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n}\r\n\r\n// 搜尋系統資料\r\nconst handleSearch = () => {\r\n    LoadViewData();\r\n};\r\n// 使用節流函式包裝input事件處理器，提高效能\r\nconst throttledHandleSearch = Common.Throttle(handleSearch, 100);\r\n\r\nconst clearSearch = () => {\r\n    appData.searchQuery = '';\r\n    LoadViewData();\r\n};\r\n\r\n// 卡片 事件處理函式\r\n// 建立system 相關\r\nimport {\r\n    SimplePopUp,\r\n    SimplePopUpBtnType,\r\n    SimplePopUpModalType,\r\n    SimplePopUpSize,\r\n    type SimplePopupResolveResult\r\n} from '@/libs/SimplePopUp';\r\nimport { GetUpdateBusinessModal } from './UpdateBusinessModal';\r\n\r\nconst simplePopUp = new SimplePopUp();\r\n\r\nconst updateModal = ref<MyModal>(GetUpdateBusinessModal(systemList.value));\r\nconst updateData = ref<BusinessDTO>(GetDefaultFormData());\r\n\r\nfunction handleEdit(item: BusinessDTO) {\r\n    // 編輯邏輯\r\n    updateData.value = { ...item }; // 深拷貝，避免直接修改原始資料\r\n    updateModal.value.showModal = true;\r\n}\r\n\r\nasync function handleEditSubmit(formData: Record<string, any>) {\r\n    try {\r\n        // 更新邏輯\r\n        updateModal.value.showModal = false;\r\n\r\n        const item: BusinessDTO = formData as BusinessDTO;\r\n        // 刪除邏輯（可加 confirm）\r\n        let action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n            SimplePopUpModalType.Warning,\r\n            '警告',\r\n            `確定要更新系統 ${item.system} 嗎？`,\r\n            [\r\n                {\r\n                    id: 'cancel',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-esun-outline ',\r\n                    resolveParam: 'cancel',\r\n                    title: '取消'\r\n                },\r\n                {\r\n                    id: 'confirm',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-info',\r\n                    resolveParam: 'confirm',\r\n                    title: '確定'\r\n                }\r\n            ]\r\n        );\r\n\r\n        if (action.param === 'confirm') {\r\n            let postData: BusinessManagementUpdateParams = {\r\n                business: item.business,\r\n                systemName: item.system,\r\n                isDeleted: item.isDeleted === 'Y' ? true : false,\r\n                isActive: item.isActive === 'Y' ? true : false,\r\n                token: item.token\r\n            };\r\n            const response = await API.BusinessManagementUpdate(postData);\r\n            if (response.status) {\r\n                await LoadViewData(); // 重新載入資料\r\n            } else {\r\n                ApiClient.HandleGeneralRespError(response);\r\n            }\r\n        }\r\n    } catch (error) {\r\n        ApiClient.HandleError(error);\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 刪除系統\r\n * @param item\r\n */\r\nasync function handleDelete(item: BusinessDTO) {\r\n    try {\r\n        // 刪除邏輯（可加 confirm）\r\n        let action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n            SimplePopUpModalType.Warning,\r\n            '警告',\r\n            `確定要刪除系統 ${item.system} 嗎？`,\r\n            [\r\n                {\r\n                    id: 'cancel',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-esun-outline ',\r\n                    resolveParam: 'cancel',\r\n                    title: '取消'\r\n                },\r\n                {\r\n                    id: 'confirm',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-info',\r\n                    resolveParam: 'confirm',\r\n                    title: '確定'\r\n                }\r\n            ]\r\n        );\r\n\r\n        if (action.param === 'confirm') {\r\n            const response = await API.BusinessManagementDelete(item.business);\r\n            if (response.status) {\r\n                await LoadViewData(); // 重新載入資料\r\n            } else {\r\n                ApiClient.HandleGeneralRespError(response);\r\n            }\r\n        }\r\n    } catch (error) {\r\n        ApiClient.HandleError(error);\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 停用系統\r\n */\r\nasync function handleDeactivate(item: BusinessDTO) {\r\n    try {\r\n        // 停用邏輯\r\n        const action: SimplePopupResolveResult<string> = await simplePopUp.showAlert(\r\n            SimplePopUpModalType.Warning,\r\n            '警告',\r\n            '確定要停用此系統嗎？',\r\n            [\r\n                {\r\n                    id: 'cancel',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-esun-outline',\r\n                    resolveParam: 'cancel',\r\n                    title: '取消'\r\n                },\r\n                {\r\n                    id: 'confirm',\r\n                    type: SimplePopUpBtnType.callback,\r\n                    btnClass: 'btn-warning',\r\n                    resolveParam: 'confirm',\r\n                    title: '確定'\r\n                }\r\n            ]\r\n        );\r\n        if (action.param === 'confirm') {\r\n            const response = await API.BusinessManagementDeactivate(item.business);\r\n            if (response.status) {\r\n                await LoadViewData(); // 重新載入資料\r\n            } else {\r\n                ApiClient.HandleGeneralRespError(response);\r\n            }\r\n        }\r\n    } catch (error) {\r\n        ApiClient.HandleError(error);\r\n        console.error('Error fetching business:', error);\r\n        // Handle error (e.g., show an error message)\r\n    }\r\n}\r\n\r\n/**\r\n * @todo 業務別授權管理\r\n */\r\nconst operateBusiness = ref<string>('');\r\nimport BusinessAllowModal from '@/components/BackStage/3_Business/BusinessAllowModal.vue';\r\nimport type { BusinessManagementUpdateParams } from '@/api/v1/3_Business/BusinessManagementUpdate';\r\nimport type { BusinessManagementCreateParams } from '@/api/v1/3_Business/BusinessManagementCreate';\r\n\r\nconst BusinessAllowModalRef = ref<InstanceType<typeof BusinessAllowModal>>();\r\n\r\n/**\r\n * @todo 開啟 業務別授權\r\n */\r\nconst showBusinessAllowModal = (business: string) => {\r\n    operateBusiness.value = business;\r\n    nextTick(() => {\r\n        if (BusinessAllowModalRef.value) {\r\n            BusinessAllowModalRef.value?.openModal();\r\n        }\r\n    });\r\n};\r\n</script>\r\n"],"names":["GetCreateBusinessModal","systemList","value","Common.ReplaceSpecialChar","system","GetDefaultFormData","GetUpdateBusinessModal","props","__props","business","ref","AllowData","GetDefaultAllowData","watchEffect","watch","LoadViewData","newVal","oldVal","openModal","closeModal","handleBackgroundClick","event","response","API","ApiClient.HandleGeneralRespError","startIndex","endIndex","error","simplePopUp","SimplePopUp","RemoveBusiness","item","SimplePopUpModalType","SimplePopUpBtnType","AccessBusinessModal","GetDefaultAccessBusinessModal","initAccessBusinessModal","onPageChange","searchQuery","pageNumber","pageSize","_a","openAccessBusinessModal","resp","handleSelectAllowBusinessSubmit","addedBusiness","handleSelectAllowBusinessCancel","__expose","_createElementBlock","_createElementVNode","_normalizeClass","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_cache","$event","_hoisted_7","_openBlock","_hoisted_8","_Fragment","index","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createBlock","Pagination","_hoisted_16","SelectListModal","GetAllSystemInfo","appData","reactive","createModal","createData","ApiClient.HandleError","onMounted","updateModal","open","handleCreateSubmit","formData","postData","throttledHandleSearch","Common.Throttle","clearSearch","updateData","handleEdit","handleEditSubmit","handleDelete","handleDeactivate","operateBusiness","BusinessAllowModalRef","showBusinessAllowModal","nextTick","_hoisted_1","_unref","_vModelText","args","JsonFormModal","_renderList","_createTextVNode","Common.FormatDate","_withModifiers","_hoisted_19","_hoisted_20","_hoisted_21","BusinessAllowModal"],"mappings":"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"}